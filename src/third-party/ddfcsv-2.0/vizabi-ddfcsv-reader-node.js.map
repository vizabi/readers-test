{"version":3,"sources":["webpack:///vizabi-ddfcsv-reader-node.js","webpack:///webpack/bootstrap 28a8d3d60cfc5c064e29","webpack:///./lib/index.js","webpack:///./lib/file-readers/backend-file-reader.js","webpack:///external \"fs\"","webpack:///./lib/file-readers/github-file-reader.js","webpack:///./lib/ddfcsv-reader.js","webpack:///./~/bluebird/js/release/bluebird.js","webpack:///./~/bluebird/js/release/promise.js","webpack:///./~/bluebird/js/release/util.js","webpack:///./~/bluebird/js/release/es5.js","webpack:///./~/bluebird/js/release/async.js","webpack:///./~/bluebird/js/release/schedule.js","webpack:///./~/bluebird/js/release/queue.js","webpack:///./~/bluebird/js/release/errors.js","webpack:///./~/bluebird/js/release/thenables.js","webpack:///./~/bluebird/js/release/promise_array.js","webpack:///./~/bluebird/js/release/context.js","webpack:///./~/bluebird/js/release/debuggability.js","webpack:///./~/bluebird/js/release/finally.js","webpack:///./~/bluebird/js/release/catch_filter.js","webpack:///./~/bluebird/js/release/nodeback.js","webpack:///./~/bluebird/js/release/method.js","webpack:///./~/bluebird/js/release/bind.js","webpack:///./~/bluebird/js/release/cancel.js","webpack:///./~/bluebird/js/release/direct_resolve.js","webpack:///./~/bluebird/js/release/synchronous_inspection.js","webpack:///./~/bluebird/js/release/join.js","webpack:///./~/bluebird/js/release/map.js","webpack:///./~/bluebird/js/release/call_get.js","webpack:///./~/bluebird/js/release/using.js","webpack:///./~/bluebird/js/release/timers.js","webpack:///./~/bluebird/js/release/generators.js","webpack:///./~/bluebird/js/release/nodeify.js","webpack:///./~/bluebird/js/release/promisify.js","webpack:///./~/bluebird/js/release/props.js","webpack:///./~/bluebird/js/release/race.js","webpack:///./~/bluebird/js/release/reduce.js","webpack:///./~/bluebird/js/release/settle.js","webpack:///./~/bluebird/js/release/some.js","webpack:///./~/bluebird/js/release/filter.js","webpack:///./~/bluebird/js/release/each.js","webpack:///./~/bluebird/js/release/any.js","webpack:///./lib/ddf-csv.js","webpack:///./~/papaparse/papaparse.js"],"names":["module","exports","modules","__webpack_require__","moduleId","installedModules","id","loaded","call","m","c","p","Object","defineProperty","value","backend_file_reader_1","backend_file_reader_2","BackendFileReader","github_file_reader_1","github_file_reader_2","GithubFileReader","ddfcsv_reader_1","getDDFCsvReaderObject","prepareDDFCsvReaderObject","getGithubDDFCsvReaderObject","_classCallCheck","instance","Constructor","TypeError","_createClass","defineProperties","target","props","i","length","descriptor","enumerable","configurable","writable","key","protoProps","staticProps","prototype","fs","this","recordTransformer","filePath","onFileRead","readFile","err","content","toString","require","defaultFileReader","externalFileReader","logger","init","readerInfo","_basepath","path","_lastModified","fileReader","reader","ddf_csv_1","ddfCsvReader","getAsset","asset","_this","isJsonAsset","slice","Promise","resolve","reject","readText","data","JSON","parse","jsonErr","read","queryPar","parsers","prettifyData","map","record","keys","forEach","_this2","query","then","result","log","stringify","noConflict","bluebird","old","e","Proxyable","check","self","executor","constructor","util","classString","INTERNAL","_bitField","_fulfillmentHandler0","undefined","_rejectionHandler0","_promise0","_receiver0","_resolveFromExecutor","_promiseCreated","_fireEvent","deferResolve","v","promise","_resolveCallback","deferReject","_rejectCallback","fillTypes","getDomain","makeSelfResolutionError","reflectHandler","PromiseInspection","_target","apiRejection","msg","UNDEFINED_BINDING","isNode","ret","process","domain","notEnumerableProp","es5","Async","async","errors","RangeError","CancellationError","TimeoutError","OperationalError","RejectionError","AggregateError","APPLY","NEXT_FILTER","tryConvertToPromise","PromiseArray","Context","createContext","create","debug","PassThroughHandlerContext","CapturedTrace","catchFilter","nodebackForPromise","errorObj","tryCatch","caught","fn","len","arguments","catchInstances","Array","j","item","isObject","reflect","_then","didFulfill","didReject","warnings","_warn","done","_setIsFinal","spread","all","toJSON","isFulfilled","isRejected","fulfillmentValue","rejectionReason","reason","error","originatesFromRejection","getNewLibraryCopy","is","val","fromNode","fromCallback","_captureStackTrace","multiArgs","_isFateSealed","_setAsyncGuaranteed","promises","cast","obj","_setFulfilled","fulfilled","rejected","setScheduler","_","receiver","internalData","haveInternalData","bitField","_propagateFrom","_boundValue","_boundTo","handler","settler","_settlePromiseCtx","_unsetRejectionIsUnhandled","_settlePromiseLateCancellationObserver","_attachExtraTrace","invoke","domainBind","_addCallbacks","_length","_isFollowing","_setLength","_setRejected","_setFollowing","_isFinal","_unsetCancelled","_setCancelled","_setWillBeCancelled","hasCustomScheduler","_receiverAt","index","_isBound","_promiseAt","_fulfillmentHandlerAt","_rejectionHandlerAt","_migrateCallback0","follower","fulfill","_migrateCallbackAt","base","_proxy","proxyable","arg","shouldBind","maybePromise","_fulfill","_reject","_setFollowee","_value","_reason","synchronous","ignoreNonErrorWarnings","trace","ensureErrorObject","hasStack","message","_pushContext","r","_execute","_popContext","_settlePromiseFromHandler","x","apply","promiseCreated","checkForgottenReturns","_followee","_settlePromise","isPromise","asyncGuaranteed","_invokeInternalOnCancel","isFinallyHandler","cancelPromise","_promiseCancelled","_cancel","cancel","_isResolved","_promiseFulfilled","_promiseRejected","ctx","_settlePromise0","_clearCallbackDataAtIndex","_settlePromises","settlePromises","fatalError","_ensurePossibleRejectionHandled","_fulfillPromises","_rejectPromises","_clearCancellationData","_settledValue","defer","pending","deprecated","version","toFastProperties","a","b","setBounds","firstLineError","lastLineError","tryCatcher","tryCatchTarget","isPrimitive","_typeof","maybeWrapAsError","maybeError","Error","safeToString","withAppended","appendee","getDataPropertyOrDefault","defaultValue","isES5","hasOwnProperty","desc","getOwnPropertyDescriptor","get","set","name","thrower","isClass","names","hasMethods","hasMethodsOtherThanConstructor","hasThisAssignmentAndStaticMethods","thisAssignmentPattern","test","FakeConstructor","l","isIdentifier","str","rident","filledRange","count","prefix","suffix","isError","markAsOriginatingFromRejection","ignore","canAttachTrace","propertyIsWritable","copyDescriptors","from","to","filter","getDescriptor","env","hasEnvVariables","getNativePromise","cb","bind","Symbol","iterator","canEvaluate","navigator","globalObject","window","global","inherits","Child","Parent","T","constructor$","propertyName","hasProp","charAt","inheritedDataKeys","excludedPrototypes","Function","isExcludedProto","getKeys","getOwnPropertyNames","visitedKeys","push","getPrototypeOf","enumeration","asArray","isArray","ArrayFrom","itResult","it","next","toLowerCase","hasDevTools","chrome","loadTimes","isRecentNode","versions","node","split","Number","freeze","prop","has","proto","ObjectKeys","o","ObjectGetDescriptor","ObjectDefineProperty","ObjectFreeze","ObjectGetPrototypeOf","ArrayIsArray","_customScheduler","_isTickUsed","_lateQueue","Queue","_normalQueue","_haveDrainedQueues","_trampolineEnabled","drainQueues","_drainQueues","_schedule","schedule","AsyncInvokeLater","_queueTick","AsyncInvoke","AsyncSettlePromises","_pushOne","prev","enableTrampoline","disableTrampolineIfNecessary","haveItemsQueued","stderr","write","stack","exit","throwLater","setTimeout","invokeLater","_drainQueue","queue","shift","_reset","noAsyncScheduler","NativePromise","MutationObserver","GlobalSetImmediate","setImmediate","ProcessNextTick","nextTick","nativePromise","standalone","cordova","div","document","createElement","opts","attributes","toggleScheduled","div2","o2","classList","toggle","observe","scheduleToggle","disconnect","arrayMove","src","srcIndex","dst","dstIndex","capacity","_capacity","_front","_willBeOverCapacity","size","_checkCapacity","wrapMask","front","_resizeTo","oldCapacity","moveItemsCount","subError","nameProperty","defaultMessage","SubError","captureStackTrace","cause","_TypeError","_RangeError","Objectfreeze","Warning","methods","level","indent","join","lines","errorTypes","context","getThen","isAnyBluebirdPromise","doThenable","doGetThen","toResolutionValue","Map","values","_promise","_setOnCancel","_values","_totalResolved","_init","resolveValueIfEmpty","_resolveEmptyArray","_resolve","_iterate","getActualLength","shouldCopyValues","isResolved","suppressUnhandledRejections","_isCancellable","totalResolved","_resultCancelled","_trace","peekContext","longStackTraces","lastIndex","contextStack","_peekContext","pop","deactivateLongStackTraces","activateLongStackTraces","Promise_pushContext","Promise_popContext","Promise_PeekContext","Promise_peekContext","Promise_promiseCreated","generatePromiseLifecycleEventObject","defaultFireEvent","cancellationExecute","onCancel","_attachCancellationCallback","cancellationAttachCancellationCallback","previousOnCancel","_onCancel","cancellationOnCancel","_onCancelField","cancellationSetOnCancel","cancellationClearCancellationData","_cancellationParent","cancellationPropagateFrom","parent","flags","branchesRemainingToCancel","_branchesRemainingToCancel","_setBoundTo","bindingPropagateFrom","boundValueFunction","longStackTracesCaptureStackTrace","longStackTracesAttachExtraTrace","ignoreSelf","_parent","attachExtraTrace","__stackCleaned__","parsed","parseStackAndMessage","returnValue","wForgottenReturn","_returnedNonUndefined","handlerLine","creatorLine","traceLines","cleanStack","line","nodeFramePattern","lineMatches","match","parseLinePattern","firstUserLine","replacement","warn","shouldUseOwnTrace","config","warning","activeFireEvent","formatAndLogError","reconstructStack","stacks","removeDuplicateOrEmptyJumps","splice","removeCommonRoots","current","currentLastIndex","currentLastLine","commonRootMeetPoint","isTraceLine","stackFramePattern","isInternalFrame","shouldIgnore","indentStackFrames","stackFramesAsArray","replace","title","isSoft","console","formatStack","String","printWarning","fireRejectionEvent","localHandler","localEventFired","formatNonError","ruselessToString","newStr","snip","maxChars","substr","longStackTracesIsSupported","parseLineInfo","matches","parseLineInfoRegex","fileName","parseInt","firstFileName","lastFileName","firstStackLines","lastStackLines","firstIndex","bluebirdFramePattern","info","_promisesCreated","uncycle","unhandledRejectionHandled","possiblyUnhandledRejection","_getDomain","_async","debugging","_setRejectionIsUnhandled","_notifyUnhandledRejection","_notifyUnhandledRejectionIsHandled","_setReturnedNonUndefined","_isRejectionUnhandled","_setUnhandledRejectionIsNotified","_unsetUnhandledRejectionIsNotified","_isUnhandledRejectionNotified","onPossiblyUnhandledRejection","onUnhandledRejectionHandled","disableLongStackTraces","Promise_captureStackTrace","Promise_attachExtraTrace","hasLongStackTraces","fireDomEvent","CustomEvent","event","dispatchEvent","domEvent","detail","cancelable","Event","createEvent","initCustomEvent","fireGlobalEvent","emit","methodName","method","eventToObjectGenerator","promiseFulfilled","promiseRejected","promiseResolved","promiseCancelled","promiseChained","child","unhandledRejection","rejectionHandled","globalEventFired","domEventFired","warningsOption","cancellation","propagateFromFunction","monitoring","nodes","stackToIndex","currentStack","cycleEdgeNode","currentChildLength","v8stackFramePattern","v8stackFormatter","stackTraceLimit","ignoreUntil","indexOf","hasStackAfterThrow","isTTY","color","type","called","FinallyHandlerCancelReaction","finallyHandler","checkCancel","succeed","fail","reasonOrValue","_isCancelled","isPending","_passThrough","success","lastly","tap","tapCatch","handlerOrPredicate","instances","boundTo","predicateLoop","matchesPredicate","isUntypedError","wrapAsOperationalError","rErrorKey","wrapped","$_len","args","Math","max","$_i","_resolveFromSyncValue","attempt","calledBind","rejectThis","targetRejected","promiseRejectionQueued","bindingPromise","bindingResolved","thisArg","bindingRejected","_cancelBy","_cancelBranched","_branchHasCancelled","_enoughBranchesHaveCancelled","canceller","_invokeOnCancel","_cancelPromises","_unsetOnCancel","isCancellable","isCancelled","_doInvokeOnCancel","onCancelCallback","internalOnly","returner","thenReturn","thenThrow","catchThrow","catchReturn","_settledValueField","__isCancelled","thenCallback","promiseSetter","generateHolderClass","total","assignment","cancellationCode","passedArguments","code","holderClasses","thenCallbacks","promiseSetters","last","HolderClass","holder","callbacks","asyncNeeded","MappingPromiseArray","limit","_filter","_callback","_preservedValues","_limit","_inFlight","_queue","_asyncInit","options","concurrency","isFinite","_init$","preservedValues","callback","booleans","cr","callerCache","getterCache","ensureMethod","caller","namedGetter","indexedGetter","getMethodCaller","getGetter","makeMethodCaller","makeGetter","getCompiled","compiler","cache","maybeCaller","getter","isIndex","maybeGetter","castPreservingDisposable","thenable","_isDisposable","_getDisposer","_setDisposable","dispose","resources","inspection","tryDispose","Disposer","_data","_context","FunctionDisposer","maybeUnwrapDisposer","isDisposer","ResourceList","NULL","resource","doDispose","_unsetDisposable","d","using","input","spreadArgs","disposer","reflectedResources","resultPromise","inspections","_disposer","HandleWrapper","handle","successClear","clearTimeout","failureClear","afterValue","delay","ms","afterTimeout","timeout","handleWrapper","promiseFromYieldHandler","yieldHandlers","traceParent","PromiseSpawn","generatorFunction","yieldHandler","internal","_finallyPromise","_stack","_generatorFunction","_receiver","_generator","_yieldHandlers","concat","_yieldedPromise","_cancellationPhase","_cleanup","implementsReturn","coroutine","returnSentinel","_continue","_run","PromiseSpawn$","generator","spawn","addYieldHandler","spreadAdapter","nodeback","successAdapter","errorAdapter","newReason","asCallback","nodeify","adapter","propsFilter","noCopyPropsPattern","isPromisified","__isPromisified__","hasPromisified","defaultPromisified","checkValid","suffixRegexp","keyWithoutAsyncSuffix","promisifiableMethods","passesDefaultFilter","defaultFilter","makeNodePromisifiedClosure","__","promisified","THIS","defaultThis","promisifyAll","promisifier","RegExp","escapeIdentRegex","promisifiedKey","makeNodePromisified","promisify","makeNodePromisifiedEval","defaultSuffix","noCopyProps","switchCaseArgumentOrder","likelyArgumentCount","min","argumentSequence","argumentCount","parameterDeclaration","parameterCount","originalName","generateCallForArgumentCount","comma","shouldProxyThis","generateArgumentSwitchCase","argumentOrder","newParameterCount","getFunctionCode","body","PropertiesPromiseArray","entries","isMap","Es6Map","mapToEntries","_isMap","castValue","extractEntry","entriesToMap","keyOffset","race","raceLater","array","ReductionPromiseArray","initialValue","_each","_fn","_initialValue","_currentCancellable","_eachValues","completed","valueOrReason","reduce","gotAccum","accum","_gotAccum","gotValue","_eachComplete","sender","_resultCancelled$","SettledPromiseArray","_promiseResolved","settle","SomePromiseArray","_howMany","_unwrap","_initialized","some","howMany","setHowMany","CANCELLATION","isArrayResolved","_canPossiblyFulfill","_getRangeError","setUnwrap","_addFulfilled","_fulfilled","_addRejected","_checkOutcome","_rejected","_SomePromiseArray","PromiseMap","promiseAllThis","PromiseAll","PromiseMapSeries","PromiseReduce","each","mapSeries","any","_defineProperty","_toConsumableArray","arr","arr2","getDatapackagePath","pathParam","endsWith","getBasePath","datapackagePathParam","dpPathSplit","loadDataPackage","datapackage","parseErr","buildResourcesLookup","buildKeyValueLookup","loadConcepts","setConceptsLookup","internalConcepts","conceptQuery","select","queryData","buildConceptsLookup","reparseConcepts","concepts","entitySetMembershipConcepts","concept","concept_type","conceptsLookup","parsingFunctions","parseFloat","getResources","resourceUpdates","response","resourceConcepts","parsingConcepts","row","_iteratorNormalCompletion","_didIteratorError","_iteratorError","_step","_iterator","_step$value","_slicedToArray","parseFn","return","clear","queryParam","isSchemaQuery","datapackagePromise","querySchema","conceptsPromise","fromClause","_queryParam$select","_queryParam$select$ke","_queryParam$select$va","_queryParam$where","where","_queryParam$join","_queryParam$order_by","order_by","language","projection","Set","filterFields","getFilterFields","field","resourcesPromise","loadResources","joinsPromise","getJoinFilters","entitySetFilterPromise","getEntitySetFilter","_ref","_ref2","resourceResponses","entitySetFilter","joinFilters","whereResolved","processWhere","mergeFilters","dataTables","processResourceResponse","queryResult","joinData","applyFilterRow","fillMissingValues","projectRow","orderData","orderBy","orderNormalized","orderPart","direction","n","sort","order","fieldValue","includes","subFilter","assign","_len","filters","_key","$and","getSchemaFromCollection","collectionPar","ddfSchema","_ref3","primaryKey","collection","throwError","_iteratorNormalCompletion2","_didIteratorError2","_iteratorError2","_step2","_iterator2","every","filterKey","operator","operators","joinID","getJoinFilter","results","mergeObjects","$in","fields","subFields","filterConceptsByType","conceptTypes","conceptStrings","_iteratorNormalCompletion3","_didIteratorError3","_iteratorError3","_step3","_iterator3","conceptString","getEntityConceptRenameMap","queryKey","resourceKey","resourceKeySet","entityConceptTypes","queryEntityConcepts","allEntityConcepts","lookupConcept","aliasConcept","mapA","mapB","singleValue","resultSet","keyValueLookup","createKeyString","resourcePK","schema","resourceProjection","renameMap","renameHeaderRow","loadResource","projectionSet","joinMode","_len2","_key2","canonicalKey","dataMap","dataPar","keyString","resultRow","joinRow","sourceRow","mode","sourceRowStr","resultRowStr","errStr","currentLogger","filePromises","loadFile","basePath","languageValid","getLanguages","languageLoaded","translations","translationPath","fileResponses","filesData","resp","lang","Papa","header","skipEmptyLines","dynamicTyping","headerName","complete","_error","datapackagePar","resourcesLookup","kvPair","resourceName","predicates","predicate","rowValue","filterValue","datapackagePath","sliceIterator","_arr","_n","_d","_e","_s","_i","__WEBPACK_AMD_DEFINE_FACTORY__","__WEBPACK_AMD_DEFINE_ARRAY__","__WEBPACK_AMD_DEFINE_RESULT__","root","factory","CsvToJson","_input","_config","isFunction","dynamicTypingFunction","worker","WORKERS_SUPPORTED","w","newWorker","userStep","step","userChunk","chunk","userComplete","userError","postMessage","workerId","streamer","download","NetworkStreamer","StringStreamer","readable","on","ReadableStreamStreamer","File","FileStreamer","stream","JsonToCsv","unpackConfig","delimiter","BAD_DELIMITERS","_delimiter","quotes","_quotes","newline","_newline","quoteChar","_quoteChar","_writeHeader","objectKeys","serialize","csv","hasHeader","dataKeyedByField","safe","maxCol","col","colIdx","quoteCharRegex","needsQuotes","hasAny","substrings","meta","ChunkStreamer","replaceConfig","configCopy","copy","chunkSize","_handle","ParserHandle","_paused","_finished","_baseIndex","_partialLine","_rowCount","_start","_nextChunk","isFirstChunk","_completeResults","parseChunk","beforeFirstChunk","modifiedChunk","aggregate","paused","aborted","cursor","substring","finishedIncludingPreview","preview","IS_PAPA_WORKER","WORKER_ID","finished","_sendError","getFileSize","xhr","contentRange","getResponseHeader","lastIndexOf","RemoteChunkSize","IS_WORKER","_readChunk","_chunkLoaded","url","XMLHttpRequest","withCredentials","onload","bindFunction","onerror","_chunkError","open","downloadRequestHeaders","headers","setRequestHeader","end","send","status","readyState","responseText","errorMessage","errorText","statusText","LocalChunkSize","usingAsyncReader","FileReader","file","webkitSlice","mozSlice","FileReaderSync","txt","readAsText","encoding","string","remaining","s","parseOnData","_streamData","_streamEnd","_streamError","_streamCleanUp","removeListener","processResults","_results","_delimiterError","addError","DefaultDelimiter","needsHeaderRow","fillHeaderFields","applyHeaderAndDynamicTyping","_fields","shouldApplyDynamicTyping","parseDynamic","tryParseFloat","guessDelimiter","bestDelim","bestDelta","fieldCountPrevRow","delimChoices","RECORD_SEP","UNIT_SEP","delim","delta","avgFieldCount","emptyLinesCount","Parser","fieldCount","abs","successful","bestDelimiter","guessLineEndings","nAppearsFirst","numWithN","isNumber","FLOAT","_parser","_stepCounter","_aborted","abort","baseIndex","ignoreLastRow","delimGuess","parserConfig","pause","getCharIndex","resume","comments","fastMode","pushRow","lastCursor","finish","returnable","inputLen","stepIsFunction","doStep","saveRow","newCursor","nextNewline","stopped","linebreak","truncated","delimLen","newlineLen","commentsLen","rows","nextDelim","quoteSearch","getScriptPath","scripts","getElementsByTagName","LOADED_SYNC","SCRIPT_PATH","workerUrl","AUTO_SCRIPT_PATH","Worker","onmessage","mainThreadReceivedMessage","workerIdCounter","workers","completeWorker","notImplemented","terminate","workerThreadReceivedMessage","cpy","f","func","location","search","unparse","fromCharCode","BYTE_ORDER_MARK","jQuery","$","parseNextFile","before","returned","inputElem","action","fileComplete","instanceConfig","extend","userCompleteFunc","elem","idx","supported","toUpperCase","attr","files","addEventListener"],"mappings":"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","file":"vizabi-ddfcsv-reader-node.js","sourcesContent":["module.exports =\n/******/ (function(modules) { // webpackBootstrap\n/******/ \t// The module cache\n/******/ \tvar installedModules = {};\n/******/\n/******/ \t// The require function\n/******/ \tfunction __webpack_require__(moduleId) {\n/******/\n/******/ \t\t// Check if module is in cache\n/******/ \t\tif(installedModules[moduleId])\n/******/ \t\t\treturn installedModules[moduleId].exports;\n/******/\n/******/ \t\t// Create a new module (and put it into the cache)\n/******/ \t\tvar module = installedModules[moduleId] = {\n/******/ \t\t\texports: {},\n/******/ \t\t\tid: moduleId,\n/******/ \t\t\tloaded: false\n/******/ \t\t};\n/******/\n/******/ \t\t// Execute the module function\n/******/ \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n/******/\n/******/ \t\t// Flag the module as loaded\n/******/ \t\tmodule.loaded = true;\n/******/\n/******/ \t\t// Return the exports of the module\n/******/ \t\treturn module.exports;\n/******/ \t}\n/******/\n/******/\n/******/ \t// expose the modules object (__webpack_modules__)\n/******/ \t__webpack_require__.m = modules;\n/******/\n/******/ \t// expose the module cache\n/******/ \t__webpack_require__.c = installedModules;\n/******/\n/******/ \t// __webpack_public_path__\n/******/ \t__webpack_require__.p = \"\";\n/******/\n/******/ \t// Load entry module and return exports\n/******/ \treturn __webpack_require__(0);\n/******/ })\n/************************************************************************/\n/******/ ([\n/* 0 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar backend_file_reader_1 = __webpack_require__(1);\n\tvar backend_file_reader_2 = __webpack_require__(1);\n\texports.BackendFileReader = backend_file_reader_2.BackendFileReader;\n\tvar github_file_reader_1 = __webpack_require__(3);\n\tvar github_file_reader_2 = __webpack_require__(3);\n\texports.GithubFileReader = github_file_reader_2.GithubFileReader;\n\tvar ddfcsv_reader_1 = __webpack_require__(4);\n\texports.getDDFCsvReaderObject = ddfcsv_reader_1.prepareDDFCsvReaderObject(new backend_file_reader_1.BackendFileReader());\n\texports.getGithubDDFCsvReaderObject = ddfcsv_reader_1.prepareDDFCsvReaderObject(new github_file_reader_1.GithubFileReader());\n\t//# sourceMappingURL=index.js.map\n\n/***/ },\n/* 1 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar fs = __webpack_require__(2);\n\t\n\tvar BackendFileReader = function () {\n\t    function BackendFileReader() {\n\t        _classCallCheck(this, BackendFileReader);\n\t    }\n\t\n\t    _createClass(BackendFileReader, [{\n\t        key: \"setRecordTransformer\",\n\t        value: function setRecordTransformer(recordTransformer) {\n\t            this.recordTransformer = recordTransformer;\n\t        }\n\t    }, {\n\t        key: \"readText\",\n\t        value: function readText(filePath, onFileRead) {\n\t            fs.readFile(filePath, 'utf-8', function (err, content) {\n\t                if (err) {\n\t                    onFileRead(err);\n\t                    return;\n\t                }\n\t                onFileRead(null, content.toString());\n\t            });\n\t        }\n\t    }]);\n\t\n\t    return BackendFileReader;\n\t}();\n\t\n\texports.BackendFileReader = BackendFileReader;\n\t//# sourceMappingURL=backend-file-reader.js.map\n\n/***/ },\n/* 2 */\n/***/ function(module, exports) {\n\n\tmodule.exports = require(\"fs\");\n\n/***/ },\n/* 3 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar _createClass = function () { function defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } } return function (Constructor, protoProps, staticProps) { if (protoProps) defineProperties(Constructor.prototype, protoProps); if (staticProps) defineProperties(Constructor, staticProps); return Constructor; }; }();\n\t\n\tfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\t\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\t\n\tvar GithubFileReader = function () {\n\t    function GithubFileReader() {\n\t        _classCallCheck(this, GithubFileReader);\n\t    }\n\t\n\t    _createClass(GithubFileReader, [{\n\t        key: \"setRecordTransformer\",\n\t        value: function setRecordTransformer(recordTransformer) {\n\t            this.recordTransformer = recordTransformer;\n\t        }\n\t    }, {\n\t        key: \"readText\",\n\t        value: function readText(filePath, onFileRead) {}\n\t    }]);\n\t\n\t    return GithubFileReader;\n\t}();\n\t\n\texports.GithubFileReader = GithubFileReader;\n\t//# sourceMappingURL=github-file-reader.js.map\n\n/***/ },\n/* 4 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Promise = __webpack_require__(5);\n\tvar ddf_csv_1 = __webpack_require__(41);\n\tfunction prepareDDFCsvReaderObject(defaultFileReader) {\n\t    return function (externalFileReader, logger) {\n\t        return {\n\t            init: function init(readerInfo) {\n\t                this._basepath = readerInfo.path;\n\t                this._lastModified = readerInfo._lastModified;\n\t                this.fileReader = externalFileReader || defaultFileReader;\n\t                this.logger = logger;\n\t                this.reader = ddf_csv_1.ddfCsvReader(this._basepath + \"/datapackage.json\", this.fileReader, this.logger);\n\t            },\n\t            getAsset: function getAsset(asset) {\n\t                var _this = this;\n\t\n\t                var isJsonAsset = asset.slice(-'.json'.length) === '.json';\n\t                return new Promise(function (resolve, reject) {\n\t                    _this.fileReader.readText(_this._basepath + \"/\" + asset, function (err, data) {\n\t                        if (err) {\n\t                            reject(err);\n\t                            return;\n\t                        }\n\t                        if (isJsonAsset) {\n\t                            try {\n\t                                resolve(JSON.parse(data));\n\t                            } catch (jsonErr) {\n\t                                reject(err);\n\t                            }\n\t                        } else {\n\t                            resolve(data);\n\t                        }\n\t                    });\n\t                });\n\t            },\n\t            read: function read(queryPar, parsers) {\n\t                var _this2 = this;\n\t\n\t                function prettifyData(data) {\n\t                    return data.map(function (record) {\n\t                        var keys = Object.keys(record);\n\t                        keys.forEach(function (key) {\n\t                            if (parsers[key]) {\n\t                                record[key] = parsers[key](record[key]);\n\t                            }\n\t                        });\n\t                        return record;\n\t                    });\n\t                }\n\t                return new Promise(function (resolve) {\n\t                    _this2.reader.query(queryPar).then(function (result) {\n\t                        result = parsers ? prettifyData(result) : result;\n\t                        if (_this2.logger && _this2.logger.log) {\n\t                            logger.log(JSON.stringify(queryPar), result.length);\n\t                            logger.log(result);\n\t                        }\n\t                        resolve(result);\n\t                    });\n\t                });\n\t            }\n\t        };\n\t    };\n\t}\n\texports.prepareDDFCsvReaderObject = prepareDDFCsvReaderObject;\n\t//# sourceMappingURL=ddfcsv-reader.js.map\n\n/***/ },\n/* 5 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar old;\n\tif (typeof Promise !== \"undefined\") old = Promise;\n\tfunction noConflict() {\n\t    try {\n\t        if (Promise === bluebird) Promise = old;\n\t    } catch (e) {}\n\t    return bluebird;\n\t}\n\tvar bluebird = __webpack_require__(6)();\n\tbluebird.noConflict = noConflict;\n\tmodule.exports = bluebird;\n\n/***/ },\n/* 6 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function () {\n\t    var makeSelfResolutionError = function makeSelfResolutionError() {\n\t        return new TypeError(\"circular promise resolution chain\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t    };\n\t    var reflectHandler = function reflectHandler() {\n\t        return new Promise.PromiseInspection(this._target());\n\t    };\n\t    var apiRejection = function apiRejection(msg) {\n\t        return Promise.reject(new TypeError(msg));\n\t    };\n\t    function Proxyable() {}\n\t    var UNDEFINED_BINDING = {};\n\t    var util = __webpack_require__(7);\n\t\n\t    var getDomain;\n\t    if (util.isNode) {\n\t        getDomain = function getDomain() {\n\t            var ret = process.domain;\n\t            if (ret === undefined) ret = null;\n\t            return ret;\n\t        };\n\t    } else {\n\t        getDomain = function getDomain() {\n\t            return null;\n\t        };\n\t    }\n\t    util.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\t\n\t    var es5 = __webpack_require__(8);\n\t    var Async = __webpack_require__(9);\n\t    var async = new Async();\n\t    es5.defineProperty(Promise, \"_async\", { value: async });\n\t    var errors = __webpack_require__(12);\n\t    var TypeError = Promise.TypeError = errors.TypeError;\n\t    Promise.RangeError = errors.RangeError;\n\t    var CancellationError = Promise.CancellationError = errors.CancellationError;\n\t    Promise.TimeoutError = errors.TimeoutError;\n\t    Promise.OperationalError = errors.OperationalError;\n\t    Promise.RejectionError = errors.OperationalError;\n\t    Promise.AggregateError = errors.AggregateError;\n\t    var INTERNAL = function INTERNAL() {};\n\t    var APPLY = {};\n\t    var NEXT_FILTER = {};\n\t    var tryConvertToPromise = __webpack_require__(13)(Promise, INTERNAL);\n\t    var PromiseArray = __webpack_require__(14)(Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable);\n\t    var Context = __webpack_require__(15)(Promise);\n\t    /*jshint unused:false*/\n\t    var createContext = Context.create;\n\t    var debug = __webpack_require__(16)(Promise, Context);\n\t    var CapturedTrace = debug.CapturedTrace;\n\t    var PassThroughHandlerContext = __webpack_require__(17)(Promise, tryConvertToPromise, NEXT_FILTER);\n\t    var catchFilter = __webpack_require__(18)(NEXT_FILTER);\n\t    var nodebackForPromise = __webpack_require__(19);\n\t    var errorObj = util.errorObj;\n\t    var tryCatch = util.tryCatch;\n\t    function check(self, executor) {\n\t        if (self == null || self.constructor !== Promise) {\n\t            throw new TypeError(\"the promise constructor cannot be invoked directly\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        if (typeof executor !== \"function\") {\n\t            throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n\t        }\n\t    }\n\t\n\t    function Promise(executor) {\n\t        if (executor !== INTERNAL) {\n\t            check(this, executor);\n\t        }\n\t        this._bitField = 0;\n\t        this._fulfillmentHandler0 = undefined;\n\t        this._rejectionHandler0 = undefined;\n\t        this._promise0 = undefined;\n\t        this._receiver0 = undefined;\n\t        this._resolveFromExecutor(executor);\n\t        this._promiseCreated();\n\t        this._fireEvent(\"promiseCreated\", this);\n\t    }\n\t\n\t    Promise.prototype.toString = function () {\n\t        return \"[object Promise]\";\n\t    };\n\t\n\t    Promise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n\t        var len = arguments.length;\n\t        if (len > 1) {\n\t            var catchInstances = new Array(len - 1),\n\t                j = 0,\n\t                i;\n\t            for (i = 0; i < len - 1; ++i) {\n\t                var item = arguments[i];\n\t                if (util.isObject(item)) {\n\t                    catchInstances[j++] = item;\n\t                } else {\n\t                    return apiRejection(\"Catch statement predicate: \" + \"expecting an object but got \" + util.classString(item));\n\t                }\n\t            }\n\t            catchInstances.length = j;\n\t            fn = arguments[i];\n\t            return this.then(undefined, catchFilter(catchInstances, fn, this));\n\t        }\n\t        return this.then(undefined, fn);\n\t    };\n\t\n\t    Promise.prototype.reflect = function () {\n\t        return this._then(reflectHandler, reflectHandler, undefined, this, undefined);\n\t    };\n\t\n\t    Promise.prototype.then = function (didFulfill, didReject) {\n\t        if (debug.warnings() && arguments.length > 0 && typeof didFulfill !== \"function\" && typeof didReject !== \"function\") {\n\t            var msg = \".then() only accepts functions but was passed: \" + util.classString(didFulfill);\n\t            if (arguments.length > 1) {\n\t                msg += \", \" + util.classString(didReject);\n\t            }\n\t            this._warn(msg);\n\t        }\n\t        return this._then(didFulfill, didReject, undefined, undefined, undefined);\n\t    };\n\t\n\t    Promise.prototype.done = function (didFulfill, didReject) {\n\t        var promise = this._then(didFulfill, didReject, undefined, undefined, undefined);\n\t        promise._setIsFinal();\n\t    };\n\t\n\t    Promise.prototype.spread = function (fn) {\n\t        if (typeof fn !== \"function\") {\n\t            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n\t    };\n\t\n\t    Promise.prototype.toJSON = function () {\n\t        var ret = {\n\t            isFulfilled: false,\n\t            isRejected: false,\n\t            fulfillmentValue: undefined,\n\t            rejectionReason: undefined\n\t        };\n\t        if (this.isFulfilled()) {\n\t            ret.fulfillmentValue = this.value();\n\t            ret.isFulfilled = true;\n\t        } else if (this.isRejected()) {\n\t            ret.rejectionReason = this.reason();\n\t            ret.isRejected = true;\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    Promise.prototype.all = function () {\n\t        if (arguments.length > 0) {\n\t            this._warn(\".all() was passed arguments but it does not take any\");\n\t        }\n\t        return new PromiseArray(this).promise();\n\t    };\n\t\n\t    Promise.prototype.error = function (fn) {\n\t        return this.caught(util.originatesFromRejection, fn);\n\t    };\n\t\n\t    Promise.getNewLibraryCopy = module.exports;\n\t\n\t    Promise.is = function (val) {\n\t        return val instanceof Promise;\n\t    };\n\t\n\t    Promise.fromNode = Promise.fromCallback = function (fn) {\n\t        var ret = new Promise(INTERNAL);\n\t        ret._captureStackTrace();\n\t        var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs : false;\n\t        var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n\t        if (result === errorObj) {\n\t            ret._rejectCallback(result.e, true);\n\t        }\n\t        if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n\t        return ret;\n\t    };\n\t\n\t    Promise.all = function (promises) {\n\t        return new PromiseArray(promises).promise();\n\t    };\n\t\n\t    Promise.cast = function (obj) {\n\t        var ret = tryConvertToPromise(obj);\n\t        if (!(ret instanceof Promise)) {\n\t            ret = new Promise(INTERNAL);\n\t            ret._captureStackTrace();\n\t            ret._setFulfilled();\n\t            ret._rejectionHandler0 = obj;\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    Promise.resolve = Promise.fulfilled = Promise.cast;\n\t\n\t    Promise.reject = Promise.rejected = function (reason) {\n\t        var ret = new Promise(INTERNAL);\n\t        ret._captureStackTrace();\n\t        ret._rejectCallback(reason, true);\n\t        return ret;\n\t    };\n\t\n\t    Promise.setScheduler = function (fn) {\n\t        if (typeof fn !== \"function\") {\n\t            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        return async.setScheduler(fn);\n\t    };\n\t\n\t    Promise.prototype._then = function (didFulfill, didReject, _, receiver, internalData) {\n\t        var haveInternalData = internalData !== undefined;\n\t        var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n\t        var target = this._target();\n\t        var bitField = target._bitField;\n\t\n\t        if (!haveInternalData) {\n\t            promise._propagateFrom(this, 3);\n\t            promise._captureStackTrace();\n\t            if (receiver === undefined && (this._bitField & 2097152) !== 0) {\n\t                if (!((bitField & 50397184) === 0)) {\n\t                    receiver = this._boundValue();\n\t                } else {\n\t                    receiver = target === this ? undefined : this._boundTo;\n\t                }\n\t            }\n\t            this._fireEvent(\"promiseChained\", this, promise);\n\t        }\n\t\n\t        var domain = getDomain();\n\t        if (!((bitField & 50397184) === 0)) {\n\t            var handler,\n\t                value,\n\t                settler = target._settlePromiseCtx;\n\t            if ((bitField & 33554432) !== 0) {\n\t                value = target._rejectionHandler0;\n\t                handler = didFulfill;\n\t            } else if ((bitField & 16777216) !== 0) {\n\t                value = target._fulfillmentHandler0;\n\t                handler = didReject;\n\t                target._unsetRejectionIsUnhandled();\n\t            } else {\n\t                settler = target._settlePromiseLateCancellationObserver;\n\t                value = new CancellationError(\"late cancellation observer\");\n\t                target._attachExtraTrace(value);\n\t                handler = didReject;\n\t            }\n\t\n\t            async.invoke(settler, target, {\n\t                handler: domain === null ? handler : typeof handler === \"function\" && util.domainBind(domain, handler),\n\t                promise: promise,\n\t                receiver: receiver,\n\t                value: value\n\t            });\n\t        } else {\n\t            target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n\t        }\n\t\n\t        return promise;\n\t    };\n\t\n\t    Promise.prototype._length = function () {\n\t        return this._bitField & 65535;\n\t    };\n\t\n\t    Promise.prototype._isFateSealed = function () {\n\t        return (this._bitField & 117506048) !== 0;\n\t    };\n\t\n\t    Promise.prototype._isFollowing = function () {\n\t        return (this._bitField & 67108864) === 67108864;\n\t    };\n\t\n\t    Promise.prototype._setLength = function (len) {\n\t        this._bitField = this._bitField & -65536 | len & 65535;\n\t    };\n\t\n\t    Promise.prototype._setFulfilled = function () {\n\t        this._bitField = this._bitField | 33554432;\n\t        this._fireEvent(\"promiseFulfilled\", this);\n\t    };\n\t\n\t    Promise.prototype._setRejected = function () {\n\t        this._bitField = this._bitField | 16777216;\n\t        this._fireEvent(\"promiseRejected\", this);\n\t    };\n\t\n\t    Promise.prototype._setFollowing = function () {\n\t        this._bitField = this._bitField | 67108864;\n\t        this._fireEvent(\"promiseResolved\", this);\n\t    };\n\t\n\t    Promise.prototype._setIsFinal = function () {\n\t        this._bitField = this._bitField | 4194304;\n\t    };\n\t\n\t    Promise.prototype._isFinal = function () {\n\t        return (this._bitField & 4194304) > 0;\n\t    };\n\t\n\t    Promise.prototype._unsetCancelled = function () {\n\t        this._bitField = this._bitField & ~65536;\n\t    };\n\t\n\t    Promise.prototype._setCancelled = function () {\n\t        this._bitField = this._bitField | 65536;\n\t        this._fireEvent(\"promiseCancelled\", this);\n\t    };\n\t\n\t    Promise.prototype._setWillBeCancelled = function () {\n\t        this._bitField = this._bitField | 8388608;\n\t    };\n\t\n\t    Promise.prototype._setAsyncGuaranteed = function () {\n\t        if (async.hasCustomScheduler()) return;\n\t        this._bitField = this._bitField | 134217728;\n\t    };\n\t\n\t    Promise.prototype._receiverAt = function (index) {\n\t        var ret = index === 0 ? this._receiver0 : this[index * 4 - 4 + 3];\n\t        if (ret === UNDEFINED_BINDING) {\n\t            return undefined;\n\t        } else if (ret === undefined && this._isBound()) {\n\t            return this._boundValue();\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    Promise.prototype._promiseAt = function (index) {\n\t        return this[index * 4 - 4 + 2];\n\t    };\n\t\n\t    Promise.prototype._fulfillmentHandlerAt = function (index) {\n\t        return this[index * 4 - 4 + 0];\n\t    };\n\t\n\t    Promise.prototype._rejectionHandlerAt = function (index) {\n\t        return this[index * 4 - 4 + 1];\n\t    };\n\t\n\t    Promise.prototype._boundValue = function () {};\n\t\n\t    Promise.prototype._migrateCallback0 = function (follower) {\n\t        var bitField = follower._bitField;\n\t        var fulfill = follower._fulfillmentHandler0;\n\t        var reject = follower._rejectionHandler0;\n\t        var promise = follower._promise0;\n\t        var receiver = follower._receiverAt(0);\n\t        if (receiver === undefined) receiver = UNDEFINED_BINDING;\n\t        this._addCallbacks(fulfill, reject, promise, receiver, null);\n\t    };\n\t\n\t    Promise.prototype._migrateCallbackAt = function (follower, index) {\n\t        var fulfill = follower._fulfillmentHandlerAt(index);\n\t        var reject = follower._rejectionHandlerAt(index);\n\t        var promise = follower._promiseAt(index);\n\t        var receiver = follower._receiverAt(index);\n\t        if (receiver === undefined) receiver = UNDEFINED_BINDING;\n\t        this._addCallbacks(fulfill, reject, promise, receiver, null);\n\t    };\n\t\n\t    Promise.prototype._addCallbacks = function (fulfill, reject, promise, receiver, domain) {\n\t        var index = this._length();\n\t\n\t        if (index >= 65535 - 4) {\n\t            index = 0;\n\t            this._setLength(0);\n\t        }\n\t\n\t        if (index === 0) {\n\t            this._promise0 = promise;\n\t            this._receiver0 = receiver;\n\t            if (typeof fulfill === \"function\") {\n\t                this._fulfillmentHandler0 = domain === null ? fulfill : util.domainBind(domain, fulfill);\n\t            }\n\t            if (typeof reject === \"function\") {\n\t                this._rejectionHandler0 = domain === null ? reject : util.domainBind(domain, reject);\n\t            }\n\t        } else {\n\t            var base = index * 4 - 4;\n\t            this[base + 2] = promise;\n\t            this[base + 3] = receiver;\n\t            if (typeof fulfill === \"function\") {\n\t                this[base + 0] = domain === null ? fulfill : util.domainBind(domain, fulfill);\n\t            }\n\t            if (typeof reject === \"function\") {\n\t                this[base + 1] = domain === null ? reject : util.domainBind(domain, reject);\n\t            }\n\t        }\n\t        this._setLength(index + 1);\n\t        return index;\n\t    };\n\t\n\t    Promise.prototype._proxy = function (proxyable, arg) {\n\t        this._addCallbacks(undefined, undefined, arg, proxyable, null);\n\t    };\n\t\n\t    Promise.prototype._resolveCallback = function (value, shouldBind) {\n\t        if ((this._bitField & 117506048) !== 0) return;\n\t        if (value === this) return this._rejectCallback(makeSelfResolutionError(), false);\n\t        var maybePromise = tryConvertToPromise(value, this);\n\t        if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\t\n\t        if (shouldBind) this._propagateFrom(maybePromise, 2);\n\t\n\t        var promise = maybePromise._target();\n\t\n\t        if (promise === this) {\n\t            this._reject(makeSelfResolutionError());\n\t            return;\n\t        }\n\t\n\t        var bitField = promise._bitField;\n\t        if ((bitField & 50397184) === 0) {\n\t            var len = this._length();\n\t            if (len > 0) promise._migrateCallback0(this);\n\t            for (var i = 1; i < len; ++i) {\n\t                promise._migrateCallbackAt(this, i);\n\t            }\n\t            this._setFollowing();\n\t            this._setLength(0);\n\t            this._setFollowee(promise);\n\t        } else if ((bitField & 33554432) !== 0) {\n\t            this._fulfill(promise._value());\n\t        } else if ((bitField & 16777216) !== 0) {\n\t            this._reject(promise._reason());\n\t        } else {\n\t            var reason = new CancellationError(\"late cancellation observer\");\n\t            promise._attachExtraTrace(reason);\n\t            this._reject(reason);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._rejectCallback = function (reason, synchronous, ignoreNonErrorWarnings) {\n\t        var trace = util.ensureErrorObject(reason);\n\t        var hasStack = trace === reason;\n\t        if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n\t            var message = \"a promise was rejected with a non-error: \" + util.classString(reason);\n\t            this._warn(message, true);\n\t        }\n\t        this._attachExtraTrace(trace, synchronous ? hasStack : false);\n\t        this._reject(reason);\n\t    };\n\t\n\t    Promise.prototype._resolveFromExecutor = function (executor) {\n\t        if (executor === INTERNAL) return;\n\t        var promise = this;\n\t        this._captureStackTrace();\n\t        this._pushContext();\n\t        var synchronous = true;\n\t        var r = this._execute(executor, function (value) {\n\t            promise._resolveCallback(value);\n\t        }, function (reason) {\n\t            promise._rejectCallback(reason, synchronous);\n\t        });\n\t        synchronous = false;\n\t        this._popContext();\n\t\n\t        if (r !== undefined) {\n\t            promise._rejectCallback(r, true);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._settlePromiseFromHandler = function (handler, receiver, value, promise) {\n\t        var bitField = promise._bitField;\n\t        if ((bitField & 65536) !== 0) return;\n\t        promise._pushContext();\n\t        var x;\n\t        if (receiver === APPLY) {\n\t            if (!value || typeof value.length !== \"number\") {\n\t                x = errorObj;\n\t                x.e = new TypeError(\"cannot .spread() a non-array: \" + util.classString(value));\n\t            } else {\n\t                x = tryCatch(handler).apply(this._boundValue(), value);\n\t            }\n\t        } else {\n\t            x = tryCatch(handler).call(receiver, value);\n\t        }\n\t        var promiseCreated = promise._popContext();\n\t        bitField = promise._bitField;\n\t        if ((bitField & 65536) !== 0) return;\n\t\n\t        if (x === NEXT_FILTER) {\n\t            promise._reject(value);\n\t        } else if (x === errorObj) {\n\t            promise._rejectCallback(x.e, false);\n\t        } else {\n\t            debug.checkForgottenReturns(x, promiseCreated, \"\", promise, this);\n\t            promise._resolveCallback(x);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._target = function () {\n\t        var ret = this;\n\t        while (ret._isFollowing()) {\n\t            ret = ret._followee();\n\t        }return ret;\n\t    };\n\t\n\t    Promise.prototype._followee = function () {\n\t        return this._rejectionHandler0;\n\t    };\n\t\n\t    Promise.prototype._setFollowee = function (promise) {\n\t        this._rejectionHandler0 = promise;\n\t    };\n\t\n\t    Promise.prototype._settlePromise = function (promise, handler, receiver, value) {\n\t        var isPromise = promise instanceof Promise;\n\t        var bitField = this._bitField;\n\t        var asyncGuaranteed = (bitField & 134217728) !== 0;\n\t        if ((bitField & 65536) !== 0) {\n\t            if (isPromise) promise._invokeInternalOnCancel();\n\t\n\t            if (receiver instanceof PassThroughHandlerContext && receiver.isFinallyHandler()) {\n\t                receiver.cancelPromise = promise;\n\t                if (tryCatch(handler).call(receiver, value) === errorObj) {\n\t                    promise._reject(errorObj.e);\n\t                }\n\t            } else if (handler === reflectHandler) {\n\t                promise._fulfill(reflectHandler.call(receiver));\n\t            } else if (receiver instanceof Proxyable) {\n\t                receiver._promiseCancelled(promise);\n\t            } else if (isPromise || promise instanceof PromiseArray) {\n\t                promise._cancel();\n\t            } else {\n\t                receiver.cancel();\n\t            }\n\t        } else if (typeof handler === \"function\") {\n\t            if (!isPromise) {\n\t                handler.call(receiver, value, promise);\n\t            } else {\n\t                if (asyncGuaranteed) promise._setAsyncGuaranteed();\n\t                this._settlePromiseFromHandler(handler, receiver, value, promise);\n\t            }\n\t        } else if (receiver instanceof Proxyable) {\n\t            if (!receiver._isResolved()) {\n\t                if ((bitField & 33554432) !== 0) {\n\t                    receiver._promiseFulfilled(value, promise);\n\t                } else {\n\t                    receiver._promiseRejected(value, promise);\n\t                }\n\t            }\n\t        } else if (isPromise) {\n\t            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n\t            if ((bitField & 33554432) !== 0) {\n\t                promise._fulfill(value);\n\t            } else {\n\t                promise._reject(value);\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.prototype._settlePromiseLateCancellationObserver = function (ctx) {\n\t        var handler = ctx.handler;\n\t        var promise = ctx.promise;\n\t        var receiver = ctx.receiver;\n\t        var value = ctx.value;\n\t        if (typeof handler === \"function\") {\n\t            if (!(promise instanceof Promise)) {\n\t                handler.call(receiver, value, promise);\n\t            } else {\n\t                this._settlePromiseFromHandler(handler, receiver, value, promise);\n\t            }\n\t        } else if (promise instanceof Promise) {\n\t            promise._reject(value);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._settlePromiseCtx = function (ctx) {\n\t        this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n\t    };\n\t\n\t    Promise.prototype._settlePromise0 = function (handler, value, bitField) {\n\t        var promise = this._promise0;\n\t        var receiver = this._receiverAt(0);\n\t        this._promise0 = undefined;\n\t        this._receiver0 = undefined;\n\t        this._settlePromise(promise, handler, receiver, value);\n\t    };\n\t\n\t    Promise.prototype._clearCallbackDataAtIndex = function (index) {\n\t        var base = index * 4 - 4;\n\t        this[base + 2] = this[base + 3] = this[base + 0] = this[base + 1] = undefined;\n\t    };\n\t\n\t    Promise.prototype._fulfill = function (value) {\n\t        var bitField = this._bitField;\n\t        if ((bitField & 117506048) >>> 16) return;\n\t        if (value === this) {\n\t            var err = makeSelfResolutionError();\n\t            this._attachExtraTrace(err);\n\t            return this._reject(err);\n\t        }\n\t        this._setFulfilled();\n\t        this._rejectionHandler0 = value;\n\t\n\t        if ((bitField & 65535) > 0) {\n\t            if ((bitField & 134217728) !== 0) {\n\t                this._settlePromises();\n\t            } else {\n\t                async.settlePromises(this);\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.prototype._reject = function (reason) {\n\t        var bitField = this._bitField;\n\t        if ((bitField & 117506048) >>> 16) return;\n\t        this._setRejected();\n\t        this._fulfillmentHandler0 = reason;\n\t\n\t        if (this._isFinal()) {\n\t            return async.fatalError(reason, util.isNode);\n\t        }\n\t\n\t        if ((bitField & 65535) > 0) {\n\t            async.settlePromises(this);\n\t        } else {\n\t            this._ensurePossibleRejectionHandled();\n\t        }\n\t    };\n\t\n\t    Promise.prototype._fulfillPromises = function (len, value) {\n\t        for (var i = 1; i < len; i++) {\n\t            var handler = this._fulfillmentHandlerAt(i);\n\t            var promise = this._promiseAt(i);\n\t            var receiver = this._receiverAt(i);\n\t            this._clearCallbackDataAtIndex(i);\n\t            this._settlePromise(promise, handler, receiver, value);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._rejectPromises = function (len, reason) {\n\t        for (var i = 1; i < len; i++) {\n\t            var handler = this._rejectionHandlerAt(i);\n\t            var promise = this._promiseAt(i);\n\t            var receiver = this._receiverAt(i);\n\t            this._clearCallbackDataAtIndex(i);\n\t            this._settlePromise(promise, handler, receiver, reason);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._settlePromises = function () {\n\t        var bitField = this._bitField;\n\t        var len = bitField & 65535;\n\t\n\t        if (len > 0) {\n\t            if ((bitField & 16842752) !== 0) {\n\t                var reason = this._fulfillmentHandler0;\n\t                this._settlePromise0(this._rejectionHandler0, reason, bitField);\n\t                this._rejectPromises(len, reason);\n\t            } else {\n\t                var value = this._rejectionHandler0;\n\t                this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n\t                this._fulfillPromises(len, value);\n\t            }\n\t            this._setLength(0);\n\t        }\n\t        this._clearCancellationData();\n\t    };\n\t\n\t    Promise.prototype._settledValue = function () {\n\t        var bitField = this._bitField;\n\t        if ((bitField & 33554432) !== 0) {\n\t            return this._rejectionHandler0;\n\t        } else if ((bitField & 16777216) !== 0) {\n\t            return this._fulfillmentHandler0;\n\t        }\n\t    };\n\t\n\t    function deferResolve(v) {\n\t        this.promise._resolveCallback(v);\n\t    }\n\t    function deferReject(v) {\n\t        this.promise._rejectCallback(v, false);\n\t    }\n\t\n\t    Promise.defer = Promise.pending = function () {\n\t        debug.deprecated(\"Promise.defer\", \"new Promise\");\n\t        var promise = new Promise(INTERNAL);\n\t        return {\n\t            promise: promise,\n\t            resolve: deferResolve,\n\t            reject: deferReject\n\t        };\n\t    };\n\t\n\t    util.notEnumerableProp(Promise, \"_makeSelfResolutionError\", makeSelfResolutionError);\n\t\n\t    __webpack_require__(20)(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug);\n\t    __webpack_require__(21)(Promise, INTERNAL, tryConvertToPromise, debug);\n\t    __webpack_require__(22)(Promise, PromiseArray, apiRejection, debug);\n\t    __webpack_require__(23)(Promise);\n\t    __webpack_require__(24)(Promise);\n\t    __webpack_require__(25)(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\n\t    Promise.Promise = Promise;\n\t    Promise.version = \"3.5.0\";\n\t    __webpack_require__(26)(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n\t    __webpack_require__(27)(Promise);\n\t    __webpack_require__(28)(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\n\t    __webpack_require__(29)(Promise, INTERNAL, debug);\n\t    __webpack_require__(30)(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\n\t    __webpack_require__(31)(Promise);\n\t    __webpack_require__(32)(Promise, INTERNAL);\n\t    __webpack_require__(33)(Promise, PromiseArray, tryConvertToPromise, apiRejection);\n\t    __webpack_require__(34)(Promise, INTERNAL, tryConvertToPromise, apiRejection);\n\t    __webpack_require__(35)(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\n\t    __webpack_require__(36)(Promise, PromiseArray, debug);\n\t    __webpack_require__(37)(Promise, PromiseArray, apiRejection);\n\t    __webpack_require__(38)(Promise, INTERNAL);\n\t    __webpack_require__(39)(Promise, INTERNAL);\n\t    __webpack_require__(40)(Promise);\n\t\n\t    util.toFastProperties(Promise);\n\t    util.toFastProperties(Promise.prototype);\n\t    function fillTypes(value) {\n\t        var p = new Promise(INTERNAL);\n\t        p._fulfillmentHandler0 = value;\n\t        p._rejectionHandler0 = value;\n\t        p._promise0 = value;\n\t        p._receiver0 = value;\n\t    }\n\t    // Complete slack tracking, opt out of field-type tracking and           \n\t    // stabilize map                                                         \n\t    fillTypes({ a: 1 });\n\t    fillTypes({ b: 2 });\n\t    fillTypes({ c: 3 });\n\t    fillTypes(1);\n\t    fillTypes(function () {});\n\t    fillTypes(undefined);\n\t    fillTypes(false);\n\t    fillTypes(new Promise(INTERNAL));\n\t    debug.setBounds(Async.firstLineError, util.lastLineError);\n\t    return Promise;\n\t};\n\n/***/ },\n/* 7 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar es5 = __webpack_require__(8);\n\tvar canEvaluate = typeof navigator == \"undefined\";\n\t\n\tvar errorObj = { e: {} };\n\tvar tryCatchTarget;\n\tvar globalObject = typeof self !== \"undefined\" ? self : typeof window !== \"undefined\" ? window : typeof global !== \"undefined\" ? global : undefined !== undefined ? undefined : null;\n\t\n\tfunction tryCatcher() {\n\t    try {\n\t        var target = tryCatchTarget;\n\t        tryCatchTarget = null;\n\t        return target.apply(this, arguments);\n\t    } catch (e) {\n\t        errorObj.e = e;\n\t        return errorObj;\n\t    }\n\t}\n\tfunction tryCatch(fn) {\n\t    tryCatchTarget = fn;\n\t    return tryCatcher;\n\t}\n\t\n\tvar inherits = function inherits(Child, Parent) {\n\t    var hasProp = {}.hasOwnProperty;\n\t\n\t    function T() {\n\t        this.constructor = Child;\n\t        this.constructor$ = Parent;\n\t        for (var propertyName in Parent.prototype) {\n\t            if (hasProp.call(Parent.prototype, propertyName) && propertyName.charAt(propertyName.length - 1) !== \"$\") {\n\t                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n\t            }\n\t        }\n\t    }\n\t    T.prototype = Parent.prototype;\n\t    Child.prototype = new T();\n\t    return Child.prototype;\n\t};\n\t\n\tfunction isPrimitive(val) {\n\t    return val == null || val === true || val === false || typeof val === \"string\" || typeof val === \"number\";\n\t}\n\t\n\tfunction isObject(value) {\n\t    return typeof value === \"function\" || (typeof value === \"undefined\" ? \"undefined\" : _typeof(value)) === \"object\" && value !== null;\n\t}\n\t\n\tfunction maybeWrapAsError(maybeError) {\n\t    if (!isPrimitive(maybeError)) return maybeError;\n\t\n\t    return new Error(safeToString(maybeError));\n\t}\n\t\n\tfunction withAppended(target, appendee) {\n\t    var len = target.length;\n\t    var ret = new Array(len + 1);\n\t    var i;\n\t    for (i = 0; i < len; ++i) {\n\t        ret[i] = target[i];\n\t    }\n\t    ret[i] = appendee;\n\t    return ret;\n\t}\n\t\n\tfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n\t    if (es5.isES5) {\n\t        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\t\n\t        if (desc != null) {\n\t            return desc.get == null && desc.set == null ? desc.value : defaultValue;\n\t        }\n\t    } else {\n\t        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n\t    }\n\t}\n\t\n\tfunction notEnumerableProp(obj, name, value) {\n\t    if (isPrimitive(obj)) return obj;\n\t    var descriptor = {\n\t        value: value,\n\t        configurable: true,\n\t        enumerable: false,\n\t        writable: true\n\t    };\n\t    es5.defineProperty(obj, name, descriptor);\n\t    return obj;\n\t}\n\t\n\tfunction thrower(r) {\n\t    throw r;\n\t}\n\t\n\tvar inheritedDataKeys = function () {\n\t    var excludedPrototypes = [Array.prototype, Object.prototype, Function.prototype];\n\t\n\t    var isExcludedProto = function isExcludedProto(val) {\n\t        for (var i = 0; i < excludedPrototypes.length; ++i) {\n\t            if (excludedPrototypes[i] === val) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t\n\t    if (es5.isES5) {\n\t        var getKeys = Object.getOwnPropertyNames;\n\t        return function (obj) {\n\t            var ret = [];\n\t            var visitedKeys = Object.create(null);\n\t            while (obj != null && !isExcludedProto(obj)) {\n\t                var keys;\n\t                try {\n\t                    keys = getKeys(obj);\n\t                } catch (e) {\n\t                    return ret;\n\t                }\n\t                for (var i = 0; i < keys.length; ++i) {\n\t                    var key = keys[i];\n\t                    if (visitedKeys[key]) continue;\n\t                    visitedKeys[key] = true;\n\t                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n\t                    if (desc != null && desc.get == null && desc.set == null) {\n\t                        ret.push(key);\n\t                    }\n\t                }\n\t                obj = es5.getPrototypeOf(obj);\n\t            }\n\t            return ret;\n\t        };\n\t    } else {\n\t        var hasProp = {}.hasOwnProperty;\n\t        return function (obj) {\n\t            if (isExcludedProto(obj)) return [];\n\t            var ret = [];\n\t\n\t            /*jshint forin:false */\n\t            enumeration: for (var key in obj) {\n\t                if (hasProp.call(obj, key)) {\n\t                    ret.push(key);\n\t                } else {\n\t                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n\t                        if (hasProp.call(excludedPrototypes[i], key)) {\n\t                            continue enumeration;\n\t                        }\n\t                    }\n\t                    ret.push(key);\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t    }\n\t}();\n\t\n\tvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\n\tfunction isClass(fn) {\n\t    try {\n\t        if (typeof fn === \"function\") {\n\t            var keys = es5.names(fn.prototype);\n\t\n\t            var hasMethods = es5.isES5 && keys.length > 1;\n\t            var hasMethodsOtherThanConstructor = keys.length > 0 && !(keys.length === 1 && keys[0] === \"constructor\");\n\t            var hasThisAssignmentAndStaticMethods = thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\t\n\t            if (hasMethods || hasMethodsOtherThanConstructor || hasThisAssignmentAndStaticMethods) {\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    } catch (e) {\n\t        return false;\n\t    }\n\t}\n\t\n\tfunction toFastProperties(obj) {\n\t    /*jshint -W027,-W055,-W031*/\n\t    function FakeConstructor() {}\n\t    FakeConstructor.prototype = obj;\n\t    var l = 8;\n\t    while (l--) {\n\t        new FakeConstructor();\n\t    }return obj;\n\t    eval(obj);\n\t}\n\t\n\tvar rident = /^[a-z$_][a-z$_0-9]*$/i;\n\tfunction isIdentifier(str) {\n\t    return rident.test(str);\n\t}\n\t\n\tfunction filledRange(count, prefix, suffix) {\n\t    var ret = new Array(count);\n\t    for (var i = 0; i < count; ++i) {\n\t        ret[i] = prefix + i + suffix;\n\t    }\n\t    return ret;\n\t}\n\t\n\tfunction safeToString(obj) {\n\t    try {\n\t        return obj + \"\";\n\t    } catch (e) {\n\t        return \"[no string representation]\";\n\t    }\n\t}\n\t\n\tfunction isError(obj) {\n\t    return obj !== null && (typeof obj === \"undefined\" ? \"undefined\" : _typeof(obj)) === \"object\" && typeof obj.message === \"string\" && typeof obj.name === \"string\";\n\t}\n\t\n\tfunction markAsOriginatingFromRejection(e) {\n\t    try {\n\t        notEnumerableProp(e, \"isOperational\", true);\n\t    } catch (ignore) {}\n\t}\n\t\n\tfunction originatesFromRejection(e) {\n\t    if (e == null) return false;\n\t    return e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError || e[\"isOperational\"] === true;\n\t}\n\t\n\tfunction canAttachTrace(obj) {\n\t    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n\t}\n\t\n\tvar ensureErrorObject = function () {\n\t    if (!(\"stack\" in new Error())) {\n\t        return function (value) {\n\t            if (canAttachTrace(value)) return value;\n\t            try {\n\t                throw new Error(safeToString(value));\n\t            } catch (err) {\n\t                return err;\n\t            }\n\t        };\n\t    } else {\n\t        return function (value) {\n\t            if (canAttachTrace(value)) return value;\n\t            return new Error(safeToString(value));\n\t        };\n\t    }\n\t}();\n\t\n\tfunction classString(obj) {\n\t    return {}.toString.call(obj);\n\t}\n\t\n\tfunction copyDescriptors(from, to, filter) {\n\t    var keys = es5.names(from);\n\t    for (var i = 0; i < keys.length; ++i) {\n\t        var key = keys[i];\n\t        if (filter(key)) {\n\t            try {\n\t                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n\t            } catch (ignore) {}\n\t        }\n\t    }\n\t}\n\t\n\tvar asArray = function asArray(v) {\n\t    if (es5.isArray(v)) {\n\t        return v;\n\t    }\n\t    return null;\n\t};\n\t\n\tif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n\t    var ArrayFrom = typeof Array.from === \"function\" ? function (v) {\n\t        return Array.from(v);\n\t    } : function (v) {\n\t        var ret = [];\n\t        var it = v[Symbol.iterator]();\n\t        var itResult;\n\t        while (!(itResult = it.next()).done) {\n\t            ret.push(itResult.value);\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    asArray = function asArray(v) {\n\t        if (es5.isArray(v)) {\n\t            return v;\n\t        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n\t            return ArrayFrom(v);\n\t        }\n\t        return null;\n\t    };\n\t}\n\t\n\tvar isNode = typeof process !== \"undefined\" && classString(process).toLowerCase() === \"[object process]\";\n\t\n\tvar hasEnvVariables = typeof process !== \"undefined\" && typeof process.env !== \"undefined\";\n\t\n\tfunction env(key) {\n\t    return hasEnvVariables ? process.env[key] : undefined;\n\t}\n\t\n\tfunction getNativePromise() {\n\t    if (typeof Promise === \"function\") {\n\t        try {\n\t            var promise = new Promise(function () {});\n\t            if ({}.toString.call(promise) === \"[object Promise]\") {\n\t                return Promise;\n\t            }\n\t        } catch (e) {}\n\t    }\n\t}\n\t\n\tfunction domainBind(self, cb) {\n\t    return self.bind(cb);\n\t}\n\t\n\tvar ret = {\n\t    isClass: isClass,\n\t    isIdentifier: isIdentifier,\n\t    inheritedDataKeys: inheritedDataKeys,\n\t    getDataPropertyOrDefault: getDataPropertyOrDefault,\n\t    thrower: thrower,\n\t    isArray: es5.isArray,\n\t    asArray: asArray,\n\t    notEnumerableProp: notEnumerableProp,\n\t    isPrimitive: isPrimitive,\n\t    isObject: isObject,\n\t    isError: isError,\n\t    canEvaluate: canEvaluate,\n\t    errorObj: errorObj,\n\t    tryCatch: tryCatch,\n\t    inherits: inherits,\n\t    withAppended: withAppended,\n\t    maybeWrapAsError: maybeWrapAsError,\n\t    toFastProperties: toFastProperties,\n\t    filledRange: filledRange,\n\t    toString: safeToString,\n\t    canAttachTrace: canAttachTrace,\n\t    ensureErrorObject: ensureErrorObject,\n\t    originatesFromRejection: originatesFromRejection,\n\t    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n\t    classString: classString,\n\t    copyDescriptors: copyDescriptors,\n\t    hasDevTools: typeof chrome !== \"undefined\" && chrome && typeof chrome.loadTimes === \"function\",\n\t    isNode: isNode,\n\t    hasEnvVariables: hasEnvVariables,\n\t    env: env,\n\t    global: globalObject,\n\t    getNativePromise: getNativePromise,\n\t    domainBind: domainBind\n\t};\n\tret.isRecentNode = ret.isNode && function () {\n\t    var version = process.versions.node.split(\".\").map(Number);\n\t    return version[0] === 0 && version[1] > 10 || version[0] > 0;\n\t}();\n\t\n\tif (ret.isNode) ret.toFastProperties(process);\n\t\n\ttry {\n\t    throw new Error();\n\t} catch (e) {\n\t    ret.lastLineError = e;\n\t}\n\tmodule.exports = ret;\n\n/***/ },\n/* 8 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tvar isES5 = function () {\n\t    \"use strict\";\n\t\n\t    return this === undefined;\n\t}();\n\t\n\tif (isES5) {\n\t    module.exports = {\n\t        freeze: Object.freeze,\n\t        defineProperty: Object.defineProperty,\n\t        getDescriptor: Object.getOwnPropertyDescriptor,\n\t        keys: Object.keys,\n\t        names: Object.getOwnPropertyNames,\n\t        getPrototypeOf: Object.getPrototypeOf,\n\t        isArray: Array.isArray,\n\t        isES5: isES5,\n\t        propertyIsWritable: function propertyIsWritable(obj, prop) {\n\t            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n\t            return !!(!descriptor || descriptor.writable || descriptor.set);\n\t        }\n\t    };\n\t} else {\n\t    var has = {}.hasOwnProperty;\n\t    var str = {}.toString;\n\t    var proto = {}.constructor.prototype;\n\t\n\t    var ObjectKeys = function ObjectKeys(o) {\n\t        var ret = [];\n\t        for (var key in o) {\n\t            if (has.call(o, key)) {\n\t                ret.push(key);\n\t            }\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    var ObjectGetDescriptor = function ObjectGetDescriptor(o, key) {\n\t        return { value: o[key] };\n\t    };\n\t\n\t    var ObjectDefineProperty = function ObjectDefineProperty(o, key, desc) {\n\t        o[key] = desc.value;\n\t        return o;\n\t    };\n\t\n\t    var ObjectFreeze = function ObjectFreeze(obj) {\n\t        return obj;\n\t    };\n\t\n\t    var ObjectGetPrototypeOf = function ObjectGetPrototypeOf(obj) {\n\t        try {\n\t            return Object(obj).constructor.prototype;\n\t        } catch (e) {\n\t            return proto;\n\t        }\n\t    };\n\t\n\t    var ArrayIsArray = function ArrayIsArray(obj) {\n\t        try {\n\t            return str.call(obj) === \"[object Array]\";\n\t        } catch (e) {\n\t            return false;\n\t        }\n\t    };\n\t\n\t    module.exports = {\n\t        isArray: ArrayIsArray,\n\t        keys: ObjectKeys,\n\t        names: ObjectKeys,\n\t        defineProperty: ObjectDefineProperty,\n\t        getDescriptor: ObjectGetDescriptor,\n\t        freeze: ObjectFreeze,\n\t        getPrototypeOf: ObjectGetPrototypeOf,\n\t        isES5: isES5,\n\t        propertyIsWritable: function propertyIsWritable() {\n\t            return true;\n\t        }\n\t    };\n\t}\n\n/***/ },\n/* 9 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar firstLineError;\n\ttry {\n\t    throw new Error();\n\t} catch (e) {\n\t    firstLineError = e;\n\t}\n\tvar schedule = __webpack_require__(10);\n\tvar Queue = __webpack_require__(11);\n\tvar util = __webpack_require__(7);\n\t\n\tfunction Async() {\n\t    this._customScheduler = false;\n\t    this._isTickUsed = false;\n\t    this._lateQueue = new Queue(16);\n\t    this._normalQueue = new Queue(16);\n\t    this._haveDrainedQueues = false;\n\t    this._trampolineEnabled = true;\n\t    var self = this;\n\t    this.drainQueues = function () {\n\t        self._drainQueues();\n\t    };\n\t    this._schedule = schedule;\n\t}\n\t\n\tAsync.prototype.setScheduler = function (fn) {\n\t    var prev = this._schedule;\n\t    this._schedule = fn;\n\t    this._customScheduler = true;\n\t    return prev;\n\t};\n\t\n\tAsync.prototype.hasCustomScheduler = function () {\n\t    return this._customScheduler;\n\t};\n\t\n\tAsync.prototype.enableTrampoline = function () {\n\t    this._trampolineEnabled = true;\n\t};\n\t\n\tAsync.prototype.disableTrampolineIfNecessary = function () {\n\t    if (util.hasDevTools) {\n\t        this._trampolineEnabled = false;\n\t    }\n\t};\n\t\n\tAsync.prototype.haveItemsQueued = function () {\n\t    return this._isTickUsed || this._haveDrainedQueues;\n\t};\n\t\n\tAsync.prototype.fatalError = function (e, isNode) {\n\t    if (isNode) {\n\t        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) + \"\\n\");\n\t        process.exit(2);\n\t    } else {\n\t        this.throwLater(e);\n\t    }\n\t};\n\t\n\tAsync.prototype.throwLater = function (fn, arg) {\n\t    if (arguments.length === 1) {\n\t        arg = fn;\n\t        fn = function fn() {\n\t            throw arg;\n\t        };\n\t    }\n\t    if (typeof setTimeout !== \"undefined\") {\n\t        setTimeout(function () {\n\t            fn(arg);\n\t        }, 0);\n\t    } else try {\n\t        this._schedule(function () {\n\t            fn(arg);\n\t        });\n\t    } catch (e) {\n\t        throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t    }\n\t};\n\t\n\tfunction AsyncInvokeLater(fn, receiver, arg) {\n\t    this._lateQueue.push(fn, receiver, arg);\n\t    this._queueTick();\n\t}\n\t\n\tfunction AsyncInvoke(fn, receiver, arg) {\n\t    this._normalQueue.push(fn, receiver, arg);\n\t    this._queueTick();\n\t}\n\t\n\tfunction AsyncSettlePromises(promise) {\n\t    this._normalQueue._pushOne(promise);\n\t    this._queueTick();\n\t}\n\t\n\tif (!util.hasDevTools) {\n\t    Async.prototype.invokeLater = AsyncInvokeLater;\n\t    Async.prototype.invoke = AsyncInvoke;\n\t    Async.prototype.settlePromises = AsyncSettlePromises;\n\t} else {\n\t    Async.prototype.invokeLater = function (fn, receiver, arg) {\n\t        if (this._trampolineEnabled) {\n\t            AsyncInvokeLater.call(this, fn, receiver, arg);\n\t        } else {\n\t            this._schedule(function () {\n\t                setTimeout(function () {\n\t                    fn.call(receiver, arg);\n\t                }, 100);\n\t            });\n\t        }\n\t    };\n\t\n\t    Async.prototype.invoke = function (fn, receiver, arg) {\n\t        if (this._trampolineEnabled) {\n\t            AsyncInvoke.call(this, fn, receiver, arg);\n\t        } else {\n\t            this._schedule(function () {\n\t                fn.call(receiver, arg);\n\t            });\n\t        }\n\t    };\n\t\n\t    Async.prototype.settlePromises = function (promise) {\n\t        if (this._trampolineEnabled) {\n\t            AsyncSettlePromises.call(this, promise);\n\t        } else {\n\t            this._schedule(function () {\n\t                promise._settlePromises();\n\t            });\n\t        }\n\t    };\n\t}\n\t\n\tAsync.prototype._drainQueue = function (queue) {\n\t    while (queue.length() > 0) {\n\t        var fn = queue.shift();\n\t        if (typeof fn !== \"function\") {\n\t            fn._settlePromises();\n\t            continue;\n\t        }\n\t        var receiver = queue.shift();\n\t        var arg = queue.shift();\n\t        fn.call(receiver, arg);\n\t    }\n\t};\n\t\n\tAsync.prototype._drainQueues = function () {\n\t    this._drainQueue(this._normalQueue);\n\t    this._reset();\n\t    this._haveDrainedQueues = true;\n\t    this._drainQueue(this._lateQueue);\n\t};\n\t\n\tAsync.prototype._queueTick = function () {\n\t    if (!this._isTickUsed) {\n\t        this._isTickUsed = true;\n\t        this._schedule(this.drainQueues);\n\t    }\n\t};\n\t\n\tAsync.prototype._reset = function () {\n\t    this._isTickUsed = false;\n\t};\n\t\n\tmodule.exports = Async;\n\tmodule.exports.firstLineError = firstLineError;\n\n/***/ },\n/* 10 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar util = __webpack_require__(7);\n\tvar schedule;\n\tvar noAsyncScheduler = function noAsyncScheduler() {\n\t    throw new Error(\"No async scheduler available\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t};\n\tvar NativePromise = util.getNativePromise();\n\tif (util.isNode && typeof MutationObserver === \"undefined\") {\n\t    var GlobalSetImmediate = global.setImmediate;\n\t    var ProcessNextTick = process.nextTick;\n\t    schedule = util.isRecentNode ? function (fn) {\n\t        GlobalSetImmediate.call(global, fn);\n\t    } : function (fn) {\n\t        ProcessNextTick.call(process, fn);\n\t    };\n\t} else if (typeof NativePromise === \"function\" && typeof NativePromise.resolve === \"function\") {\n\t    var nativePromise = NativePromise.resolve();\n\t    schedule = function schedule(fn) {\n\t        nativePromise.then(fn);\n\t    };\n\t} else if (typeof MutationObserver !== \"undefined\" && !(typeof window !== \"undefined\" && window.navigator && (window.navigator.standalone || window.cordova))) {\n\t    schedule = function () {\n\t        var div = document.createElement(\"div\");\n\t        var opts = { attributes: true };\n\t        var toggleScheduled = false;\n\t        var div2 = document.createElement(\"div\");\n\t        var o2 = new MutationObserver(function () {\n\t            div.classList.toggle(\"foo\");\n\t            toggleScheduled = false;\n\t        });\n\t        o2.observe(div2, opts);\n\t\n\t        var scheduleToggle = function scheduleToggle() {\n\t            if (toggleScheduled) return;\n\t            toggleScheduled = true;\n\t            div2.classList.toggle(\"foo\");\n\t        };\n\t\n\t        return function schedule(fn) {\n\t            var o = new MutationObserver(function () {\n\t                o.disconnect();\n\t                fn();\n\t            });\n\t            o.observe(div, opts);\n\t            scheduleToggle();\n\t        };\n\t    }();\n\t} else if (typeof setImmediate !== \"undefined\") {\n\t    schedule = function schedule(fn) {\n\t        setImmediate(fn);\n\t    };\n\t} else if (typeof setTimeout !== \"undefined\") {\n\t    schedule = function schedule(fn) {\n\t        setTimeout(fn, 0);\n\t    };\n\t} else {\n\t    schedule = noAsyncScheduler;\n\t}\n\tmodule.exports = schedule;\n\n/***/ },\n/* 11 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n\t    for (var j = 0; j < len; ++j) {\n\t        dst[j + dstIndex] = src[j + srcIndex];\n\t        src[j + srcIndex] = void 0;\n\t    }\n\t}\n\t\n\tfunction Queue(capacity) {\n\t    this._capacity = capacity;\n\t    this._length = 0;\n\t    this._front = 0;\n\t}\n\t\n\tQueue.prototype._willBeOverCapacity = function (size) {\n\t    return this._capacity < size;\n\t};\n\t\n\tQueue.prototype._pushOne = function (arg) {\n\t    var length = this.length();\n\t    this._checkCapacity(length + 1);\n\t    var i = this._front + length & this._capacity - 1;\n\t    this[i] = arg;\n\t    this._length = length + 1;\n\t};\n\t\n\tQueue.prototype.push = function (fn, receiver, arg) {\n\t    var length = this.length() + 3;\n\t    if (this._willBeOverCapacity(length)) {\n\t        this._pushOne(fn);\n\t        this._pushOne(receiver);\n\t        this._pushOne(arg);\n\t        return;\n\t    }\n\t    var j = this._front + length - 3;\n\t    this._checkCapacity(length);\n\t    var wrapMask = this._capacity - 1;\n\t    this[j + 0 & wrapMask] = fn;\n\t    this[j + 1 & wrapMask] = receiver;\n\t    this[j + 2 & wrapMask] = arg;\n\t    this._length = length;\n\t};\n\t\n\tQueue.prototype.shift = function () {\n\t    var front = this._front,\n\t        ret = this[front];\n\t\n\t    this[front] = undefined;\n\t    this._front = front + 1 & this._capacity - 1;\n\t    this._length--;\n\t    return ret;\n\t};\n\t\n\tQueue.prototype.length = function () {\n\t    return this._length;\n\t};\n\t\n\tQueue.prototype._checkCapacity = function (size) {\n\t    if (this._capacity < size) {\n\t        this._resizeTo(this._capacity << 1);\n\t    }\n\t};\n\t\n\tQueue.prototype._resizeTo = function (capacity) {\n\t    var oldCapacity = this._capacity;\n\t    this._capacity = capacity;\n\t    var front = this._front;\n\t    var length = this._length;\n\t    var moveItemsCount = front + length & oldCapacity - 1;\n\t    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n\t};\n\t\n\tmodule.exports = Queue;\n\n/***/ },\n/* 12 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar es5 = __webpack_require__(8);\n\tvar Objectfreeze = es5.freeze;\n\tvar util = __webpack_require__(7);\n\tvar inherits = util.inherits;\n\tvar notEnumerableProp = util.notEnumerableProp;\n\t\n\tfunction subError(nameProperty, defaultMessage) {\n\t    function SubError(message) {\n\t        if (!(this instanceof SubError)) return new SubError(message);\n\t        notEnumerableProp(this, \"message\", typeof message === \"string\" ? message : defaultMessage);\n\t        notEnumerableProp(this, \"name\", nameProperty);\n\t        if (Error.captureStackTrace) {\n\t            Error.captureStackTrace(this, this.constructor);\n\t        } else {\n\t            Error.call(this);\n\t        }\n\t    }\n\t    inherits(SubError, Error);\n\t    return SubError;\n\t}\n\t\n\tvar _TypeError, _RangeError;\n\tvar Warning = subError(\"Warning\", \"warning\");\n\tvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\n\tvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\n\tvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\n\ttry {\n\t    _TypeError = TypeError;\n\t    _RangeError = RangeError;\n\t} catch (e) {\n\t    _TypeError = subError(\"TypeError\", \"type error\");\n\t    _RangeError = subError(\"RangeError\", \"range error\");\n\t}\n\t\n\tvar methods = (\"join pop push shift unshift slice filter forEach some \" + \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\t\n\tfor (var i = 0; i < methods.length; ++i) {\n\t    if (typeof Array.prototype[methods[i]] === \"function\") {\n\t        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n\t    }\n\t}\n\t\n\tes5.defineProperty(AggregateError.prototype, \"length\", {\n\t    value: 0,\n\t    configurable: false,\n\t    writable: true,\n\t    enumerable: true\n\t});\n\tAggregateError.prototype[\"isOperational\"] = true;\n\tvar level = 0;\n\tAggregateError.prototype.toString = function () {\n\t    var indent = Array(level * 4 + 1).join(\" \");\n\t    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n\t    level++;\n\t    indent = Array(level * 4 + 1).join(\" \");\n\t    for (var i = 0; i < this.length; ++i) {\n\t        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n\t        var lines = str.split(\"\\n\");\n\t        for (var j = 0; j < lines.length; ++j) {\n\t            lines[j] = indent + lines[j];\n\t        }\n\t        str = lines.join(\"\\n\");\n\t        ret += str + \"\\n\";\n\t    }\n\t    level--;\n\t    return ret;\n\t};\n\t\n\tfunction OperationalError(message) {\n\t    if (!(this instanceof OperationalError)) return new OperationalError(message);\n\t    notEnumerableProp(this, \"name\", \"OperationalError\");\n\t    notEnumerableProp(this, \"message\", message);\n\t    this.cause = message;\n\t    this[\"isOperational\"] = true;\n\t\n\t    if (message instanceof Error) {\n\t        notEnumerableProp(this, \"message\", message.message);\n\t        notEnumerableProp(this, \"stack\", message.stack);\n\t    } else if (Error.captureStackTrace) {\n\t        Error.captureStackTrace(this, this.constructor);\n\t    }\n\t}\n\tinherits(OperationalError, Error);\n\t\n\tvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\n\tif (!errorTypes) {\n\t    errorTypes = Objectfreeze({\n\t        CancellationError: CancellationError,\n\t        TimeoutError: TimeoutError,\n\t        OperationalError: OperationalError,\n\t        RejectionError: OperationalError,\n\t        AggregateError: AggregateError\n\t    });\n\t    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n\t        value: errorTypes,\n\t        writable: false,\n\t        enumerable: false,\n\t        configurable: false\n\t    });\n\t}\n\t\n\tmodule.exports = {\n\t    Error: Error,\n\t    TypeError: _TypeError,\n\t    RangeError: _RangeError,\n\t    CancellationError: errorTypes.CancellationError,\n\t    OperationalError: errorTypes.OperationalError,\n\t    TimeoutError: errorTypes.TimeoutError,\n\t    AggregateError: errorTypes.AggregateError,\n\t    Warning: Warning\n\t};\n\n/***/ },\n/* 13 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL) {\n\t    var util = __webpack_require__(7);\n\t    var errorObj = util.errorObj;\n\t    var isObject = util.isObject;\n\t\n\t    function tryConvertToPromise(obj, context) {\n\t        if (isObject(obj)) {\n\t            if (obj instanceof Promise) return obj;\n\t            var then = getThen(obj);\n\t            if (then === errorObj) {\n\t                if (context) context._pushContext();\n\t                var ret = Promise.reject(then.e);\n\t                if (context) context._popContext();\n\t                return ret;\n\t            } else if (typeof then === \"function\") {\n\t                if (isAnyBluebirdPromise(obj)) {\n\t                    var ret = new Promise(INTERNAL);\n\t                    obj._then(ret._fulfill, ret._reject, undefined, ret, null);\n\t                    return ret;\n\t                }\n\t                return doThenable(obj, then, context);\n\t            }\n\t        }\n\t        return obj;\n\t    }\n\t\n\t    function doGetThen(obj) {\n\t        return obj.then;\n\t    }\n\t\n\t    function getThen(obj) {\n\t        try {\n\t            return doGetThen(obj);\n\t        } catch (e) {\n\t            errorObj.e = e;\n\t            return errorObj;\n\t        }\n\t    }\n\t\n\t    var hasProp = {}.hasOwnProperty;\n\t    function isAnyBluebirdPromise(obj) {\n\t        try {\n\t            return hasProp.call(obj, \"_promise0\");\n\t        } catch (e) {\n\t            return false;\n\t        }\n\t    }\n\t\n\t    function doThenable(x, then, context) {\n\t        var promise = new Promise(INTERNAL);\n\t        var ret = promise;\n\t        if (context) context._pushContext();\n\t        promise._captureStackTrace();\n\t        if (context) context._popContext();\n\t        var synchronous = true;\n\t        var result = util.tryCatch(then).call(x, resolve, reject);\n\t        synchronous = false;\n\t\n\t        if (promise && result === errorObj) {\n\t            promise._rejectCallback(result.e, true, true);\n\t            promise = null;\n\t        }\n\t\n\t        function resolve(value) {\n\t            if (!promise) return;\n\t            promise._resolveCallback(value);\n\t            promise = null;\n\t        }\n\t\n\t        function reject(reason) {\n\t            if (!promise) return;\n\t            promise._rejectCallback(reason, synchronous, true);\n\t            promise = null;\n\t        }\n\t        return ret;\n\t    }\n\t\n\t    return tryConvertToPromise;\n\t};\n\n/***/ },\n/* 14 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, Proxyable) {\n\t    var util = __webpack_require__(7);\n\t    var isArray = util.isArray;\n\t\n\t    function toResolutionValue(val) {\n\t        switch (val) {\n\t            case -2:\n\t                return [];\n\t            case -3:\n\t                return {};\n\t            case -6:\n\t                return new Map();\n\t        }\n\t    }\n\t\n\t    function PromiseArray(values) {\n\t        var promise = this._promise = new Promise(INTERNAL);\n\t        if (values instanceof Promise) {\n\t            promise._propagateFrom(values, 3);\n\t        }\n\t        promise._setOnCancel(this);\n\t        this._values = values;\n\t        this._length = 0;\n\t        this._totalResolved = 0;\n\t        this._init(undefined, -2);\n\t    }\n\t    util.inherits(PromiseArray, Proxyable);\n\t\n\t    PromiseArray.prototype.length = function () {\n\t        return this._length;\n\t    };\n\t\n\t    PromiseArray.prototype.promise = function () {\n\t        return this._promise;\n\t    };\n\t\n\t    PromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n\t        var values = tryConvertToPromise(this._values, this._promise);\n\t        if (values instanceof Promise) {\n\t            values = values._target();\n\t            var bitField = values._bitField;\n\t            ;\n\t            this._values = values;\n\t\n\t            if ((bitField & 50397184) === 0) {\n\t                this._promise._setAsyncGuaranteed();\n\t                return values._then(init, this._reject, undefined, this, resolveValueIfEmpty);\n\t            } else if ((bitField & 33554432) !== 0) {\n\t                values = values._value();\n\t            } else if ((bitField & 16777216) !== 0) {\n\t                return this._reject(values._reason());\n\t            } else {\n\t                return this._cancel();\n\t            }\n\t        }\n\t        values = util.asArray(values);\n\t        if (values === null) {\n\t            var err = apiRejection(\"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n\t            this._promise._rejectCallback(err, false);\n\t            return;\n\t        }\n\t\n\t        if (values.length === 0) {\n\t            if (resolveValueIfEmpty === -5) {\n\t                this._resolveEmptyArray();\n\t            } else {\n\t                this._resolve(toResolutionValue(resolveValueIfEmpty));\n\t            }\n\t            return;\n\t        }\n\t        this._iterate(values);\n\t    };\n\t\n\t    PromiseArray.prototype._iterate = function (values) {\n\t        var len = this.getActualLength(values.length);\n\t        this._length = len;\n\t        this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n\t        var result = this._promise;\n\t        var isResolved = false;\n\t        var bitField = null;\n\t        for (var i = 0; i < len; ++i) {\n\t            var maybePromise = tryConvertToPromise(values[i], result);\n\t\n\t            if (maybePromise instanceof Promise) {\n\t                maybePromise = maybePromise._target();\n\t                bitField = maybePromise._bitField;\n\t            } else {\n\t                bitField = null;\n\t            }\n\t\n\t            if (isResolved) {\n\t                if (bitField !== null) {\n\t                    maybePromise.suppressUnhandledRejections();\n\t                }\n\t            } else if (bitField !== null) {\n\t                if ((bitField & 50397184) === 0) {\n\t                    maybePromise._proxy(this, i);\n\t                    this._values[i] = maybePromise;\n\t                } else if ((bitField & 33554432) !== 0) {\n\t                    isResolved = this._promiseFulfilled(maybePromise._value(), i);\n\t                } else if ((bitField & 16777216) !== 0) {\n\t                    isResolved = this._promiseRejected(maybePromise._reason(), i);\n\t                } else {\n\t                    isResolved = this._promiseCancelled(i);\n\t                }\n\t            } else {\n\t                isResolved = this._promiseFulfilled(maybePromise, i);\n\t            }\n\t        }\n\t        if (!isResolved) result._setAsyncGuaranteed();\n\t    };\n\t\n\t    PromiseArray.prototype._isResolved = function () {\n\t        return this._values === null;\n\t    };\n\t\n\t    PromiseArray.prototype._resolve = function (value) {\n\t        this._values = null;\n\t        this._promise._fulfill(value);\n\t    };\n\t\n\t    PromiseArray.prototype._cancel = function () {\n\t        if (this._isResolved() || !this._promise._isCancellable()) return;\n\t        this._values = null;\n\t        this._promise._cancel();\n\t    };\n\t\n\t    PromiseArray.prototype._reject = function (reason) {\n\t        this._values = null;\n\t        this._promise._rejectCallback(reason, false);\n\t    };\n\t\n\t    PromiseArray.prototype._promiseFulfilled = function (value, index) {\n\t        this._values[index] = value;\n\t        var totalResolved = ++this._totalResolved;\n\t        if (totalResolved >= this._length) {\n\t            this._resolve(this._values);\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t\n\t    PromiseArray.prototype._promiseCancelled = function () {\n\t        this._cancel();\n\t        return true;\n\t    };\n\t\n\t    PromiseArray.prototype._promiseRejected = function (reason) {\n\t        this._totalResolved++;\n\t        this._reject(reason);\n\t        return true;\n\t    };\n\t\n\t    PromiseArray.prototype._resultCancelled = function () {\n\t        if (this._isResolved()) return;\n\t        var values = this._values;\n\t        this._cancel();\n\t        if (values instanceof Promise) {\n\t            values.cancel();\n\t        } else {\n\t            for (var i = 0; i < values.length; ++i) {\n\t                if (values[i] instanceof Promise) {\n\t                    values[i].cancel();\n\t                }\n\t            }\n\t        }\n\t    };\n\t\n\t    PromiseArray.prototype.shouldCopyValues = function () {\n\t        return true;\n\t    };\n\t\n\t    PromiseArray.prototype.getActualLength = function (len) {\n\t        return len;\n\t    };\n\t\n\t    return PromiseArray;\n\t};\n\n/***/ },\n/* 15 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise) {\n\t    var longStackTraces = false;\n\t    var contextStack = [];\n\t\n\t    Promise.prototype._promiseCreated = function () {};\n\t    Promise.prototype._pushContext = function () {};\n\t    Promise.prototype._popContext = function () {\n\t        return null;\n\t    };\n\t    Promise._peekContext = Promise.prototype._peekContext = function () {};\n\t\n\t    function Context() {\n\t        this._trace = new Context.CapturedTrace(peekContext());\n\t    }\n\t    Context.prototype._pushContext = function () {\n\t        if (this._trace !== undefined) {\n\t            this._trace._promiseCreated = null;\n\t            contextStack.push(this._trace);\n\t        }\n\t    };\n\t\n\t    Context.prototype._popContext = function () {\n\t        if (this._trace !== undefined) {\n\t            var trace = contextStack.pop();\n\t            var ret = trace._promiseCreated;\n\t            trace._promiseCreated = null;\n\t            return ret;\n\t        }\n\t        return null;\n\t    };\n\t\n\t    function createContext() {\n\t        if (longStackTraces) return new Context();\n\t    }\n\t\n\t    function peekContext() {\n\t        var lastIndex = contextStack.length - 1;\n\t        if (lastIndex >= 0) {\n\t            return contextStack[lastIndex];\n\t        }\n\t        return undefined;\n\t    }\n\t    Context.CapturedTrace = null;\n\t    Context.create = createContext;\n\t    Context.deactivateLongStackTraces = function () {};\n\t    Context.activateLongStackTraces = function () {\n\t        var Promise_pushContext = Promise.prototype._pushContext;\n\t        var Promise_popContext = Promise.prototype._popContext;\n\t        var Promise_PeekContext = Promise._peekContext;\n\t        var Promise_peekContext = Promise.prototype._peekContext;\n\t        var Promise_promiseCreated = Promise.prototype._promiseCreated;\n\t        Context.deactivateLongStackTraces = function () {\n\t            Promise.prototype._pushContext = Promise_pushContext;\n\t            Promise.prototype._popContext = Promise_popContext;\n\t            Promise._peekContext = Promise_PeekContext;\n\t            Promise.prototype._peekContext = Promise_peekContext;\n\t            Promise.prototype._promiseCreated = Promise_promiseCreated;\n\t            longStackTraces = false;\n\t        };\n\t        longStackTraces = true;\n\t        Promise.prototype._pushContext = Context.prototype._pushContext;\n\t        Promise.prototype._popContext = Context.prototype._popContext;\n\t        Promise._peekContext = Promise.prototype._peekContext = peekContext;\n\t        Promise.prototype._promiseCreated = function () {\n\t            var ctx = this._peekContext();\n\t            if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n\t        };\n\t    };\n\t    return Context;\n\t};\n\n/***/ },\n/* 16 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tmodule.exports = function (Promise, Context) {\n\t    var getDomain = Promise._getDomain;\n\t    var async = Promise._async;\n\t    var Warning = __webpack_require__(12).Warning;\n\t    var util = __webpack_require__(7);\n\t    var canAttachTrace = util.canAttachTrace;\n\t    var unhandledRejectionHandled;\n\t    var possiblyUnhandledRejection;\n\t    var bluebirdFramePattern = /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\n\t    var nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\n\t    var parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\n\t    var stackFramePattern = null;\n\t    var formatStack = null;\n\t    var indentStackFrames = false;\n\t    var printWarning;\n\t    var debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 && (false || util.env(\"BLUEBIRD_DEBUG\") || util.env(\"NODE_ENV\") === \"development\"));\n\t\n\t    var warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 && (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\t\n\t    var longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 && (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\t\n\t    var wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 && (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\t\n\t    Promise.prototype.suppressUnhandledRejections = function () {\n\t        var target = this._target();\n\t        target._bitField = target._bitField & ~1048576 | 524288;\n\t    };\n\t\n\t    Promise.prototype._ensurePossibleRejectionHandled = function () {\n\t        if ((this._bitField & 524288) !== 0) return;\n\t        this._setRejectionIsUnhandled();\n\t        async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n\t    };\n\t\n\t    Promise.prototype._notifyUnhandledRejectionIsHandled = function () {\n\t        fireRejectionEvent(\"rejectionHandled\", unhandledRejectionHandled, undefined, this);\n\t    };\n\t\n\t    Promise.prototype._setReturnedNonUndefined = function () {\n\t        this._bitField = this._bitField | 268435456;\n\t    };\n\t\n\t    Promise.prototype._returnedNonUndefined = function () {\n\t        return (this._bitField & 268435456) !== 0;\n\t    };\n\t\n\t    Promise.prototype._notifyUnhandledRejection = function () {\n\t        if (this._isRejectionUnhandled()) {\n\t            var reason = this._settledValue();\n\t            this._setUnhandledRejectionIsNotified();\n\t            fireRejectionEvent(\"unhandledRejection\", possiblyUnhandledRejection, reason, this);\n\t        }\n\t    };\n\t\n\t    Promise.prototype._setUnhandledRejectionIsNotified = function () {\n\t        this._bitField = this._bitField | 262144;\n\t    };\n\t\n\t    Promise.prototype._unsetUnhandledRejectionIsNotified = function () {\n\t        this._bitField = this._bitField & ~262144;\n\t    };\n\t\n\t    Promise.prototype._isUnhandledRejectionNotified = function () {\n\t        return (this._bitField & 262144) > 0;\n\t    };\n\t\n\t    Promise.prototype._setRejectionIsUnhandled = function () {\n\t        this._bitField = this._bitField | 1048576;\n\t    };\n\t\n\t    Promise.prototype._unsetRejectionIsUnhandled = function () {\n\t        this._bitField = this._bitField & ~1048576;\n\t        if (this._isUnhandledRejectionNotified()) {\n\t            this._unsetUnhandledRejectionIsNotified();\n\t            this._notifyUnhandledRejectionIsHandled();\n\t        }\n\t    };\n\t\n\t    Promise.prototype._isRejectionUnhandled = function () {\n\t        return (this._bitField & 1048576) > 0;\n\t    };\n\t\n\t    Promise.prototype._warn = function (message, shouldUseOwnTrace, promise) {\n\t        return warn(message, shouldUseOwnTrace, promise || this);\n\t    };\n\t\n\t    Promise.onPossiblyUnhandledRejection = function (fn) {\n\t        var domain = getDomain();\n\t        possiblyUnhandledRejection = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n\t    };\n\t\n\t    Promise.onUnhandledRejectionHandled = function (fn) {\n\t        var domain = getDomain();\n\t        unhandledRejectionHandled = typeof fn === \"function\" ? domain === null ? fn : util.domainBind(domain, fn) : undefined;\n\t    };\n\t\n\t    var disableLongStackTraces = function disableLongStackTraces() {};\n\t    Promise.longStackTraces = function () {\n\t        if (async.haveItemsQueued() && !config.longStackTraces) {\n\t            throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        if (!config.longStackTraces && longStackTracesIsSupported()) {\n\t            var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n\t            var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n\t            config.longStackTraces = true;\n\t            disableLongStackTraces = function disableLongStackTraces() {\n\t                if (async.haveItemsQueued() && !config.longStackTraces) {\n\t                    throw new Error(\"cannot enable long stack traces after promises have been created\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t                }\n\t                Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n\t                Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n\t                Context.deactivateLongStackTraces();\n\t                async.enableTrampoline();\n\t                config.longStackTraces = false;\n\t            };\n\t            Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n\t            Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n\t            Context.activateLongStackTraces();\n\t            async.disableTrampolineIfNecessary();\n\t        }\n\t    };\n\t\n\t    Promise.hasLongStackTraces = function () {\n\t        return config.longStackTraces && longStackTracesIsSupported();\n\t    };\n\t\n\t    var fireDomEvent = function () {\n\t        try {\n\t            if (typeof CustomEvent === \"function\") {\n\t                var event = new CustomEvent(\"CustomEvent\");\n\t                util.global.dispatchEvent(event);\n\t                return function (name, event) {\n\t                    var domEvent = new CustomEvent(name.toLowerCase(), {\n\t                        detail: event,\n\t                        cancelable: true\n\t                    });\n\t                    return !util.global.dispatchEvent(domEvent);\n\t                };\n\t            } else if (typeof Event === \"function\") {\n\t                var event = new Event(\"CustomEvent\");\n\t                util.global.dispatchEvent(event);\n\t                return function (name, event) {\n\t                    var domEvent = new Event(name.toLowerCase(), {\n\t                        cancelable: true\n\t                    });\n\t                    domEvent.detail = event;\n\t                    return !util.global.dispatchEvent(domEvent);\n\t                };\n\t            } else {\n\t                var event = document.createEvent(\"CustomEvent\");\n\t                event.initCustomEvent(\"testingtheevent\", false, true, {});\n\t                util.global.dispatchEvent(event);\n\t                return function (name, event) {\n\t                    var domEvent = document.createEvent(\"CustomEvent\");\n\t                    domEvent.initCustomEvent(name.toLowerCase(), false, true, event);\n\t                    return !util.global.dispatchEvent(domEvent);\n\t                };\n\t            }\n\t        } catch (e) {}\n\t        return function () {\n\t            return false;\n\t        };\n\t    }();\n\t\n\t    var fireGlobalEvent = function () {\n\t        if (util.isNode) {\n\t            return function () {\n\t                return process.emit.apply(process, arguments);\n\t            };\n\t        } else {\n\t            if (!util.global) {\n\t                return function () {\n\t                    return false;\n\t                };\n\t            }\n\t            return function (name) {\n\t                var methodName = \"on\" + name.toLowerCase();\n\t                var method = util.global[methodName];\n\t                if (!method) return false;\n\t                method.apply(util.global, [].slice.call(arguments, 1));\n\t                return true;\n\t            };\n\t        }\n\t    }();\n\t\n\t    function generatePromiseLifecycleEventObject(name, promise) {\n\t        return { promise: promise };\n\t    }\n\t\n\t    var eventToObjectGenerator = {\n\t        promiseCreated: generatePromiseLifecycleEventObject,\n\t        promiseFulfilled: generatePromiseLifecycleEventObject,\n\t        promiseRejected: generatePromiseLifecycleEventObject,\n\t        promiseResolved: generatePromiseLifecycleEventObject,\n\t        promiseCancelled: generatePromiseLifecycleEventObject,\n\t        promiseChained: function promiseChained(name, promise, child) {\n\t            return { promise: promise, child: child };\n\t        },\n\t        warning: function warning(name, _warning) {\n\t            return { warning: _warning };\n\t        },\n\t        unhandledRejection: function unhandledRejection(name, reason, promise) {\n\t            return { reason: reason, promise: promise };\n\t        },\n\t        rejectionHandled: generatePromiseLifecycleEventObject\n\t    };\n\t\n\t    var activeFireEvent = function activeFireEvent(name) {\n\t        var globalEventFired = false;\n\t        try {\n\t            globalEventFired = fireGlobalEvent.apply(null, arguments);\n\t        } catch (e) {\n\t            async.throwLater(e);\n\t            globalEventFired = true;\n\t        }\n\t\n\t        var domEventFired = false;\n\t        try {\n\t            domEventFired = fireDomEvent(name, eventToObjectGenerator[name].apply(null, arguments));\n\t        } catch (e) {\n\t            async.throwLater(e);\n\t            domEventFired = true;\n\t        }\n\t\n\t        return domEventFired || globalEventFired;\n\t    };\n\t\n\t    Promise.config = function (opts) {\n\t        opts = Object(opts);\n\t        if (\"longStackTraces\" in opts) {\n\t            if (opts.longStackTraces) {\n\t                Promise.longStackTraces();\n\t            } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n\t                disableLongStackTraces();\n\t            }\n\t        }\n\t        if (\"warnings\" in opts) {\n\t            var warningsOption = opts.warnings;\n\t            config.warnings = !!warningsOption;\n\t            wForgottenReturn = config.warnings;\n\t\n\t            if (util.isObject(warningsOption)) {\n\t                if (\"wForgottenReturn\" in warningsOption) {\n\t                    wForgottenReturn = !!warningsOption.wForgottenReturn;\n\t                }\n\t            }\n\t        }\n\t        if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n\t            if (async.haveItemsQueued()) {\n\t                throw new Error(\"cannot enable cancellation after promises are in use\");\n\t            }\n\t            Promise.prototype._clearCancellationData = cancellationClearCancellationData;\n\t            Promise.prototype._propagateFrom = cancellationPropagateFrom;\n\t            Promise.prototype._onCancel = cancellationOnCancel;\n\t            Promise.prototype._setOnCancel = cancellationSetOnCancel;\n\t            Promise.prototype._attachCancellationCallback = cancellationAttachCancellationCallback;\n\t            Promise.prototype._execute = cancellationExecute;\n\t            _propagateFromFunction = cancellationPropagateFrom;\n\t            config.cancellation = true;\n\t        }\n\t        if (\"monitoring\" in opts) {\n\t            if (opts.monitoring && !config.monitoring) {\n\t                config.monitoring = true;\n\t                Promise.prototype._fireEvent = activeFireEvent;\n\t            } else if (!opts.monitoring && config.monitoring) {\n\t                config.monitoring = false;\n\t                Promise.prototype._fireEvent = defaultFireEvent;\n\t            }\n\t        }\n\t        return Promise;\n\t    };\n\t\n\t    function defaultFireEvent() {\n\t        return false;\n\t    }\n\t\n\t    Promise.prototype._fireEvent = defaultFireEvent;\n\t    Promise.prototype._execute = function (executor, resolve, reject) {\n\t        try {\n\t            executor(resolve, reject);\n\t        } catch (e) {\n\t            return e;\n\t        }\n\t    };\n\t    Promise.prototype._onCancel = function () {};\n\t    Promise.prototype._setOnCancel = function (handler) {\n\t        ;\n\t    };\n\t    Promise.prototype._attachCancellationCallback = function (onCancel) {\n\t        ;\n\t    };\n\t    Promise.prototype._captureStackTrace = function () {};\n\t    Promise.prototype._attachExtraTrace = function () {};\n\t    Promise.prototype._clearCancellationData = function () {};\n\t    Promise.prototype._propagateFrom = function (parent, flags) {\n\t        ;\n\t        ;\n\t    };\n\t\n\t    function cancellationExecute(executor, resolve, reject) {\n\t        var promise = this;\n\t        try {\n\t            executor(resolve, reject, function (onCancel) {\n\t                if (typeof onCancel !== \"function\") {\n\t                    throw new TypeError(\"onCancel must be a function, got: \" + util.toString(onCancel));\n\t                }\n\t                promise._attachCancellationCallback(onCancel);\n\t            });\n\t        } catch (e) {\n\t            return e;\n\t        }\n\t    }\n\t\n\t    function cancellationAttachCancellationCallback(onCancel) {\n\t        if (!this._isCancellable()) return this;\n\t\n\t        var previousOnCancel = this._onCancel();\n\t        if (previousOnCancel !== undefined) {\n\t            if (util.isArray(previousOnCancel)) {\n\t                previousOnCancel.push(onCancel);\n\t            } else {\n\t                this._setOnCancel([previousOnCancel, onCancel]);\n\t            }\n\t        } else {\n\t            this._setOnCancel(onCancel);\n\t        }\n\t    }\n\t\n\t    function cancellationOnCancel() {\n\t        return this._onCancelField;\n\t    }\n\t\n\t    function cancellationSetOnCancel(onCancel) {\n\t        this._onCancelField = onCancel;\n\t    }\n\t\n\t    function cancellationClearCancellationData() {\n\t        this._cancellationParent = undefined;\n\t        this._onCancelField = undefined;\n\t    }\n\t\n\t    function cancellationPropagateFrom(parent, flags) {\n\t        if ((flags & 1) !== 0) {\n\t            this._cancellationParent = parent;\n\t            var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n\t            if (branchesRemainingToCancel === undefined) {\n\t                branchesRemainingToCancel = 0;\n\t            }\n\t            parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n\t        }\n\t        if ((flags & 2) !== 0 && parent._isBound()) {\n\t            this._setBoundTo(parent._boundTo);\n\t        }\n\t    }\n\t\n\t    function bindingPropagateFrom(parent, flags) {\n\t        if ((flags & 2) !== 0 && parent._isBound()) {\n\t            this._setBoundTo(parent._boundTo);\n\t        }\n\t    }\n\t    var _propagateFromFunction = bindingPropagateFrom;\n\t\n\t    function _boundValueFunction() {\n\t        var ret = this._boundTo;\n\t        if (ret !== undefined) {\n\t            if (ret instanceof Promise) {\n\t                if (ret.isFulfilled()) {\n\t                    return ret.value();\n\t                } else {\n\t                    return undefined;\n\t                }\n\t            }\n\t        }\n\t        return ret;\n\t    }\n\t\n\t    function longStackTracesCaptureStackTrace() {\n\t        this._trace = new CapturedTrace(this._peekContext());\n\t    }\n\t\n\t    function longStackTracesAttachExtraTrace(error, ignoreSelf) {\n\t        if (canAttachTrace(error)) {\n\t            var trace = this._trace;\n\t            if (trace !== undefined) {\n\t                if (ignoreSelf) trace = trace._parent;\n\t            }\n\t            if (trace !== undefined) {\n\t                trace.attachExtraTrace(error);\n\t            } else if (!error.__stackCleaned__) {\n\t                var parsed = parseStackAndMessage(error);\n\t                util.notEnumerableProp(error, \"stack\", parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n\t                util.notEnumerableProp(error, \"__stackCleaned__\", true);\n\t            }\n\t        }\n\t    }\n\t\n\t    function checkForgottenReturns(returnValue, promiseCreated, name, promise, parent) {\n\t        if (returnValue === undefined && promiseCreated !== null && wForgottenReturn) {\n\t            if (parent !== undefined && parent._returnedNonUndefined()) return;\n\t            if ((promise._bitField & 65535) === 0) return;\n\t\n\t            if (name) name = name + \" \";\n\t            var handlerLine = \"\";\n\t            var creatorLine = \"\";\n\t            if (promiseCreated._trace) {\n\t                var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n\t                var stack = cleanStack(traceLines);\n\t                for (var i = stack.length - 1; i >= 0; --i) {\n\t                    var line = stack[i];\n\t                    if (!nodeFramePattern.test(line)) {\n\t                        var lineMatches = line.match(parseLinePattern);\n\t                        if (lineMatches) {\n\t                            handlerLine = \"at \" + lineMatches[1] + \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n\t                        }\n\t                        break;\n\t                    }\n\t                }\n\t\n\t                if (stack.length > 0) {\n\t                    var firstUserLine = stack[0];\n\t                    for (var i = 0; i < traceLines.length; ++i) {\n\t\n\t                        if (traceLines[i] === firstUserLine) {\n\t                            if (i > 0) {\n\t                                creatorLine = \"\\n\" + traceLines[i - 1];\n\t                            }\n\t                            break;\n\t                        }\n\t                    }\n\t                }\n\t            }\n\t            var msg = \"a promise was created in a \" + name + \"handler \" + handlerLine + \"but was not returned from it, \" + \"see http://goo.gl/rRqMUw\" + creatorLine;\n\t            promise._warn(msg, true, promiseCreated);\n\t        }\n\t    }\n\t\n\t    function deprecated(name, replacement) {\n\t        var message = name + \" is deprecated and will be removed in a future version.\";\n\t        if (replacement) message += \" Use \" + replacement + \" instead.\";\n\t        return warn(message);\n\t    }\n\t\n\t    function warn(message, shouldUseOwnTrace, promise) {\n\t        if (!config.warnings) return;\n\t        var warning = new Warning(message);\n\t        var ctx;\n\t        if (shouldUseOwnTrace) {\n\t            promise._attachExtraTrace(warning);\n\t        } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n\t            ctx.attachExtraTrace(warning);\n\t        } else {\n\t            var parsed = parseStackAndMessage(warning);\n\t            warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n\t        }\n\t\n\t        if (!activeFireEvent(\"warning\", warning)) {\n\t            formatAndLogError(warning, \"\", true);\n\t        }\n\t    }\n\t\n\t    function reconstructStack(message, stacks) {\n\t        for (var i = 0; i < stacks.length - 1; ++i) {\n\t            stacks[i].push(\"From previous event:\");\n\t            stacks[i] = stacks[i].join(\"\\n\");\n\t        }\n\t        if (i < stacks.length) {\n\t            stacks[i] = stacks[i].join(\"\\n\");\n\t        }\n\t        return message + \"\\n\" + stacks.join(\"\\n\");\n\t    }\n\t\n\t    function removeDuplicateOrEmptyJumps(stacks) {\n\t        for (var i = 0; i < stacks.length; ++i) {\n\t            if (stacks[i].length === 0 || i + 1 < stacks.length && stacks[i][0] === stacks[i + 1][0]) {\n\t                stacks.splice(i, 1);\n\t                i--;\n\t            }\n\t        }\n\t    }\n\t\n\t    function removeCommonRoots(stacks) {\n\t        var current = stacks[0];\n\t        for (var i = 1; i < stacks.length; ++i) {\n\t            var prev = stacks[i];\n\t            var currentLastIndex = current.length - 1;\n\t            var currentLastLine = current[currentLastIndex];\n\t            var commonRootMeetPoint = -1;\n\t\n\t            for (var j = prev.length - 1; j >= 0; --j) {\n\t                if (prev[j] === currentLastLine) {\n\t                    commonRootMeetPoint = j;\n\t                    break;\n\t                }\n\t            }\n\t\n\t            for (var j = commonRootMeetPoint; j >= 0; --j) {\n\t                var line = prev[j];\n\t                if (current[currentLastIndex] === line) {\n\t                    current.pop();\n\t                    currentLastIndex--;\n\t                } else {\n\t                    break;\n\t                }\n\t            }\n\t            current = prev;\n\t        }\n\t    }\n\t\n\t    function cleanStack(stack) {\n\t        var ret = [];\n\t        for (var i = 0; i < stack.length; ++i) {\n\t            var line = stack[i];\n\t            var isTraceLine = \"    (No stack trace)\" === line || stackFramePattern.test(line);\n\t            var isInternalFrame = isTraceLine && shouldIgnore(line);\n\t            if (isTraceLine && !isInternalFrame) {\n\t                if (indentStackFrames && line.charAt(0) !== \" \") {\n\t                    line = \"    \" + line;\n\t                }\n\t                ret.push(line);\n\t            }\n\t        }\n\t        return ret;\n\t    }\n\t\n\t    function stackFramesAsArray(error) {\n\t        var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n\t        for (var i = 0; i < stack.length; ++i) {\n\t            var line = stack[i];\n\t            if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n\t                break;\n\t            }\n\t        }\n\t        if (i > 0 && error.name != \"SyntaxError\") {\n\t            stack = stack.slice(i);\n\t        }\n\t        return stack;\n\t    }\n\t\n\t    function parseStackAndMessage(error) {\n\t        var stack = error.stack;\n\t        var message = error.toString();\n\t        stack = typeof stack === \"string\" && stack.length > 0 ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n\t        return {\n\t            message: message,\n\t            stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n\t        };\n\t    }\n\t\n\t    function formatAndLogError(error, title, isSoft) {\n\t        if (typeof console !== \"undefined\") {\n\t            var message;\n\t            if (util.isObject(error)) {\n\t                var stack = error.stack;\n\t                message = title + formatStack(stack, error);\n\t            } else {\n\t                message = title + String(error);\n\t            }\n\t            if (typeof printWarning === \"function\") {\n\t                printWarning(message, isSoft);\n\t            } else if (typeof console.log === \"function\" || _typeof(console.log) === \"object\") {\n\t                console.log(message);\n\t            }\n\t        }\n\t    }\n\t\n\t    function fireRejectionEvent(name, localHandler, reason, promise) {\n\t        var localEventFired = false;\n\t        try {\n\t            if (typeof localHandler === \"function\") {\n\t                localEventFired = true;\n\t                if (name === \"rejectionHandled\") {\n\t                    localHandler(promise);\n\t                } else {\n\t                    localHandler(reason, promise);\n\t                }\n\t            }\n\t        } catch (e) {\n\t            async.throwLater(e);\n\t        }\n\t\n\t        if (name === \"unhandledRejection\") {\n\t            if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n\t                formatAndLogError(reason, \"Unhandled rejection \");\n\t            }\n\t        } else {\n\t            activeFireEvent(name, promise);\n\t        }\n\t    }\n\t\n\t    function formatNonError(obj) {\n\t        var str;\n\t        if (typeof obj === \"function\") {\n\t            str = \"[function \" + (obj.name || \"anonymous\") + \"]\";\n\t        } else {\n\t            str = obj && typeof obj.toString === \"function\" ? obj.toString() : util.toString(obj);\n\t            var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n\t            if (ruselessToString.test(str)) {\n\t                try {\n\t                    var newStr = JSON.stringify(obj);\n\t                    str = newStr;\n\t                } catch (e) {}\n\t            }\n\t            if (str.length === 0) {\n\t                str = \"(empty array)\";\n\t            }\n\t        }\n\t        return \"(<\" + snip(str) + \">, no stack trace)\";\n\t    }\n\t\n\t    function snip(str) {\n\t        var maxChars = 41;\n\t        if (str.length < maxChars) {\n\t            return str;\n\t        }\n\t        return str.substr(0, maxChars - 3) + \"...\";\n\t    }\n\t\n\t    function longStackTracesIsSupported() {\n\t        return typeof captureStackTrace === \"function\";\n\t    }\n\t\n\t    var shouldIgnore = function shouldIgnore() {\n\t        return false;\n\t    };\n\t    var parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\n\t    function parseLineInfo(line) {\n\t        var matches = line.match(parseLineInfoRegex);\n\t        if (matches) {\n\t            return {\n\t                fileName: matches[1],\n\t                line: parseInt(matches[2], 10)\n\t            };\n\t        }\n\t    }\n\t\n\t    function setBounds(firstLineError, lastLineError) {\n\t        if (!longStackTracesIsSupported()) return;\n\t        var firstStackLines = firstLineError.stack.split(\"\\n\");\n\t        var lastStackLines = lastLineError.stack.split(\"\\n\");\n\t        var firstIndex = -1;\n\t        var lastIndex = -1;\n\t        var firstFileName;\n\t        var lastFileName;\n\t        for (var i = 0; i < firstStackLines.length; ++i) {\n\t            var result = parseLineInfo(firstStackLines[i]);\n\t            if (result) {\n\t                firstFileName = result.fileName;\n\t                firstIndex = result.line;\n\t                break;\n\t            }\n\t        }\n\t        for (var i = 0; i < lastStackLines.length; ++i) {\n\t            var result = parseLineInfo(lastStackLines[i]);\n\t            if (result) {\n\t                lastFileName = result.fileName;\n\t                lastIndex = result.line;\n\t                break;\n\t            }\n\t        }\n\t        if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName || firstFileName !== lastFileName || firstIndex >= lastIndex) {\n\t            return;\n\t        }\n\t\n\t        shouldIgnore = function shouldIgnore(line) {\n\t            if (bluebirdFramePattern.test(line)) return true;\n\t            var info = parseLineInfo(line);\n\t            if (info) {\n\t                if (info.fileName === firstFileName && firstIndex <= info.line && info.line <= lastIndex) {\n\t                    return true;\n\t                }\n\t            }\n\t            return false;\n\t        };\n\t    }\n\t\n\t    function CapturedTrace(parent) {\n\t        this._parent = parent;\n\t        this._promisesCreated = 0;\n\t        var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n\t        captureStackTrace(this, CapturedTrace);\n\t        if (length > 32) this.uncycle();\n\t    }\n\t    util.inherits(CapturedTrace, Error);\n\t    Context.CapturedTrace = CapturedTrace;\n\t\n\t    CapturedTrace.prototype.uncycle = function () {\n\t        var length = this._length;\n\t        if (length < 2) return;\n\t        var nodes = [];\n\t        var stackToIndex = {};\n\t\n\t        for (var i = 0, node = this; node !== undefined; ++i) {\n\t            nodes.push(node);\n\t            node = node._parent;\n\t        }\n\t        length = this._length = i;\n\t        for (var i = length - 1; i >= 0; --i) {\n\t            var stack = nodes[i].stack;\n\t            if (stackToIndex[stack] === undefined) {\n\t                stackToIndex[stack] = i;\n\t            }\n\t        }\n\t        for (var i = 0; i < length; ++i) {\n\t            var currentStack = nodes[i].stack;\n\t            var index = stackToIndex[currentStack];\n\t            if (index !== undefined && index !== i) {\n\t                if (index > 0) {\n\t                    nodes[index - 1]._parent = undefined;\n\t                    nodes[index - 1]._length = 1;\n\t                }\n\t                nodes[i]._parent = undefined;\n\t                nodes[i]._length = 1;\n\t                var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\t\n\t                if (index < length - 1) {\n\t                    cycleEdgeNode._parent = nodes[index + 1];\n\t                    cycleEdgeNode._parent.uncycle();\n\t                    cycleEdgeNode._length = cycleEdgeNode._parent._length + 1;\n\t                } else {\n\t                    cycleEdgeNode._parent = undefined;\n\t                    cycleEdgeNode._length = 1;\n\t                }\n\t                var currentChildLength = cycleEdgeNode._length + 1;\n\t                for (var j = i - 2; j >= 0; --j) {\n\t                    nodes[j]._length = currentChildLength;\n\t                    currentChildLength++;\n\t                }\n\t                return;\n\t            }\n\t        }\n\t    };\n\t\n\t    CapturedTrace.prototype.attachExtraTrace = function (error) {\n\t        if (error.__stackCleaned__) return;\n\t        this.uncycle();\n\t        var parsed = parseStackAndMessage(error);\n\t        var message = parsed.message;\n\t        var stacks = [parsed.stack];\n\t\n\t        var trace = this;\n\t        while (trace !== undefined) {\n\t            stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n\t            trace = trace._parent;\n\t        }\n\t        removeCommonRoots(stacks);\n\t        removeDuplicateOrEmptyJumps(stacks);\n\t        util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n\t        util.notEnumerableProp(error, \"__stackCleaned__\", true);\n\t    };\n\t\n\t    var captureStackTrace = function stackDetection() {\n\t        var v8stackFramePattern = /^\\s*at\\s*/;\n\t        var v8stackFormatter = function v8stackFormatter(stack, error) {\n\t            if (typeof stack === \"string\") return stack;\n\t\n\t            if (error.name !== undefined && error.message !== undefined) {\n\t                return error.toString();\n\t            }\n\t            return formatNonError(error);\n\t        };\n\t\n\t        if (typeof Error.stackTraceLimit === \"number\" && typeof Error.captureStackTrace === \"function\") {\n\t            Error.stackTraceLimit += 6;\n\t            stackFramePattern = v8stackFramePattern;\n\t            formatStack = v8stackFormatter;\n\t            var captureStackTrace = Error.captureStackTrace;\n\t\n\t            shouldIgnore = function shouldIgnore(line) {\n\t                return bluebirdFramePattern.test(line);\n\t            };\n\t            return function (receiver, ignoreUntil) {\n\t                Error.stackTraceLimit += 6;\n\t                captureStackTrace(receiver, ignoreUntil);\n\t                Error.stackTraceLimit -= 6;\n\t            };\n\t        }\n\t        var err = new Error();\n\t\n\t        if (typeof err.stack === \"string\" && err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n\t            stackFramePattern = /@/;\n\t            formatStack = v8stackFormatter;\n\t            indentStackFrames = true;\n\t            return function captureStackTrace(o) {\n\t                o.stack = new Error().stack;\n\t            };\n\t        }\n\t\n\t        var hasStackAfterThrow;\n\t        try {\n\t            throw new Error();\n\t        } catch (e) {\n\t            hasStackAfterThrow = \"stack\" in e;\n\t        }\n\t        if (!(\"stack\" in err) && hasStackAfterThrow && typeof Error.stackTraceLimit === \"number\") {\n\t            stackFramePattern = v8stackFramePattern;\n\t            formatStack = v8stackFormatter;\n\t            return function captureStackTrace(o) {\n\t                Error.stackTraceLimit += 6;\n\t                try {\n\t                    throw new Error();\n\t                } catch (e) {\n\t                    o.stack = e.stack;\n\t                }\n\t                Error.stackTraceLimit -= 6;\n\t            };\n\t        }\n\t\n\t        formatStack = function formatStack(stack, error) {\n\t            if (typeof stack === \"string\") return stack;\n\t\n\t            if (((typeof error === \"undefined\" ? \"undefined\" : _typeof(error)) === \"object\" || typeof error === \"function\") && error.name !== undefined && error.message !== undefined) {\n\t                return error.toString();\n\t            }\n\t            return formatNonError(error);\n\t        };\n\t\n\t        return null;\n\t    }([]);\n\t\n\t    if (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n\t        printWarning = function printWarning(message) {\n\t            console.warn(message);\n\t        };\n\t        if (util.isNode && process.stderr.isTTY) {\n\t            printWarning = function printWarning(message, isSoft) {\n\t                var color = isSoft ? \"\\x1B[33m\" : \"\\x1B[31m\";\n\t                console.warn(color + message + \"\\x1B[0m\\n\");\n\t            };\n\t        } else if (!util.isNode && typeof new Error().stack === \"string\") {\n\t            printWarning = function printWarning(message, isSoft) {\n\t                console.warn(\"%c\" + message, isSoft ? \"color: darkorange\" : \"color: red\");\n\t            };\n\t        }\n\t    }\n\t\n\t    var config = {\n\t        warnings: warnings,\n\t        longStackTraces: false,\n\t        cancellation: false,\n\t        monitoring: false\n\t    };\n\t\n\t    if (longStackTraces) Promise.longStackTraces();\n\t\n\t    return {\n\t        longStackTraces: function longStackTraces() {\n\t            return config.longStackTraces;\n\t        },\n\t        warnings: function warnings() {\n\t            return config.warnings;\n\t        },\n\t        cancellation: function cancellation() {\n\t            return config.cancellation;\n\t        },\n\t        monitoring: function monitoring() {\n\t            return config.monitoring;\n\t        },\n\t        propagateFromFunction: function propagateFromFunction() {\n\t            return _propagateFromFunction;\n\t        },\n\t        boundValueFunction: function boundValueFunction() {\n\t            return _boundValueFunction;\n\t        },\n\t        checkForgottenReturns: checkForgottenReturns,\n\t        setBounds: setBounds,\n\t        warn: warn,\n\t        deprecated: deprecated,\n\t        CapturedTrace: CapturedTrace,\n\t        fireDomEvent: fireDomEvent,\n\t        fireGlobalEvent: fireGlobalEvent\n\t    };\n\t};\n\n/***/ },\n/* 17 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, tryConvertToPromise, NEXT_FILTER) {\n\t    var util = __webpack_require__(7);\n\t    var CancellationError = Promise.CancellationError;\n\t    var errorObj = util.errorObj;\n\t    var catchFilter = __webpack_require__(18)(NEXT_FILTER);\n\t\n\t    function PassThroughHandlerContext(promise, type, handler) {\n\t        this.promise = promise;\n\t        this.type = type;\n\t        this.handler = handler;\n\t        this.called = false;\n\t        this.cancelPromise = null;\n\t    }\n\t\n\t    PassThroughHandlerContext.prototype.isFinallyHandler = function () {\n\t        return this.type === 0;\n\t    };\n\t\n\t    function FinallyHandlerCancelReaction(finallyHandler) {\n\t        this.finallyHandler = finallyHandler;\n\t    }\n\t\n\t    FinallyHandlerCancelReaction.prototype._resultCancelled = function () {\n\t        checkCancel(this.finallyHandler);\n\t    };\n\t\n\t    function checkCancel(ctx, reason) {\n\t        if (ctx.cancelPromise != null) {\n\t            if (arguments.length > 1) {\n\t                ctx.cancelPromise._reject(reason);\n\t            } else {\n\t                ctx.cancelPromise._cancel();\n\t            }\n\t            ctx.cancelPromise = null;\n\t            return true;\n\t        }\n\t        return false;\n\t    }\n\t\n\t    function succeed() {\n\t        return finallyHandler.call(this, this.promise._target()._settledValue());\n\t    }\n\t    function fail(reason) {\n\t        if (checkCancel(this, reason)) return;\n\t        errorObj.e = reason;\n\t        return errorObj;\n\t    }\n\t    function finallyHandler(reasonOrValue) {\n\t        var promise = this.promise;\n\t        var handler = this.handler;\n\t\n\t        if (!this.called) {\n\t            this.called = true;\n\t            var ret = this.isFinallyHandler() ? handler.call(promise._boundValue()) : handler.call(promise._boundValue(), reasonOrValue);\n\t            if (ret === NEXT_FILTER) {\n\t                return ret;\n\t            } else if (ret !== undefined) {\n\t                promise._setReturnedNonUndefined();\n\t                var maybePromise = tryConvertToPromise(ret, promise);\n\t                if (maybePromise instanceof Promise) {\n\t                    if (this.cancelPromise != null) {\n\t                        if (maybePromise._isCancelled()) {\n\t                            var reason = new CancellationError(\"late cancellation observer\");\n\t                            promise._attachExtraTrace(reason);\n\t                            errorObj.e = reason;\n\t                            return errorObj;\n\t                        } else if (maybePromise.isPending()) {\n\t                            maybePromise._attachCancellationCallback(new FinallyHandlerCancelReaction(this));\n\t                        }\n\t                    }\n\t                    return maybePromise._then(succeed, fail, undefined, this, undefined);\n\t                }\n\t            }\n\t        }\n\t\n\t        if (promise.isRejected()) {\n\t            checkCancel(this);\n\t            errorObj.e = reasonOrValue;\n\t            return errorObj;\n\t        } else {\n\t            checkCancel(this);\n\t            return reasonOrValue;\n\t        }\n\t    }\n\t\n\t    Promise.prototype._passThrough = function (handler, type, success, fail) {\n\t        if (typeof handler !== \"function\") return this.then();\n\t        return this._then(success, fail, undefined, new PassThroughHandlerContext(this, type, handler), undefined);\n\t    };\n\t\n\t    Promise.prototype.lastly = Promise.prototype[\"finally\"] = function (handler) {\n\t        return this._passThrough(handler, 0, finallyHandler, finallyHandler);\n\t    };\n\t\n\t    Promise.prototype.tap = function (handler) {\n\t        return this._passThrough(handler, 1, finallyHandler);\n\t    };\n\t\n\t    Promise.prototype.tapCatch = function (handlerOrPredicate) {\n\t        var len = arguments.length;\n\t        if (len === 1) {\n\t            return this._passThrough(handlerOrPredicate, 1, undefined, finallyHandler);\n\t        } else {\n\t            var catchInstances = new Array(len - 1),\n\t                j = 0,\n\t                i;\n\t            for (i = 0; i < len - 1; ++i) {\n\t                var item = arguments[i];\n\t                if (util.isObject(item)) {\n\t                    catchInstances[j++] = item;\n\t                } else {\n\t                    return Promise.reject(new TypeError(\"tapCatch statement predicate: \" + \"expecting an object but got \" + util.classString(item)));\n\t                }\n\t            }\n\t            catchInstances.length = j;\n\t            var handler = arguments[i];\n\t            return this._passThrough(catchFilter(catchInstances, handler, this), 1, undefined, finallyHandler);\n\t        }\n\t    };\n\t\n\t    return PassThroughHandlerContext;\n\t};\n\n/***/ },\n/* 18 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (NEXT_FILTER) {\n\t    var util = __webpack_require__(7);\n\t    var getKeys = __webpack_require__(8).keys;\n\t    var tryCatch = util.tryCatch;\n\t    var errorObj = util.errorObj;\n\t\n\t    function catchFilter(instances, cb, promise) {\n\t        return function (e) {\n\t            var boundTo = promise._boundValue();\n\t            predicateLoop: for (var i = 0; i < instances.length; ++i) {\n\t                var item = instances[i];\n\t\n\t                if (item === Error || item != null && item.prototype instanceof Error) {\n\t                    if (e instanceof item) {\n\t                        return tryCatch(cb).call(boundTo, e);\n\t                    }\n\t                } else if (typeof item === \"function\") {\n\t                    var matchesPredicate = tryCatch(item).call(boundTo, e);\n\t                    if (matchesPredicate === errorObj) {\n\t                        return matchesPredicate;\n\t                    } else if (matchesPredicate) {\n\t                        return tryCatch(cb).call(boundTo, e);\n\t                    }\n\t                } else if (util.isObject(e)) {\n\t                    var keys = getKeys(item);\n\t                    for (var j = 0; j < keys.length; ++j) {\n\t                        var key = keys[j];\n\t                        if (item[key] != e[key]) {\n\t                            continue predicateLoop;\n\t                        }\n\t                    }\n\t                    return tryCatch(cb).call(boundTo, e);\n\t                }\n\t            }\n\t            return NEXT_FILTER;\n\t        };\n\t    }\n\t\n\t    return catchFilter;\n\t};\n\n/***/ },\n/* 19 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar util = __webpack_require__(7);\n\tvar maybeWrapAsError = util.maybeWrapAsError;\n\tvar errors = __webpack_require__(12);\n\tvar OperationalError = errors.OperationalError;\n\tvar es5 = __webpack_require__(8);\n\t\n\tfunction isUntypedError(obj) {\n\t    return obj instanceof Error && es5.getPrototypeOf(obj) === Error.prototype;\n\t}\n\t\n\tvar rErrorKey = /^(?:name|message|stack|cause)$/;\n\tfunction wrapAsOperationalError(obj) {\n\t    var ret;\n\t    if (isUntypedError(obj)) {\n\t        ret = new OperationalError(obj);\n\t        ret.name = obj.name;\n\t        ret.message = obj.message;\n\t        ret.stack = obj.stack;\n\t        var keys = es5.keys(obj);\n\t        for (var i = 0; i < keys.length; ++i) {\n\t            var key = keys[i];\n\t            if (!rErrorKey.test(key)) {\n\t                ret[key] = obj[key];\n\t            }\n\t        }\n\t        return ret;\n\t    }\n\t    util.markAsOriginatingFromRejection(obj);\n\t    return obj;\n\t}\n\t\n\tfunction nodebackForPromise(promise, multiArgs) {\n\t    return function (err, value) {\n\t        if (promise === null) return;\n\t        if (err) {\n\t            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n\t            promise._attachExtraTrace(wrapped);\n\t            promise._reject(wrapped);\n\t        } else if (!multiArgs) {\n\t            promise._fulfill(value);\n\t        } else {\n\t            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0));for (var $_i = 1; $_i < $_len; ++$_i) {\n\t                args[$_i - 1] = arguments[$_i];\n\t            };\n\t            promise._fulfill(args);\n\t        }\n\t        promise = null;\n\t    };\n\t}\n\t\n\tmodule.exports = nodebackForPromise;\n\n/***/ },\n/* 20 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\n\t    var util = __webpack_require__(7);\n\t    var tryCatch = util.tryCatch;\n\t\n\t    Promise.method = function (fn) {\n\t        if (typeof fn !== \"function\") {\n\t            throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        return function () {\n\t            var ret = new Promise(INTERNAL);\n\t            ret._captureStackTrace();\n\t            ret._pushContext();\n\t            var value = tryCatch(fn).apply(this, arguments);\n\t            var promiseCreated = ret._popContext();\n\t            debug.checkForgottenReturns(value, promiseCreated, \"Promise.method\", ret);\n\t            ret._resolveFromSyncValue(value);\n\t            return ret;\n\t        };\n\t    };\n\t\n\t    Promise.attempt = Promise[\"try\"] = function (fn) {\n\t        if (typeof fn !== \"function\") {\n\t            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        var ret = new Promise(INTERNAL);\n\t        ret._captureStackTrace();\n\t        ret._pushContext();\n\t        var value;\n\t        if (arguments.length > 1) {\n\t            debug.deprecated(\"calling Promise.try with more than 1 argument\");\n\t            var arg = arguments[1];\n\t            var ctx = arguments[2];\n\t            value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg) : tryCatch(fn).call(ctx, arg);\n\t        } else {\n\t            value = tryCatch(fn)();\n\t        }\n\t        var promiseCreated = ret._popContext();\n\t        debug.checkForgottenReturns(value, promiseCreated, \"Promise.try\", ret);\n\t        ret._resolveFromSyncValue(value);\n\t        return ret;\n\t    };\n\t\n\t    Promise.prototype._resolveFromSyncValue = function (value) {\n\t        if (value === util.errorObj) {\n\t            this._rejectCallback(value.e, false);\n\t        } else {\n\t            this._resolveCallback(value, true);\n\t        }\n\t    };\n\t};\n\n/***/ },\n/* 21 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, debug) {\n\t    var calledBind = false;\n\t    var rejectThis = function rejectThis(_, e) {\n\t        this._reject(e);\n\t    };\n\t\n\t    var targetRejected = function targetRejected(e, context) {\n\t        context.promiseRejectionQueued = true;\n\t        context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n\t    };\n\t\n\t    var bindingResolved = function bindingResolved(thisArg, context) {\n\t        if ((this._bitField & 50397184) === 0) {\n\t            this._resolveCallback(context.target);\n\t        }\n\t    };\n\t\n\t    var bindingRejected = function bindingRejected(e, context) {\n\t        if (!context.promiseRejectionQueued) this._reject(e);\n\t    };\n\t\n\t    Promise.prototype.bind = function (thisArg) {\n\t        if (!calledBind) {\n\t            calledBind = true;\n\t            Promise.prototype._propagateFrom = debug.propagateFromFunction();\n\t            Promise.prototype._boundValue = debug.boundValueFunction();\n\t        }\n\t        var maybePromise = tryConvertToPromise(thisArg);\n\t        var ret = new Promise(INTERNAL);\n\t        ret._propagateFrom(this, 1);\n\t        var target = this._target();\n\t        ret._setBoundTo(maybePromise);\n\t        if (maybePromise instanceof Promise) {\n\t            var context = {\n\t                promiseRejectionQueued: false,\n\t                promise: ret,\n\t                target: target,\n\t                bindingPromise: maybePromise\n\t            };\n\t            target._then(INTERNAL, targetRejected, undefined, ret, context);\n\t            maybePromise._then(bindingResolved, bindingRejected, undefined, ret, context);\n\t            ret._setOnCancel(maybePromise);\n\t        } else {\n\t            ret._resolveCallback(target);\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    Promise.prototype._setBoundTo = function (obj) {\n\t        if (obj !== undefined) {\n\t            this._bitField = this._bitField | 2097152;\n\t            this._boundTo = obj;\n\t        } else {\n\t            this._bitField = this._bitField & ~2097152;\n\t        }\n\t    };\n\t\n\t    Promise.prototype._isBound = function () {\n\t        return (this._bitField & 2097152) === 2097152;\n\t    };\n\t\n\t    Promise.bind = function (thisArg, value) {\n\t        return Promise.resolve(value).bind(thisArg);\n\t    };\n\t};\n\n/***/ },\n/* 22 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, apiRejection, debug) {\n\t    var util = __webpack_require__(7);\n\t    var tryCatch = util.tryCatch;\n\t    var errorObj = util.errorObj;\n\t    var async = Promise._async;\n\t\n\t    Promise.prototype[\"break\"] = Promise.prototype.cancel = function () {\n\t        if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\t\n\t        var promise = this;\n\t        var child = promise;\n\t        while (promise._isCancellable()) {\n\t            if (!promise._cancelBy(child)) {\n\t                if (child._isFollowing()) {\n\t                    child._followee().cancel();\n\t                } else {\n\t                    child._cancelBranched();\n\t                }\n\t                break;\n\t            }\n\t\n\t            var parent = promise._cancellationParent;\n\t            if (parent == null || !parent._isCancellable()) {\n\t                if (promise._isFollowing()) {\n\t                    promise._followee().cancel();\n\t                } else {\n\t                    promise._cancelBranched();\n\t                }\n\t                break;\n\t            } else {\n\t                if (promise._isFollowing()) promise._followee().cancel();\n\t                promise._setWillBeCancelled();\n\t                child = promise;\n\t                promise = parent;\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.prototype._branchHasCancelled = function () {\n\t        this._branchesRemainingToCancel--;\n\t    };\n\t\n\t    Promise.prototype._enoughBranchesHaveCancelled = function () {\n\t        return this._branchesRemainingToCancel === undefined || this._branchesRemainingToCancel <= 0;\n\t    };\n\t\n\t    Promise.prototype._cancelBy = function (canceller) {\n\t        if (canceller === this) {\n\t            this._branchesRemainingToCancel = 0;\n\t            this._invokeOnCancel();\n\t            return true;\n\t        } else {\n\t            this._branchHasCancelled();\n\t            if (this._enoughBranchesHaveCancelled()) {\n\t                this._invokeOnCancel();\n\t                return true;\n\t            }\n\t        }\n\t        return false;\n\t    };\n\t\n\t    Promise.prototype._cancelBranched = function () {\n\t        if (this._enoughBranchesHaveCancelled()) {\n\t            this._cancel();\n\t        }\n\t    };\n\t\n\t    Promise.prototype._cancel = function () {\n\t        if (!this._isCancellable()) return;\n\t        this._setCancelled();\n\t        async.invoke(this._cancelPromises, this, undefined);\n\t    };\n\t\n\t    Promise.prototype._cancelPromises = function () {\n\t        if (this._length() > 0) this._settlePromises();\n\t    };\n\t\n\t    Promise.prototype._unsetOnCancel = function () {\n\t        this._onCancelField = undefined;\n\t    };\n\t\n\t    Promise.prototype._isCancellable = function () {\n\t        return this.isPending() && !this._isCancelled();\n\t    };\n\t\n\t    Promise.prototype.isCancellable = function () {\n\t        return this.isPending() && !this.isCancelled();\n\t    };\n\t\n\t    Promise.prototype._doInvokeOnCancel = function (onCancelCallback, internalOnly) {\n\t        if (util.isArray(onCancelCallback)) {\n\t            for (var i = 0; i < onCancelCallback.length; ++i) {\n\t                this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n\t            }\n\t        } else if (onCancelCallback !== undefined) {\n\t            if (typeof onCancelCallback === \"function\") {\n\t                if (!internalOnly) {\n\t                    var e = tryCatch(onCancelCallback).call(this._boundValue());\n\t                    if (e === errorObj) {\n\t                        this._attachExtraTrace(e.e);\n\t                        async.throwLater(e.e);\n\t                    }\n\t                }\n\t            } else {\n\t                onCancelCallback._resultCancelled(this);\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.prototype._invokeOnCancel = function () {\n\t        var onCancelCallback = this._onCancel();\n\t        this._unsetOnCancel();\n\t        async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n\t    };\n\t\n\t    Promise.prototype._invokeInternalOnCancel = function () {\n\t        if (this._isCancellable()) {\n\t            this._doInvokeOnCancel(this._onCancel(), true);\n\t            this._unsetOnCancel();\n\t        }\n\t    };\n\t\n\t    Promise.prototype._resultCancelled = function () {\n\t        this.cancel();\n\t    };\n\t};\n\n/***/ },\n/* 23 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise) {\n\t    function returner() {\n\t        return this.value;\n\t    }\n\t    function thrower() {\n\t        throw this.reason;\n\t    }\n\t\n\t    Promise.prototype[\"return\"] = Promise.prototype.thenReturn = function (value) {\n\t        if (value instanceof Promise) value.suppressUnhandledRejections();\n\t        return this._then(returner, undefined, undefined, { value: value }, undefined);\n\t    };\n\t\n\t    Promise.prototype[\"throw\"] = Promise.prototype.thenThrow = function (reason) {\n\t        return this._then(thrower, undefined, undefined, { reason: reason }, undefined);\n\t    };\n\t\n\t    Promise.prototype.catchThrow = function (reason) {\n\t        if (arguments.length <= 1) {\n\t            return this._then(undefined, thrower, undefined, { reason: reason }, undefined);\n\t        } else {\n\t            var _reason = arguments[1];\n\t            var handler = function handler() {\n\t                throw _reason;\n\t            };\n\t            return this.caught(reason, handler);\n\t        }\n\t    };\n\t\n\t    Promise.prototype.catchReturn = function (value) {\n\t        if (arguments.length <= 1) {\n\t            if (value instanceof Promise) value.suppressUnhandledRejections();\n\t            return this._then(undefined, returner, undefined, { value: value }, undefined);\n\t        } else {\n\t            var _value = arguments[1];\n\t            if (_value instanceof Promise) _value.suppressUnhandledRejections();\n\t            var handler = function handler() {\n\t                return _value;\n\t            };\n\t            return this.caught(value, handler);\n\t        }\n\t    };\n\t};\n\n/***/ },\n/* 24 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise) {\n\t    function PromiseInspection(promise) {\n\t        if (promise !== undefined) {\n\t            promise = promise._target();\n\t            this._bitField = promise._bitField;\n\t            this._settledValueField = promise._isFateSealed() ? promise._settledValue() : undefined;\n\t        } else {\n\t            this._bitField = 0;\n\t            this._settledValueField = undefined;\n\t        }\n\t    }\n\t\n\t    PromiseInspection.prototype._settledValue = function () {\n\t        return this._settledValueField;\n\t    };\n\t\n\t    var value = PromiseInspection.prototype.value = function () {\n\t        if (!this.isFulfilled()) {\n\t            throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        return this._settledValue();\n\t    };\n\t\n\t    var reason = PromiseInspection.prototype.error = PromiseInspection.prototype.reason = function () {\n\t        if (!this.isRejected()) {\n\t            throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        return this._settledValue();\n\t    };\n\t\n\t    var isFulfilled = PromiseInspection.prototype.isFulfilled = function () {\n\t        return (this._bitField & 33554432) !== 0;\n\t    };\n\t\n\t    var isRejected = PromiseInspection.prototype.isRejected = function () {\n\t        return (this._bitField & 16777216) !== 0;\n\t    };\n\t\n\t    var isPending = PromiseInspection.prototype.isPending = function () {\n\t        return (this._bitField & 50397184) === 0;\n\t    };\n\t\n\t    var isResolved = PromiseInspection.prototype.isResolved = function () {\n\t        return (this._bitField & 50331648) !== 0;\n\t    };\n\t\n\t    PromiseInspection.prototype.isCancelled = function () {\n\t        return (this._bitField & 8454144) !== 0;\n\t    };\n\t\n\t    Promise.prototype.__isCancelled = function () {\n\t        return (this._bitField & 65536) === 65536;\n\t    };\n\t\n\t    Promise.prototype._isCancelled = function () {\n\t        return this._target().__isCancelled();\n\t    };\n\t\n\t    Promise.prototype.isCancelled = function () {\n\t        return (this._target()._bitField & 8454144) !== 0;\n\t    };\n\t\n\t    Promise.prototype.isPending = function () {\n\t        return isPending.call(this._target());\n\t    };\n\t\n\t    Promise.prototype.isRejected = function () {\n\t        return isRejected.call(this._target());\n\t    };\n\t\n\t    Promise.prototype.isFulfilled = function () {\n\t        return isFulfilled.call(this._target());\n\t    };\n\t\n\t    Promise.prototype.isResolved = function () {\n\t        return isResolved.call(this._target());\n\t    };\n\t\n\t    Promise.prototype.value = function () {\n\t        return value.call(this._target());\n\t    };\n\t\n\t    Promise.prototype.reason = function () {\n\t        var target = this._target();\n\t        target._unsetRejectionIsUnhandled();\n\t        return reason.call(target);\n\t    };\n\t\n\t    Promise.prototype._value = function () {\n\t        return this._settledValue();\n\t    };\n\t\n\t    Promise.prototype._reason = function () {\n\t        this._unsetRejectionIsUnhandled();\n\t        return this._settledValue();\n\t    };\n\t\n\t    Promise.PromiseInspection = PromiseInspection;\n\t};\n\n/***/ },\n/* 25 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain) {\n\t    var util = __webpack_require__(7);\n\t    var canEvaluate = util.canEvaluate;\n\t    var tryCatch = util.tryCatch;\n\t    var errorObj = util.errorObj;\n\t    var reject;\n\t\n\t    if (true) {\n\t        if (canEvaluate) {\n\t            var thenCallback = function thenCallback(i) {\n\t                return new Function(\"value\", \"holder\", \"                             \\n\\\n\t            'use strict';                                                    \\n\\\n\t            holder.pIndex = value;                                           \\n\\\n\t            holder.checkFulfillment(this);                                   \\n\\\n\t            \".replace(/Index/g, i));\n\t            };\n\t\n\t            var promiseSetter = function promiseSetter(i) {\n\t                return new Function(\"promise\", \"holder\", \"                           \\n\\\n\t            'use strict';                                                    \\n\\\n\t            holder.pIndex = promise;                                         \\n\\\n\t            \".replace(/Index/g, i));\n\t            };\n\t\n\t            var generateHolderClass = function generateHolderClass(total) {\n\t                var props = new Array(total);\n\t                for (var i = 0; i < props.length; ++i) {\n\t                    props[i] = \"this.p\" + (i + 1);\n\t                }\n\t                var assignment = props.join(\" = \") + \" = null;\";\n\t                var cancellationCode = \"var promise;\\n\" + props.map(function (prop) {\n\t                    return \"                                                         \\n\\\n\t                promise = \" + prop + \";                                      \\n\\\n\t                if (promise instanceof Promise) {                            \\n\\\n\t                    promise.cancel();                                        \\n\\\n\t                }                                                            \\n\\\n\t            \";\n\t                }).join(\"\\n\");\n\t                var passedArguments = props.join(\", \");\n\t                var name = \"Holder$\" + total;\n\t\n\t                var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n\t            'use strict';                                                    \\n\\\n\t            function [TheName](fn) {                                         \\n\\\n\t                [TheProperties]                                              \\n\\\n\t                this.fn = fn;                                                \\n\\\n\t                this.asyncNeeded = true;                                     \\n\\\n\t                this.now = 0;                                                \\n\\\n\t            }                                                                \\n\\\n\t                                                                             \\n\\\n\t            [TheName].prototype._callFunction = function(promise) {          \\n\\\n\t                promise._pushContext();                                      \\n\\\n\t                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n\t                promise._popContext();                                       \\n\\\n\t                if (ret === errorObj) {                                      \\n\\\n\t                    promise._rejectCallback(ret.e, false);                   \\n\\\n\t                } else {                                                     \\n\\\n\t                    promise._resolveCallback(ret);                           \\n\\\n\t                }                                                            \\n\\\n\t            };                                                               \\n\\\n\t                                                                             \\n\\\n\t            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n\t                var now = ++this.now;                                        \\n\\\n\t                if (now === [TheTotal]) {                                    \\n\\\n\t                    if (this.asyncNeeded) {                                  \\n\\\n\t                        async.invoke(this._callFunction, this, promise);     \\n\\\n\t                    } else {                                                 \\n\\\n\t                        this._callFunction(promise);                         \\n\\\n\t                    }                                                        \\n\\\n\t                                                                             \\n\\\n\t                }                                                            \\n\\\n\t            };                                                               \\n\\\n\t                                                                             \\n\\\n\t            [TheName].prototype._resultCancelled = function() {              \\n\\\n\t                [CancellationCode]                                           \\n\\\n\t            };                                                               \\n\\\n\t                                                                             \\n\\\n\t            return [TheName];                                                \\n\\\n\t        }(tryCatch, errorObj, Promise, async);                               \\n\\\n\t        \";\n\t\n\t                code = code.replace(/\\[TheName\\]/g, name).replace(/\\[TheTotal\\]/g, total).replace(/\\[ThePassedArguments\\]/g, passedArguments).replace(/\\[TheProperties\\]/g, assignment).replace(/\\[CancellationCode\\]/g, cancellationCode);\n\t\n\t                return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)(tryCatch, errorObj, Promise, async);\n\t            };\n\t\n\t            var holderClasses = [];\n\t            var thenCallbacks = [];\n\t            var promiseSetters = [];\n\t\n\t            for (var i = 0; i < 8; ++i) {\n\t                holderClasses.push(generateHolderClass(i + 1));\n\t                thenCallbacks.push(thenCallback(i + 1));\n\t                promiseSetters.push(promiseSetter(i + 1));\n\t            }\n\t\n\t            reject = function reject(reason) {\n\t                this._reject(reason);\n\t            };\n\t        }\n\t    }\n\t\n\t    Promise.join = function () {\n\t        var last = arguments.length - 1;\n\t        var fn;\n\t        if (last > 0 && typeof arguments[last] === \"function\") {\n\t            fn = arguments[last];\n\t            if (true) {\n\t                if (last <= 8 && canEvaluate) {\n\t                    var ret = new Promise(INTERNAL);\n\t                    ret._captureStackTrace();\n\t                    var HolderClass = holderClasses[last - 1];\n\t                    var holder = new HolderClass(fn);\n\t                    var callbacks = thenCallbacks;\n\t\n\t                    for (var i = 0; i < last; ++i) {\n\t                        var maybePromise = tryConvertToPromise(arguments[i], ret);\n\t                        if (maybePromise instanceof Promise) {\n\t                            maybePromise = maybePromise._target();\n\t                            var bitField = maybePromise._bitField;\n\t                            ;\n\t                            if ((bitField & 50397184) === 0) {\n\t                                maybePromise._then(callbacks[i], reject, undefined, ret, holder);\n\t                                promiseSetters[i](maybePromise, holder);\n\t                                holder.asyncNeeded = false;\n\t                            } else if ((bitField & 33554432) !== 0) {\n\t                                callbacks[i].call(ret, maybePromise._value(), holder);\n\t                            } else if ((bitField & 16777216) !== 0) {\n\t                                ret._reject(maybePromise._reason());\n\t                            } else {\n\t                                ret._cancel();\n\t                            }\n\t                        } else {\n\t                            callbacks[i].call(ret, maybePromise, holder);\n\t                        }\n\t                    }\n\t\n\t                    if (!ret._isFateSealed()) {\n\t                        if (holder.asyncNeeded) {\n\t                            var domain = getDomain();\n\t                            if (domain !== null) {\n\t                                holder.fn = util.domainBind(domain, holder.fn);\n\t                            }\n\t                        }\n\t                        ret._setAsyncGuaranteed();\n\t                        ret._setOnCancel(holder);\n\t                    }\n\t                    return ret;\n\t                }\n\t            }\n\t        }\n\t        var $_len = arguments.length;var args = new Array($_len);for (var $_i = 0; $_i < $_len; ++$_i) {\n\t            args[$_i] = arguments[$_i];\n\t        };\n\t        if (fn) args.pop();\n\t        var ret = new PromiseArray(args).promise();\n\t        return fn !== undefined ? ret.spread(fn) : ret;\n\t    };\n\t};\n\n/***/ },\n/* 26 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tmodule.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n\t    var getDomain = Promise._getDomain;\n\t    var util = __webpack_require__(7);\n\t    var tryCatch = util.tryCatch;\n\t    var errorObj = util.errorObj;\n\t    var async = Promise._async;\n\t\n\t    function MappingPromiseArray(promises, fn, limit, _filter) {\n\t        this.constructor$(promises);\n\t        this._promise._captureStackTrace();\n\t        var domain = getDomain();\n\t        this._callback = domain === null ? fn : util.domainBind(domain, fn);\n\t        this._preservedValues = _filter === INTERNAL ? new Array(this.length()) : null;\n\t        this._limit = limit;\n\t        this._inFlight = 0;\n\t        this._queue = [];\n\t        async.invoke(this._asyncInit, this, undefined);\n\t    }\n\t    util.inherits(MappingPromiseArray, PromiseArray);\n\t\n\t    MappingPromiseArray.prototype._asyncInit = function () {\n\t        this._init$(undefined, -2);\n\t    };\n\t\n\t    MappingPromiseArray.prototype._init = function () {};\n\t\n\t    MappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n\t        var values = this._values;\n\t        var length = this.length();\n\t        var preservedValues = this._preservedValues;\n\t        var limit = this._limit;\n\t\n\t        if (index < 0) {\n\t            index = index * -1 - 1;\n\t            values[index] = value;\n\t            if (limit >= 1) {\n\t                this._inFlight--;\n\t                this._drainQueue();\n\t                if (this._isResolved()) return true;\n\t            }\n\t        } else {\n\t            if (limit >= 1 && this._inFlight >= limit) {\n\t                values[index] = value;\n\t                this._queue.push(index);\n\t                return false;\n\t            }\n\t            if (preservedValues !== null) preservedValues[index] = value;\n\t\n\t            var promise = this._promise;\n\t            var callback = this._callback;\n\t            var receiver = promise._boundValue();\n\t            promise._pushContext();\n\t            var ret = tryCatch(callback).call(receiver, value, index, length);\n\t            var promiseCreated = promise._popContext();\n\t            debug.checkForgottenReturns(ret, promiseCreated, preservedValues !== null ? \"Promise.filter\" : \"Promise.map\", promise);\n\t            if (ret === errorObj) {\n\t                this._reject(ret.e);\n\t                return true;\n\t            }\n\t\n\t            var maybePromise = tryConvertToPromise(ret, this._promise);\n\t            if (maybePromise instanceof Promise) {\n\t                maybePromise = maybePromise._target();\n\t                var bitField = maybePromise._bitField;\n\t                ;\n\t                if ((bitField & 50397184) === 0) {\n\t                    if (limit >= 1) this._inFlight++;\n\t                    values[index] = maybePromise;\n\t                    maybePromise._proxy(this, (index + 1) * -1);\n\t                    return false;\n\t                } else if ((bitField & 33554432) !== 0) {\n\t                    ret = maybePromise._value();\n\t                } else if ((bitField & 16777216) !== 0) {\n\t                    this._reject(maybePromise._reason());\n\t                    return true;\n\t                } else {\n\t                    this._cancel();\n\t                    return true;\n\t                }\n\t            }\n\t            values[index] = ret;\n\t        }\n\t        var totalResolved = ++this._totalResolved;\n\t        if (totalResolved >= length) {\n\t            if (preservedValues !== null) {\n\t                this._filter(values, preservedValues);\n\t            } else {\n\t                this._resolve(values);\n\t            }\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t\n\t    MappingPromiseArray.prototype._drainQueue = function () {\n\t        var queue = this._queue;\n\t        var limit = this._limit;\n\t        var values = this._values;\n\t        while (queue.length > 0 && this._inFlight < limit) {\n\t            if (this._isResolved()) return;\n\t            var index = queue.pop();\n\t            this._promiseFulfilled(values[index], index);\n\t        }\n\t    };\n\t\n\t    MappingPromiseArray.prototype._filter = function (booleans, values) {\n\t        var len = values.length;\n\t        var ret = new Array(len);\n\t        var j = 0;\n\t        for (var i = 0; i < len; ++i) {\n\t            if (booleans[i]) ret[j++] = values[i];\n\t        }\n\t        ret.length = j;\n\t        this._resolve(ret);\n\t    };\n\t\n\t    MappingPromiseArray.prototype.preservedValues = function () {\n\t        return this._preservedValues;\n\t    };\n\t\n\t    function map(promises, fn, options, _filter) {\n\t        if (typeof fn !== \"function\") {\n\t            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t\n\t        var limit = 0;\n\t        if (options !== undefined) {\n\t            if ((typeof options === \"undefined\" ? \"undefined\" : _typeof(options)) === \"object\" && options !== null) {\n\t                if (typeof options.concurrency !== \"number\") {\n\t                    return Promise.reject(new TypeError(\"'concurrency' must be a number but it is \" + util.classString(options.concurrency)));\n\t                }\n\t                limit = options.concurrency;\n\t            } else {\n\t                return Promise.reject(new TypeError(\"options argument must be an object but it is \" + util.classString(options)));\n\t            }\n\t        }\n\t        limit = typeof limit === \"number\" && isFinite(limit) && limit >= 1 ? limit : 0;\n\t        return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n\t    }\n\t\n\t    Promise.prototype.map = function (fn, options) {\n\t        return map(this, fn, options, null);\n\t    };\n\t\n\t    Promise.map = function (promises, fn, options, _filter) {\n\t        return map(promises, fn, options, _filter);\n\t    };\n\t};\n\n/***/ },\n/* 27 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar cr = Object.create;\n\tif (cr) {\n\t    var callerCache = cr(null);\n\t    var getterCache = cr(null);\n\t    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n\t}\n\t\n\tmodule.exports = function (Promise) {\n\t    var util = __webpack_require__(7);\n\t    var canEvaluate = util.canEvaluate;\n\t    var isIdentifier = util.isIdentifier;\n\t\n\t    var getMethodCaller;\n\t    var getGetter;\n\t    if (true) {\n\t        var makeMethodCaller = function makeMethodCaller(methodName) {\n\t            return new Function(\"ensureMethod\", \"                                    \\n\\\n\t        return function(obj) {                                               \\n\\\n\t            'use strict'                                                     \\n\\\n\t            var len = this.length;                                           \\n\\\n\t            ensureMethod(obj, 'methodName');                                 \\n\\\n\t            switch(len) {                                                    \\n\\\n\t                case 1: return obj.methodName(this[0]);                      \\n\\\n\t                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n\t                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n\t                case 0: return obj.methodName();                             \\n\\\n\t                default:                                                     \\n\\\n\t                    return obj.methodName.apply(obj, this);                  \\n\\\n\t            }                                                                \\n\\\n\t        };                                                                   \\n\\\n\t        \".replace(/methodName/g, methodName))(ensureMethod);\n\t        };\n\t\n\t        var makeGetter = function makeGetter(propertyName) {\n\t            return new Function(\"obj\", \"                                             \\n\\\n\t        'use strict';                                                        \\n\\\n\t        return obj.propertyName;                                             \\n\\\n\t        \".replace(\"propertyName\", propertyName));\n\t        };\n\t\n\t        var getCompiled = function getCompiled(name, compiler, cache) {\n\t            var ret = cache[name];\n\t            if (typeof ret !== \"function\") {\n\t                if (!isIdentifier(name)) {\n\t                    return null;\n\t                }\n\t                ret = compiler(name);\n\t                cache[name] = ret;\n\t                cache[\" size\"]++;\n\t                if (cache[\" size\"] > 512) {\n\t                    var keys = Object.keys(cache);\n\t                    for (var i = 0; i < 256; ++i) {\n\t                        delete cache[keys[i]];\n\t                    }cache[\" size\"] = keys.length - 256;\n\t                }\n\t            }\n\t            return ret;\n\t        };\n\t\n\t        getMethodCaller = function getMethodCaller(name) {\n\t            return getCompiled(name, makeMethodCaller, callerCache);\n\t        };\n\t\n\t        getGetter = function getGetter(name) {\n\t            return getCompiled(name, makeGetter, getterCache);\n\t        };\n\t    }\n\t\n\t    function ensureMethod(obj, methodName) {\n\t        var fn;\n\t        if (obj != null) fn = obj[methodName];\n\t        if (typeof fn !== \"function\") {\n\t            var message = \"Object \" + util.classString(obj) + \" has no method '\" + util.toString(methodName) + \"'\";\n\t            throw new Promise.TypeError(message);\n\t        }\n\t        return fn;\n\t    }\n\t\n\t    function caller(obj) {\n\t        var methodName = this.pop();\n\t        var fn = ensureMethod(obj, methodName);\n\t        return fn.apply(obj, this);\n\t    }\n\t    Promise.prototype.call = function (methodName) {\n\t        var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0));for (var $_i = 1; $_i < $_len; ++$_i) {\n\t            args[$_i - 1] = arguments[$_i];\n\t        };\n\t        if (true) {\n\t            if (canEvaluate) {\n\t                var maybeCaller = getMethodCaller(methodName);\n\t                if (maybeCaller !== null) {\n\t                    return this._then(maybeCaller, undefined, undefined, args, undefined);\n\t                }\n\t            }\n\t        }\n\t        args.push(methodName);\n\t        return this._then(caller, undefined, undefined, args, undefined);\n\t    };\n\t\n\t    function namedGetter(obj) {\n\t        return obj[this];\n\t    }\n\t    function indexedGetter(obj) {\n\t        var index = +this;\n\t        if (index < 0) index = Math.max(0, index + obj.length);\n\t        return obj[index];\n\t    }\n\t    Promise.prototype.get = function (propertyName) {\n\t        var isIndex = typeof propertyName === \"number\";\n\t        var getter;\n\t        if (!isIndex) {\n\t            if (canEvaluate) {\n\t                var maybeGetter = getGetter(propertyName);\n\t                getter = maybeGetter !== null ? maybeGetter : namedGetter;\n\t            } else {\n\t                getter = namedGetter;\n\t            }\n\t        } else {\n\t            getter = indexedGetter;\n\t        }\n\t        return this._then(getter, undefined, undefined, propertyName, undefined);\n\t    };\n\t};\n\n/***/ },\n/* 28 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug) {\n\t    var util = __webpack_require__(7);\n\t    var TypeError = __webpack_require__(12).TypeError;\n\t    var inherits = __webpack_require__(7).inherits;\n\t    var errorObj = util.errorObj;\n\t    var tryCatch = util.tryCatch;\n\t    var NULL = {};\n\t\n\t    function thrower(e) {\n\t        setTimeout(function () {\n\t            throw e;\n\t        }, 0);\n\t    }\n\t\n\t    function castPreservingDisposable(thenable) {\n\t        var maybePromise = tryConvertToPromise(thenable);\n\t        if (maybePromise !== thenable && typeof thenable._isDisposable === \"function\" && typeof thenable._getDisposer === \"function\" && thenable._isDisposable()) {\n\t            maybePromise._setDisposable(thenable._getDisposer());\n\t        }\n\t        return maybePromise;\n\t    }\n\t    function dispose(resources, inspection) {\n\t        var i = 0;\n\t        var len = resources.length;\n\t        var ret = new Promise(INTERNAL);\n\t        function iterator() {\n\t            if (i >= len) return ret._fulfill();\n\t            var maybePromise = castPreservingDisposable(resources[i++]);\n\t            if (maybePromise instanceof Promise && maybePromise._isDisposable()) {\n\t                try {\n\t                    maybePromise = tryConvertToPromise(maybePromise._getDisposer().tryDispose(inspection), resources.promise);\n\t                } catch (e) {\n\t                    return thrower(e);\n\t                }\n\t                if (maybePromise instanceof Promise) {\n\t                    return maybePromise._then(iterator, thrower, null, null, null);\n\t                }\n\t            }\n\t            iterator();\n\t        }\n\t        iterator();\n\t        return ret;\n\t    }\n\t\n\t    function Disposer(data, promise, context) {\n\t        this._data = data;\n\t        this._promise = promise;\n\t        this._context = context;\n\t    }\n\t\n\t    Disposer.prototype.data = function () {\n\t        return this._data;\n\t    };\n\t\n\t    Disposer.prototype.promise = function () {\n\t        return this._promise;\n\t    };\n\t\n\t    Disposer.prototype.resource = function () {\n\t        if (this.promise().isFulfilled()) {\n\t            return this.promise().value();\n\t        }\n\t        return NULL;\n\t    };\n\t\n\t    Disposer.prototype.tryDispose = function (inspection) {\n\t        var resource = this.resource();\n\t        var context = this._context;\n\t        if (context !== undefined) context._pushContext();\n\t        var ret = resource !== NULL ? this.doDispose(resource, inspection) : null;\n\t        if (context !== undefined) context._popContext();\n\t        this._promise._unsetDisposable();\n\t        this._data = null;\n\t        return ret;\n\t    };\n\t\n\t    Disposer.isDisposer = function (d) {\n\t        return d != null && typeof d.resource === \"function\" && typeof d.tryDispose === \"function\";\n\t    };\n\t\n\t    function FunctionDisposer(fn, promise, context) {\n\t        this.constructor$(fn, promise, context);\n\t    }\n\t    inherits(FunctionDisposer, Disposer);\n\t\n\t    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n\t        var fn = this.data();\n\t        return fn.call(resource, resource, inspection);\n\t    };\n\t\n\t    function maybeUnwrapDisposer(value) {\n\t        if (Disposer.isDisposer(value)) {\n\t            this.resources[this.index]._setDisposable(value);\n\t            return value.promise();\n\t        }\n\t        return value;\n\t    }\n\t\n\t    function ResourceList(length) {\n\t        this.length = length;\n\t        this.promise = null;\n\t        this[length - 1] = null;\n\t    }\n\t\n\t    ResourceList.prototype._resultCancelled = function () {\n\t        var len = this.length;\n\t        for (var i = 0; i < len; ++i) {\n\t            var item = this[i];\n\t            if (item instanceof Promise) {\n\t                item.cancel();\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.using = function () {\n\t        var len = arguments.length;\n\t        if (len < 2) return apiRejection(\"you must pass at least 2 arguments to Promise.using\");\n\t        var fn = arguments[len - 1];\n\t        if (typeof fn !== \"function\") {\n\t            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        var input;\n\t        var spreadArgs = true;\n\t        if (len === 2 && Array.isArray(arguments[0])) {\n\t            input = arguments[0];\n\t            len = input.length;\n\t            spreadArgs = false;\n\t        } else {\n\t            input = arguments;\n\t            len--;\n\t        }\n\t        var resources = new ResourceList(len);\n\t        for (var i = 0; i < len; ++i) {\n\t            var resource = input[i];\n\t            if (Disposer.isDisposer(resource)) {\n\t                var disposer = resource;\n\t                resource = resource.promise();\n\t                resource._setDisposable(disposer);\n\t            } else {\n\t                var maybePromise = tryConvertToPromise(resource);\n\t                if (maybePromise instanceof Promise) {\n\t                    resource = maybePromise._then(maybeUnwrapDisposer, null, null, {\n\t                        resources: resources,\n\t                        index: i\n\t                    }, undefined);\n\t                }\n\t            }\n\t            resources[i] = resource;\n\t        }\n\t\n\t        var reflectedResources = new Array(resources.length);\n\t        for (var i = 0; i < reflectedResources.length; ++i) {\n\t            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n\t        }\n\t\n\t        var resultPromise = Promise.all(reflectedResources).then(function (inspections) {\n\t            for (var i = 0; i < inspections.length; ++i) {\n\t                var inspection = inspections[i];\n\t                if (inspection.isRejected()) {\n\t                    errorObj.e = inspection.error();\n\t                    return errorObj;\n\t                } else if (!inspection.isFulfilled()) {\n\t                    resultPromise.cancel();\n\t                    return;\n\t                }\n\t                inspections[i] = inspection.value();\n\t            }\n\t            promise._pushContext();\n\t\n\t            fn = tryCatch(fn);\n\t            var ret = spreadArgs ? fn.apply(undefined, inspections) : fn(inspections);\n\t            var promiseCreated = promise._popContext();\n\t            debug.checkForgottenReturns(ret, promiseCreated, \"Promise.using\", promise);\n\t            return ret;\n\t        });\n\t\n\t        var promise = resultPromise.lastly(function () {\n\t            var inspection = new Promise.PromiseInspection(resultPromise);\n\t            return dispose(resources, inspection);\n\t        });\n\t        resources.promise = promise;\n\t        promise._setOnCancel(resources);\n\t        return promise;\n\t    };\n\t\n\t    Promise.prototype._setDisposable = function (disposer) {\n\t        this._bitField = this._bitField | 131072;\n\t        this._disposer = disposer;\n\t    };\n\t\n\t    Promise.prototype._isDisposable = function () {\n\t        return (this._bitField & 131072) > 0;\n\t    };\n\t\n\t    Promise.prototype._getDisposer = function () {\n\t        return this._disposer;\n\t    };\n\t\n\t    Promise.prototype._unsetDisposable = function () {\n\t        this._bitField = this._bitField & ~131072;\n\t        this._disposer = undefined;\n\t    };\n\t\n\t    Promise.prototype.disposer = function (fn) {\n\t        if (typeof fn === \"function\") {\n\t            return new FunctionDisposer(fn, this, createContext());\n\t        }\n\t        throw new TypeError();\n\t    };\n\t};\n\n/***/ },\n/* 29 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL, debug) {\n\t    var util = __webpack_require__(7);\n\t    var TimeoutError = Promise.TimeoutError;\n\t\n\t    function HandleWrapper(handle) {\n\t        this.handle = handle;\n\t    }\n\t\n\t    HandleWrapper.prototype._resultCancelled = function () {\n\t        clearTimeout(this.handle);\n\t    };\n\t\n\t    var afterValue = function afterValue(value) {\n\t        return delay(+this).thenReturn(value);\n\t    };\n\t    var delay = Promise.delay = function (ms, value) {\n\t        var ret;\n\t        var handle;\n\t        if (value !== undefined) {\n\t            ret = Promise.resolve(value)._then(afterValue, null, null, ms, undefined);\n\t            if (debug.cancellation() && value instanceof Promise) {\n\t                ret._setOnCancel(value);\n\t            }\n\t        } else {\n\t            ret = new Promise(INTERNAL);\n\t            handle = setTimeout(function () {\n\t                ret._fulfill();\n\t            }, +ms);\n\t            if (debug.cancellation()) {\n\t                ret._setOnCancel(new HandleWrapper(handle));\n\t            }\n\t            ret._captureStackTrace();\n\t        }\n\t        ret._setAsyncGuaranteed();\n\t        return ret;\n\t    };\n\t\n\t    Promise.prototype.delay = function (ms) {\n\t        return delay(ms, this);\n\t    };\n\t\n\t    var afterTimeout = function afterTimeout(promise, message, parent) {\n\t        var err;\n\t        if (typeof message !== \"string\") {\n\t            if (message instanceof Error) {\n\t                err = message;\n\t            } else {\n\t                err = new TimeoutError(\"operation timed out\");\n\t            }\n\t        } else {\n\t            err = new TimeoutError(message);\n\t        }\n\t        util.markAsOriginatingFromRejection(err);\n\t        promise._attachExtraTrace(err);\n\t        promise._reject(err);\n\t\n\t        if (parent != null) {\n\t            parent.cancel();\n\t        }\n\t    };\n\t\n\t    function successClear(value) {\n\t        clearTimeout(this.handle);\n\t        return value;\n\t    }\n\t\n\t    function failureClear(reason) {\n\t        clearTimeout(this.handle);\n\t        throw reason;\n\t    }\n\t\n\t    Promise.prototype.timeout = function (ms, message) {\n\t        ms = +ms;\n\t        var ret, parent;\n\t\n\t        var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n\t            if (ret.isPending()) {\n\t                afterTimeout(ret, message, parent);\n\t            }\n\t        }, ms));\n\t\n\t        if (debug.cancellation()) {\n\t            parent = this.then();\n\t            ret = parent._then(successClear, failureClear, undefined, handleWrapper, undefined);\n\t            ret._setOnCancel(handleWrapper);\n\t        } else {\n\t            ret = this._then(successClear, failureClear, undefined, handleWrapper, undefined);\n\t        }\n\t\n\t        return ret;\n\t    };\n\t};\n\n/***/ },\n/* 30 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug) {\n\t    var errors = __webpack_require__(12);\n\t    var TypeError = errors.TypeError;\n\t    var util = __webpack_require__(7);\n\t    var errorObj = util.errorObj;\n\t    var tryCatch = util.tryCatch;\n\t    var yieldHandlers = [];\n\t\n\t    function promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n\t        for (var i = 0; i < yieldHandlers.length; ++i) {\n\t            traceParent._pushContext();\n\t            var result = tryCatch(yieldHandlers[i])(value);\n\t            traceParent._popContext();\n\t            if (result === errorObj) {\n\t                traceParent._pushContext();\n\t                var ret = Promise.reject(errorObj.e);\n\t                traceParent._popContext();\n\t                return ret;\n\t            }\n\t            var maybePromise = tryConvertToPromise(result, traceParent);\n\t            if (maybePromise instanceof Promise) return maybePromise;\n\t        }\n\t        return null;\n\t    }\n\t\n\t    function PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n\t        if (debug.cancellation()) {\n\t            var internal = new Promise(INTERNAL);\n\t            var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n\t            this._promise = internal.lastly(function () {\n\t                return _finallyPromise;\n\t            });\n\t            internal._captureStackTrace();\n\t            internal._setOnCancel(this);\n\t        } else {\n\t            var promise = this._promise = new Promise(INTERNAL);\n\t            promise._captureStackTrace();\n\t        }\n\t        this._stack = stack;\n\t        this._generatorFunction = generatorFunction;\n\t        this._receiver = receiver;\n\t        this._generator = undefined;\n\t        this._yieldHandlers = typeof yieldHandler === \"function\" ? [yieldHandler].concat(yieldHandlers) : yieldHandlers;\n\t        this._yieldedPromise = null;\n\t        this._cancellationPhase = false;\n\t    }\n\t    util.inherits(PromiseSpawn, Proxyable);\n\t\n\t    PromiseSpawn.prototype._isResolved = function () {\n\t        return this._promise === null;\n\t    };\n\t\n\t    PromiseSpawn.prototype._cleanup = function () {\n\t        this._promise = this._generator = null;\n\t        if (debug.cancellation() && this._finallyPromise !== null) {\n\t            this._finallyPromise._fulfill();\n\t            this._finallyPromise = null;\n\t        }\n\t    };\n\t\n\t    PromiseSpawn.prototype._promiseCancelled = function () {\n\t        if (this._isResolved()) return;\n\t        var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\t\n\t        var result;\n\t        if (!implementsReturn) {\n\t            var reason = new Promise.CancellationError(\"generator .return() sentinel\");\n\t            Promise.coroutine.returnSentinel = reason;\n\t            this._promise._attachExtraTrace(reason);\n\t            this._promise._pushContext();\n\t            result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n\t            this._promise._popContext();\n\t        } else {\n\t            this._promise._pushContext();\n\t            result = tryCatch(this._generator[\"return\"]).call(this._generator, undefined);\n\t            this._promise._popContext();\n\t        }\n\t        this._cancellationPhase = true;\n\t        this._yieldedPromise = null;\n\t        this._continue(result);\n\t    };\n\t\n\t    PromiseSpawn.prototype._promiseFulfilled = function (value) {\n\t        this._yieldedPromise = null;\n\t        this._promise._pushContext();\n\t        var result = tryCatch(this._generator.next).call(this._generator, value);\n\t        this._promise._popContext();\n\t        this._continue(result);\n\t    };\n\t\n\t    PromiseSpawn.prototype._promiseRejected = function (reason) {\n\t        this._yieldedPromise = null;\n\t        this._promise._attachExtraTrace(reason);\n\t        this._promise._pushContext();\n\t        var result = tryCatch(this._generator[\"throw\"]).call(this._generator, reason);\n\t        this._promise._popContext();\n\t        this._continue(result);\n\t    };\n\t\n\t    PromiseSpawn.prototype._resultCancelled = function () {\n\t        if (this._yieldedPromise instanceof Promise) {\n\t            var promise = this._yieldedPromise;\n\t            this._yieldedPromise = null;\n\t            promise.cancel();\n\t        }\n\t    };\n\t\n\t    PromiseSpawn.prototype.promise = function () {\n\t        return this._promise;\n\t    };\n\t\n\t    PromiseSpawn.prototype._run = function () {\n\t        this._generator = this._generatorFunction.call(this._receiver);\n\t        this._receiver = this._generatorFunction = undefined;\n\t        this._promiseFulfilled(undefined);\n\t    };\n\t\n\t    PromiseSpawn.prototype._continue = function (result) {\n\t        var promise = this._promise;\n\t        if (result === errorObj) {\n\t            this._cleanup();\n\t            if (this._cancellationPhase) {\n\t                return promise.cancel();\n\t            } else {\n\t                return promise._rejectCallback(result.e, false);\n\t            }\n\t        }\n\t\n\t        var value = result.value;\n\t        if (result.done === true) {\n\t            this._cleanup();\n\t            if (this._cancellationPhase) {\n\t                return promise.cancel();\n\t            } else {\n\t                return promise._resolveCallback(value);\n\t            }\n\t        } else {\n\t            var maybePromise = tryConvertToPromise(value, this._promise);\n\t            if (!(maybePromise instanceof Promise)) {\n\t                maybePromise = promiseFromYieldHandler(maybePromise, this._yieldHandlers, this._promise);\n\t                if (maybePromise === null) {\n\t                    this._promiseRejected(new TypeError(\"A value %s was yielded that could not be treated as a promise\\n\\n    See http://goo.gl/MqrFmX\\n\\n\".replace(\"%s\", String(value)) + \"From coroutine:\\n\" + this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")));\n\t                    return;\n\t                }\n\t            }\n\t            maybePromise = maybePromise._target();\n\t            var bitField = maybePromise._bitField;\n\t            ;\n\t            if ((bitField & 50397184) === 0) {\n\t                this._yieldedPromise = maybePromise;\n\t                maybePromise._proxy(this, null);\n\t            } else if ((bitField & 33554432) !== 0) {\n\t                Promise._async.invoke(this._promiseFulfilled, this, maybePromise._value());\n\t            } else if ((bitField & 16777216) !== 0) {\n\t                Promise._async.invoke(this._promiseRejected, this, maybePromise._reason());\n\t            } else {\n\t                this._promiseCancelled();\n\t            }\n\t        }\n\t    };\n\t\n\t    Promise.coroutine = function (generatorFunction, options) {\n\t        if (typeof generatorFunction !== \"function\") {\n\t            throw new TypeError(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        var yieldHandler = Object(options).yieldHandler;\n\t        var PromiseSpawn$ = PromiseSpawn;\n\t        var stack = new Error().stack;\n\t        return function () {\n\t            var generator = generatorFunction.apply(this, arguments);\n\t            var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler, stack);\n\t            var ret = spawn.promise();\n\t            spawn._generator = generator;\n\t            spawn._promiseFulfilled(undefined);\n\t            return ret;\n\t        };\n\t    };\n\t\n\t    Promise.coroutine.addYieldHandler = function (fn) {\n\t        if (typeof fn !== \"function\") {\n\t            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        yieldHandlers.push(fn);\n\t    };\n\t\n\t    Promise.spawn = function (generatorFunction) {\n\t        debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n\t        if (typeof generatorFunction !== \"function\") {\n\t            return apiRejection(\"generatorFunction must be a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        var spawn = new PromiseSpawn(generatorFunction, this);\n\t        var ret = spawn.promise();\n\t        spawn._run(Promise.spawn);\n\t        return ret;\n\t    };\n\t};\n\n/***/ },\n/* 31 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise) {\n\t    var util = __webpack_require__(7);\n\t    var async = Promise._async;\n\t    var tryCatch = util.tryCatch;\n\t    var errorObj = util.errorObj;\n\t\n\t    function spreadAdapter(val, nodeback) {\n\t        var promise = this;\n\t        if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n\t        var ret = tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n\t        if (ret === errorObj) {\n\t            async.throwLater(ret.e);\n\t        }\n\t    }\n\t\n\t    function successAdapter(val, nodeback) {\n\t        var promise = this;\n\t        var receiver = promise._boundValue();\n\t        var ret = val === undefined ? tryCatch(nodeback).call(receiver, null) : tryCatch(nodeback).call(receiver, null, val);\n\t        if (ret === errorObj) {\n\t            async.throwLater(ret.e);\n\t        }\n\t    }\n\t    function errorAdapter(reason, nodeback) {\n\t        var promise = this;\n\t        if (!reason) {\n\t            var newReason = new Error(reason + \"\");\n\t            newReason.cause = reason;\n\t            reason = newReason;\n\t        }\n\t        var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n\t        if (ret === errorObj) {\n\t            async.throwLater(ret.e);\n\t        }\n\t    }\n\t\n\t    Promise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback, options) {\n\t        if (typeof nodeback == \"function\") {\n\t            var adapter = successAdapter;\n\t            if (options !== undefined && Object(options).spread) {\n\t                adapter = spreadAdapter;\n\t            }\n\t            this._then(adapter, errorAdapter, undefined, this, nodeback);\n\t        }\n\t        return this;\n\t    };\n\t};\n\n/***/ },\n/* 32 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tmodule.exports = function (Promise, INTERNAL) {\n\t    var THIS = {};\n\t    var util = __webpack_require__(7);\n\t    var nodebackForPromise = __webpack_require__(19);\n\t    var withAppended = util.withAppended;\n\t    var maybeWrapAsError = util.maybeWrapAsError;\n\t    var canEvaluate = util.canEvaluate;\n\t    var TypeError = __webpack_require__(12).TypeError;\n\t    var defaultSuffix = \"Async\";\n\t    var defaultPromisified = { __isPromisified__: true };\n\t    var noCopyProps = [\"arity\", \"length\", \"name\", \"arguments\", \"caller\", \"callee\", \"prototype\", \"__isPromisified__\"];\n\t    var noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\t\n\t    var defaultFilter = function defaultFilter(name) {\n\t        return util.isIdentifier(name) && name.charAt(0) !== \"_\" && name !== \"constructor\";\n\t    };\n\t\n\t    function propsFilter(key) {\n\t        return !noCopyPropsPattern.test(key);\n\t    }\n\t\n\t    function isPromisified(fn) {\n\t        try {\n\t            return fn.__isPromisified__ === true;\n\t        } catch (e) {\n\t            return false;\n\t        }\n\t    }\n\t\n\t    function hasPromisified(obj, key, suffix) {\n\t        var val = util.getDataPropertyOrDefault(obj, key + suffix, defaultPromisified);\n\t        return val ? isPromisified(val) : false;\n\t    }\n\t    function checkValid(ret, suffix, suffixRegexp) {\n\t        for (var i = 0; i < ret.length; i += 2) {\n\t            var key = ret[i];\n\t            if (suffixRegexp.test(key)) {\n\t                var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n\t                for (var j = 0; j < ret.length; j += 2) {\n\t                    if (ret[j] === keyWithoutAsyncSuffix) {\n\t                        throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\n\\n    See http://goo.gl/MqrFmX\\n\".replace(\"%s\", suffix));\n\t                    }\n\t                }\n\t            }\n\t        }\n\t    }\n\t\n\t    function promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n\t        var keys = util.inheritedDataKeys(obj);\n\t        var ret = [];\n\t        for (var i = 0; i < keys.length; ++i) {\n\t            var key = keys[i];\n\t            var value = obj[key];\n\t            var passesDefaultFilter = filter === defaultFilter ? true : defaultFilter(key, value, obj);\n\t            if (typeof value === \"function\" && !isPromisified(value) && !hasPromisified(obj, key, suffix) && filter(key, value, obj, passesDefaultFilter)) {\n\t                ret.push(key, value);\n\t            }\n\t        }\n\t        checkValid(ret, suffix, suffixRegexp);\n\t        return ret;\n\t    }\n\t\n\t    var escapeIdentRegex = function escapeIdentRegex(str) {\n\t        return str.replace(/([$])/, \"\\\\$\");\n\t    };\n\t\n\t    var makeNodePromisifiedEval;\n\t    if (true) {\n\t        var switchCaseArgumentOrder = function switchCaseArgumentOrder(likelyArgumentCount) {\n\t            var ret = [likelyArgumentCount];\n\t            var min = Math.max(0, likelyArgumentCount - 1 - 3);\n\t            for (var i = likelyArgumentCount - 1; i >= min; --i) {\n\t                ret.push(i);\n\t            }\n\t            for (var i = likelyArgumentCount + 1; i <= 3; ++i) {\n\t                ret.push(i);\n\t            }\n\t            return ret;\n\t        };\n\t\n\t        var argumentSequence = function argumentSequence(argumentCount) {\n\t            return util.filledRange(argumentCount, \"_arg\", \"\");\n\t        };\n\t\n\t        var parameterDeclaration = function parameterDeclaration(parameterCount) {\n\t            return util.filledRange(Math.max(parameterCount, 3), \"_arg\", \"\");\n\t        };\n\t\n\t        var parameterCount = function parameterCount(fn) {\n\t            if (typeof fn.length === \"number\") {\n\t                return Math.max(Math.min(fn.length, 1023 + 1), 0);\n\t            }\n\t            return 0;\n\t        };\n\t\n\t        makeNodePromisifiedEval = function makeNodePromisifiedEval(callback, receiver, originalName, fn, _, multiArgs) {\n\t            var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n\t            var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n\t            var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\t\n\t            function generateCallForArgumentCount(count) {\n\t                var args = argumentSequence(count).join(\", \");\n\t                var comma = count > 0 ? \", \" : \"\";\n\t                var ret;\n\t                if (shouldProxyThis) {\n\t                    ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n\t                } else {\n\t                    ret = receiver === undefined ? \"ret = callback({{args}}, nodeback); break;\\n\" : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n\t                }\n\t                return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n\t            }\n\t\n\t            function generateArgumentSwitchCase() {\n\t                var ret = \"\";\n\t                for (var i = 0; i < argumentOrder.length; ++i) {\n\t                    ret += \"case \" + argumentOrder[i] + \":\" + generateCallForArgumentCount(argumentOrder[i]);\n\t                }\n\t\n\t                ret += \"                                                             \\n\\\n\t        default:                                                             \\n\\\n\t            var args = new Array(len + 1);                                   \\n\\\n\t            var i = 0;                                                       \\n\\\n\t            for (var i = 0; i < len; ++i) {                                  \\n\\\n\t               args[i] = arguments[i];                                       \\n\\\n\t            }                                                                \\n\\\n\t            args[i] = nodeback;                                              \\n\\\n\t            [CodeForCall]                                                    \\n\\\n\t            break;                                                           \\n\\\n\t        \".replace(\"[CodeForCall]\", shouldProxyThis ? \"ret = callback.apply(this, args);\\n\" : \"ret = callback.apply(receiver, args);\\n\");\n\t                return ret;\n\t            }\n\t\n\t            var getFunctionCode = typeof callback === \"string\" ? \"this != null ? this['\" + callback + \"'] : fn\" : \"fn\";\n\t            var body = \"'use strict';                                                \\n\\\n\t        var ret = function (Parameters) {                                    \\n\\\n\t            'use strict';                                                    \\n\\\n\t            var len = arguments.length;                                      \\n\\\n\t            var promise = new Promise(INTERNAL);                             \\n\\\n\t            promise._captureStackTrace();                                    \\n\\\n\t            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n\t            var ret;                                                         \\n\\\n\t            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n\t            switch(len) {                                                    \\n\\\n\t                [CodeForSwitchCase]                                          \\n\\\n\t            }                                                                \\n\\\n\t            if (ret === errorObj) {                                          \\n\\\n\t                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n\t            }                                                                \\n\\\n\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n\t            return promise;                                                  \\n\\\n\t        };                                                                   \\n\\\n\t        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n\t        return ret;                                                          \\n\\\n\t    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase()).replace(\"[GetFunctionCode]\", getFunctionCode);\n\t            body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n\t            return new Function(\"Promise\", \"fn\", \"receiver\", \"withAppended\", \"maybeWrapAsError\", \"nodebackForPromise\", \"tryCatch\", \"errorObj\", \"notEnumerableProp\", \"INTERNAL\", body)(Promise, fn, receiver, withAppended, maybeWrapAsError, nodebackForPromise, util.tryCatch, util.errorObj, util.notEnumerableProp, INTERNAL);\n\t        };\n\t    }\n\t\n\t    function makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n\t        var defaultThis = function () {\n\t            return this;\n\t        }();\n\t        var method = callback;\n\t        if (typeof method === \"string\") {\n\t            callback = fn;\n\t        }\n\t        function promisified() {\n\t            var _receiver = receiver;\n\t            if (receiver === THIS) _receiver = this;\n\t            var promise = new Promise(INTERNAL);\n\t            promise._captureStackTrace();\n\t            var cb = typeof method === \"string\" && this !== defaultThis ? this[method] : callback;\n\t            var fn = nodebackForPromise(promise, multiArgs);\n\t            try {\n\t                cb.apply(_receiver, withAppended(arguments, fn));\n\t            } catch (e) {\n\t                promise._rejectCallback(maybeWrapAsError(e), true, true);\n\t            }\n\t            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n\t            return promise;\n\t        }\n\t        util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n\t        return promisified;\n\t    }\n\t\n\t    var makeNodePromisified = canEvaluate ? makeNodePromisifiedEval : makeNodePromisifiedClosure;\n\t\n\t    function promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n\t        var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n\t        var methods = promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\t\n\t        for (var i = 0, len = methods.length; i < len; i += 2) {\n\t            var key = methods[i];\n\t            var fn = methods[i + 1];\n\t            var promisifiedKey = key + suffix;\n\t            if (promisifier === makeNodePromisified) {\n\t                obj[promisifiedKey] = makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n\t            } else {\n\t                var promisified = promisifier(fn, function () {\n\t                    return makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n\t                });\n\t                util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n\t                obj[promisifiedKey] = promisified;\n\t            }\n\t        }\n\t        util.toFastProperties(obj);\n\t        return obj;\n\t    }\n\t\n\t    function promisify(callback, receiver, multiArgs) {\n\t        return makeNodePromisified(callback, receiver, undefined, callback, null, multiArgs);\n\t    }\n\t\n\t    Promise.promisify = function (fn, options) {\n\t        if (typeof fn !== \"function\") {\n\t            throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        if (isPromisified(fn)) {\n\t            return fn;\n\t        }\n\t        options = Object(options);\n\t        var receiver = options.context === undefined ? THIS : options.context;\n\t        var multiArgs = !!options.multiArgs;\n\t        var ret = promisify(fn, receiver, multiArgs);\n\t        util.copyDescriptors(fn, ret, propsFilter);\n\t        return ret;\n\t    };\n\t\n\t    Promise.promisifyAll = function (target, options) {\n\t        if (typeof target !== \"function\" && (typeof target === \"undefined\" ? \"undefined\" : _typeof(target)) !== \"object\") {\n\t            throw new TypeError(\"the target of promisifyAll must be an object or a function\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        options = Object(options);\n\t        var multiArgs = !!options.multiArgs;\n\t        var suffix = options.suffix;\n\t        if (typeof suffix !== \"string\") suffix = defaultSuffix;\n\t        var filter = options.filter;\n\t        if (typeof filter !== \"function\") filter = defaultFilter;\n\t        var promisifier = options.promisifier;\n\t        if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\t\n\t        if (!util.isIdentifier(suffix)) {\n\t            throw new RangeError(\"suffix must be a valid identifier\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t\n\t        var keys = util.inheritedDataKeys(target);\n\t        for (var i = 0; i < keys.length; ++i) {\n\t            var value = target[keys[i]];\n\t            if (keys[i] !== \"constructor\" && util.isClass(value)) {\n\t                promisifyAll(value.prototype, suffix, filter, promisifier, multiArgs);\n\t                promisifyAll(value, suffix, filter, promisifier, multiArgs);\n\t            }\n\t        }\n\t\n\t        return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n\t    };\n\t};\n\n/***/ },\n/* 33 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, tryConvertToPromise, apiRejection) {\n\t    var util = __webpack_require__(7);\n\t    var isObject = util.isObject;\n\t    var es5 = __webpack_require__(8);\n\t    var Es6Map;\n\t    if (typeof Map === \"function\") Es6Map = Map;\n\t\n\t    var mapToEntries = function () {\n\t        var index = 0;\n\t        var size = 0;\n\t\n\t        function extractEntry(value, key) {\n\t            this[index] = value;\n\t            this[index + size] = key;\n\t            index++;\n\t        }\n\t\n\t        return function mapToEntries(map) {\n\t            size = map.size;\n\t            index = 0;\n\t            var ret = new Array(map.size * 2);\n\t            map.forEach(extractEntry, ret);\n\t            return ret;\n\t        };\n\t    }();\n\t\n\t    var entriesToMap = function entriesToMap(entries) {\n\t        var ret = new Es6Map();\n\t        var length = entries.length / 2 | 0;\n\t        for (var i = 0; i < length; ++i) {\n\t            var key = entries[length + i];\n\t            var value = entries[i];\n\t            ret.set(key, value);\n\t        }\n\t        return ret;\n\t    };\n\t\n\t    function PropertiesPromiseArray(obj) {\n\t        var isMap = false;\n\t        var entries;\n\t        if (Es6Map !== undefined && obj instanceof Es6Map) {\n\t            entries = mapToEntries(obj);\n\t            isMap = true;\n\t        } else {\n\t            var keys = es5.keys(obj);\n\t            var len = keys.length;\n\t            entries = new Array(len * 2);\n\t            for (var i = 0; i < len; ++i) {\n\t                var key = keys[i];\n\t                entries[i] = obj[key];\n\t                entries[i + len] = key;\n\t            }\n\t        }\n\t        this.constructor$(entries);\n\t        this._isMap = isMap;\n\t        this._init$(undefined, isMap ? -6 : -3);\n\t    }\n\t    util.inherits(PropertiesPromiseArray, PromiseArray);\n\t\n\t    PropertiesPromiseArray.prototype._init = function () {};\n\t\n\t    PropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n\t        this._values[index] = value;\n\t        var totalResolved = ++this._totalResolved;\n\t        if (totalResolved >= this._length) {\n\t            var val;\n\t            if (this._isMap) {\n\t                val = entriesToMap(this._values);\n\t            } else {\n\t                val = {};\n\t                var keyOffset = this.length();\n\t                for (var i = 0, len = this.length(); i < len; ++i) {\n\t                    val[this._values[i + keyOffset]] = this._values[i];\n\t                }\n\t            }\n\t            this._resolve(val);\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t\n\t    PropertiesPromiseArray.prototype.shouldCopyValues = function () {\n\t        return false;\n\t    };\n\t\n\t    PropertiesPromiseArray.prototype.getActualLength = function (len) {\n\t        return len >> 1;\n\t    };\n\t\n\t    function props(promises) {\n\t        var ret;\n\t        var castValue = tryConvertToPromise(promises);\n\t\n\t        if (!isObject(castValue)) {\n\t            return apiRejection(\"cannot await properties of a non-object\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        } else if (castValue instanceof Promise) {\n\t            ret = castValue._then(Promise.props, undefined, undefined, undefined, undefined);\n\t        } else {\n\t            ret = new PropertiesPromiseArray(castValue).promise();\n\t        }\n\t\n\t        if (castValue instanceof Promise) {\n\t            ret._propagateFrom(castValue, 2);\n\t        }\n\t        return ret;\n\t    }\n\t\n\t    Promise.prototype.props = function () {\n\t        return props(this);\n\t    };\n\t\n\t    Promise.props = function (promises) {\n\t        return props(promises);\n\t    };\n\t};\n\n/***/ },\n/* 34 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL, tryConvertToPromise, apiRejection) {\n\t    var util = __webpack_require__(7);\n\t\n\t    var raceLater = function raceLater(promise) {\n\t        return promise.then(function (array) {\n\t            return race(array, promise);\n\t        });\n\t    };\n\t\n\t    function race(promises, parent) {\n\t        var maybePromise = tryConvertToPromise(promises);\n\t\n\t        if (maybePromise instanceof Promise) {\n\t            return raceLater(maybePromise);\n\t        } else {\n\t            promises = util.asArray(promises);\n\t            if (promises === null) return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n\t        }\n\t\n\t        var ret = new Promise(INTERNAL);\n\t        if (parent !== undefined) {\n\t            ret._propagateFrom(parent, 3);\n\t        }\n\t        var fulfill = ret._fulfill;\n\t        var reject = ret._reject;\n\t        for (var i = 0, len = promises.length; i < len; ++i) {\n\t            var val = promises[i];\n\t\n\t            if (val === undefined && !(i in promises)) {\n\t                continue;\n\t            }\n\t\n\t            Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n\t        }\n\t        return ret;\n\t    }\n\t\n\t    Promise.race = function (promises) {\n\t        return race(promises, undefined);\n\t    };\n\t\n\t    Promise.prototype.race = function () {\n\t        return race(this, undefined);\n\t    };\n\t};\n\n/***/ },\n/* 35 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug) {\n\t    var getDomain = Promise._getDomain;\n\t    var util = __webpack_require__(7);\n\t    var tryCatch = util.tryCatch;\n\t\n\t    function ReductionPromiseArray(promises, fn, initialValue, _each) {\n\t        this.constructor$(promises);\n\t        var domain = getDomain();\n\t        this._fn = domain === null ? fn : util.domainBind(domain, fn);\n\t        if (initialValue !== undefined) {\n\t            initialValue = Promise.resolve(initialValue);\n\t            initialValue._attachCancellationCallback(this);\n\t        }\n\t        this._initialValue = initialValue;\n\t        this._currentCancellable = null;\n\t        if (_each === INTERNAL) {\n\t            this._eachValues = Array(this._length);\n\t        } else if (_each === 0) {\n\t            this._eachValues = null;\n\t        } else {\n\t            this._eachValues = undefined;\n\t        }\n\t        this._promise._captureStackTrace();\n\t        this._init$(undefined, -5);\n\t    }\n\t    util.inherits(ReductionPromiseArray, PromiseArray);\n\t\n\t    ReductionPromiseArray.prototype._gotAccum = function (accum) {\n\t        if (this._eachValues !== undefined && this._eachValues !== null && accum !== INTERNAL) {\n\t            this._eachValues.push(accum);\n\t        }\n\t    };\n\t\n\t    ReductionPromiseArray.prototype._eachComplete = function (value) {\n\t        if (this._eachValues !== null) {\n\t            this._eachValues.push(value);\n\t        }\n\t        return this._eachValues;\n\t    };\n\t\n\t    ReductionPromiseArray.prototype._init = function () {};\n\t\n\t    ReductionPromiseArray.prototype._resolveEmptyArray = function () {\n\t        this._resolve(this._eachValues !== undefined ? this._eachValues : this._initialValue);\n\t    };\n\t\n\t    ReductionPromiseArray.prototype.shouldCopyValues = function () {\n\t        return false;\n\t    };\n\t\n\t    ReductionPromiseArray.prototype._resolve = function (value) {\n\t        this._promise._resolveCallback(value);\n\t        this._values = null;\n\t    };\n\t\n\t    ReductionPromiseArray.prototype._resultCancelled = function (sender) {\n\t        if (sender === this._initialValue) return this._cancel();\n\t        if (this._isResolved()) return;\n\t        this._resultCancelled$();\n\t        if (this._currentCancellable instanceof Promise) {\n\t            this._currentCancellable.cancel();\n\t        }\n\t        if (this._initialValue instanceof Promise) {\n\t            this._initialValue.cancel();\n\t        }\n\t    };\n\t\n\t    ReductionPromiseArray.prototype._iterate = function (values) {\n\t        this._values = values;\n\t        var value;\n\t        var i;\n\t        var length = values.length;\n\t        if (this._initialValue !== undefined) {\n\t            value = this._initialValue;\n\t            i = 0;\n\t        } else {\n\t            value = Promise.resolve(values[0]);\n\t            i = 1;\n\t        }\n\t\n\t        this._currentCancellable = value;\n\t\n\t        if (!value.isRejected()) {\n\t            for (; i < length; ++i) {\n\t                var ctx = {\n\t                    accum: null,\n\t                    value: values[i],\n\t                    index: i,\n\t                    length: length,\n\t                    array: this\n\t                };\n\t                value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n\t            }\n\t        }\n\t\n\t        if (this._eachValues !== undefined) {\n\t            value = value._then(this._eachComplete, undefined, undefined, this, undefined);\n\t        }\n\t        value._then(completed, completed, undefined, value, this);\n\t    };\n\t\n\t    Promise.prototype.reduce = function (fn, initialValue) {\n\t        return reduce(this, fn, initialValue, null);\n\t    };\n\t\n\t    Promise.reduce = function (promises, fn, initialValue, _each) {\n\t        return reduce(promises, fn, initialValue, _each);\n\t    };\n\t\n\t    function completed(valueOrReason, array) {\n\t        if (this.isFulfilled()) {\n\t            array._resolve(valueOrReason);\n\t        } else {\n\t            array._reject(valueOrReason);\n\t        }\n\t    }\n\t\n\t    function reduce(promises, fn, initialValue, _each) {\n\t        if (typeof fn !== \"function\") {\n\t            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n\t        }\n\t        var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n\t        return array.promise();\n\t    }\n\t\n\t    function gotAccum(accum) {\n\t        this.accum = accum;\n\t        this.array._gotAccum(accum);\n\t        var value = tryConvertToPromise(this.value, this.array._promise);\n\t        if (value instanceof Promise) {\n\t            this.array._currentCancellable = value;\n\t            return value._then(gotValue, undefined, undefined, this, undefined);\n\t        } else {\n\t            return gotValue.call(this, value);\n\t        }\n\t    }\n\t\n\t    function gotValue(value) {\n\t        var array = this.array;\n\t        var promise = array._promise;\n\t        var fn = tryCatch(array._fn);\n\t        promise._pushContext();\n\t        var ret;\n\t        if (array._eachValues !== undefined) {\n\t            ret = fn.call(promise._boundValue(), value, this.index, this.length);\n\t        } else {\n\t            ret = fn.call(promise._boundValue(), this.accum, value, this.index, this.length);\n\t        }\n\t        if (ret instanceof Promise) {\n\t            array._currentCancellable = ret;\n\t        }\n\t        var promiseCreated = promise._popContext();\n\t        debug.checkForgottenReturns(ret, promiseCreated, array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\", promise);\n\t        return ret;\n\t    }\n\t};\n\n/***/ },\n/* 36 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, debug) {\n\t    var PromiseInspection = Promise.PromiseInspection;\n\t    var util = __webpack_require__(7);\n\t\n\t    function SettledPromiseArray(values) {\n\t        this.constructor$(values);\n\t    }\n\t    util.inherits(SettledPromiseArray, PromiseArray);\n\t\n\t    SettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n\t        this._values[index] = inspection;\n\t        var totalResolved = ++this._totalResolved;\n\t        if (totalResolved >= this._length) {\n\t            this._resolve(this._values);\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t\n\t    SettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n\t        var ret = new PromiseInspection();\n\t        ret._bitField = 33554432;\n\t        ret._settledValueField = value;\n\t        return this._promiseResolved(index, ret);\n\t    };\n\t    SettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n\t        var ret = new PromiseInspection();\n\t        ret._bitField = 16777216;\n\t        ret._settledValueField = reason;\n\t        return this._promiseResolved(index, ret);\n\t    };\n\t\n\t    Promise.settle = function (promises) {\n\t        debug.deprecated(\".settle()\", \".reflect()\");\n\t        return new SettledPromiseArray(promises).promise();\n\t    };\n\t\n\t    Promise.prototype.settle = function () {\n\t        return Promise.settle(this);\n\t    };\n\t};\n\n/***/ },\n/* 37 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, PromiseArray, apiRejection) {\n\t    var util = __webpack_require__(7);\n\t    var RangeError = __webpack_require__(12).RangeError;\n\t    var AggregateError = __webpack_require__(12).AggregateError;\n\t    var isArray = util.isArray;\n\t    var CANCELLATION = {};\n\t\n\t    function SomePromiseArray(values) {\n\t        this.constructor$(values);\n\t        this._howMany = 0;\n\t        this._unwrap = false;\n\t        this._initialized = false;\n\t    }\n\t    util.inherits(SomePromiseArray, PromiseArray);\n\t\n\t    SomePromiseArray.prototype._init = function () {\n\t        if (!this._initialized) {\n\t            return;\n\t        }\n\t        if (this._howMany === 0) {\n\t            this._resolve([]);\n\t            return;\n\t        }\n\t        this._init$(undefined, -5);\n\t        var isArrayResolved = isArray(this._values);\n\t        if (!this._isResolved() && isArrayResolved && this._howMany > this._canPossiblyFulfill()) {\n\t            this._reject(this._getRangeError(this.length()));\n\t        }\n\t    };\n\t\n\t    SomePromiseArray.prototype.init = function () {\n\t        this._initialized = true;\n\t        this._init();\n\t    };\n\t\n\t    SomePromiseArray.prototype.setUnwrap = function () {\n\t        this._unwrap = true;\n\t    };\n\t\n\t    SomePromiseArray.prototype.howMany = function () {\n\t        return this._howMany;\n\t    };\n\t\n\t    SomePromiseArray.prototype.setHowMany = function (count) {\n\t        this._howMany = count;\n\t    };\n\t\n\t    SomePromiseArray.prototype._promiseFulfilled = function (value) {\n\t        this._addFulfilled(value);\n\t        if (this._fulfilled() === this.howMany()) {\n\t            this._values.length = this.howMany();\n\t            if (this.howMany() === 1 && this._unwrap) {\n\t                this._resolve(this._values[0]);\n\t            } else {\n\t                this._resolve(this._values);\n\t            }\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t    SomePromiseArray.prototype._promiseRejected = function (reason) {\n\t        this._addRejected(reason);\n\t        return this._checkOutcome();\n\t    };\n\t\n\t    SomePromiseArray.prototype._promiseCancelled = function () {\n\t        if (this._values instanceof Promise || this._values == null) {\n\t            return this._cancel();\n\t        }\n\t        this._addRejected(CANCELLATION);\n\t        return this._checkOutcome();\n\t    };\n\t\n\t    SomePromiseArray.prototype._checkOutcome = function () {\n\t        if (this.howMany() > this._canPossiblyFulfill()) {\n\t            var e = new AggregateError();\n\t            for (var i = this.length(); i < this._values.length; ++i) {\n\t                if (this._values[i] !== CANCELLATION) {\n\t                    e.push(this._values[i]);\n\t                }\n\t            }\n\t            if (e.length > 0) {\n\t                this._reject(e);\n\t            } else {\n\t                this._cancel();\n\t            }\n\t            return true;\n\t        }\n\t        return false;\n\t    };\n\t\n\t    SomePromiseArray.prototype._fulfilled = function () {\n\t        return this._totalResolved;\n\t    };\n\t\n\t    SomePromiseArray.prototype._rejected = function () {\n\t        return this._values.length - this.length();\n\t    };\n\t\n\t    SomePromiseArray.prototype._addRejected = function (reason) {\n\t        this._values.push(reason);\n\t    };\n\t\n\t    SomePromiseArray.prototype._addFulfilled = function (value) {\n\t        this._values[this._totalResolved++] = value;\n\t    };\n\t\n\t    SomePromiseArray.prototype._canPossiblyFulfill = function () {\n\t        return this.length() - this._rejected();\n\t    };\n\t\n\t    SomePromiseArray.prototype._getRangeError = function (count) {\n\t        var message = \"Input array must contain at least \" + this._howMany + \" items but contains only \" + count + \" items\";\n\t        return new RangeError(message);\n\t    };\n\t\n\t    SomePromiseArray.prototype._resolveEmptyArray = function () {\n\t        this._reject(this._getRangeError(0));\n\t    };\n\t\n\t    function some(promises, howMany) {\n\t        if ((howMany | 0) !== howMany || howMany < 0) {\n\t            return apiRejection(\"expecting a positive integer\\n\\n    See http://goo.gl/MqrFmX\\n\");\n\t        }\n\t        var ret = new SomePromiseArray(promises);\n\t        var promise = ret.promise();\n\t        ret.setHowMany(howMany);\n\t        ret.init();\n\t        return promise;\n\t    }\n\t\n\t    Promise.some = function (promises, howMany) {\n\t        return some(promises, howMany);\n\t    };\n\t\n\t    Promise.prototype.some = function (howMany) {\n\t        return some(this, howMany);\n\t    };\n\t\n\t    Promise._SomePromiseArray = SomePromiseArray;\n\t};\n\n/***/ },\n/* 38 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL) {\n\t    var PromiseMap = Promise.map;\n\t\n\t    Promise.prototype.filter = function (fn, options) {\n\t        return PromiseMap(this, fn, options, INTERNAL);\n\t    };\n\t\n\t    Promise.filter = function (promises, fn, options) {\n\t        return PromiseMap(promises, fn, options, INTERNAL);\n\t    };\n\t};\n\n/***/ },\n/* 39 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise, INTERNAL) {\n\t    var PromiseReduce = Promise.reduce;\n\t    var PromiseAll = Promise.all;\n\t\n\t    function promiseAllThis() {\n\t        return PromiseAll(this);\n\t    }\n\t\n\t    function PromiseMapSeries(promises, fn) {\n\t        return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n\t    }\n\t\n\t    Promise.prototype.each = function (fn) {\n\t        return PromiseReduce(this, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, this, undefined);\n\t    };\n\t\n\t    Promise.prototype.mapSeries = function (fn) {\n\t        return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n\t    };\n\t\n\t    Promise.each = function (promises, fn) {\n\t        return PromiseReduce(promises, fn, INTERNAL, 0)._then(promiseAllThis, undefined, undefined, promises, undefined);\n\t    };\n\t\n\t    Promise.mapSeries = PromiseMapSeries;\n\t};\n\n/***/ },\n/* 40 */\n/***/ function(module, exports) {\n\n\t\"use strict\";\n\t\n\tmodule.exports = function (Promise) {\n\t    var SomePromiseArray = Promise._SomePromiseArray;\n\t    function any(promises) {\n\t        var ret = new SomePromiseArray(promises);\n\t        var promise = ret.promise();\n\t        ret.setHowMany(1);\n\t        ret.setUnwrap();\n\t        ret.init();\n\t        return promise;\n\t    }\n\t\n\t    Promise.any = function (promises) {\n\t        return any(promises);\n\t    };\n\t\n\t    Promise.prototype.any = function () {\n\t        return any(this);\n\t    };\n\t};\n\n/***/ },\n/* 41 */\n/***/ function(module, exports, __webpack_require__) {\n\n\t\"use strict\";\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\tvar _slicedToArray = function () { function sliceIterator(arr, i) { var _arr = []; var _n = true; var _d = false; var _e = undefined; try { for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) { _arr.push(_s.value); if (i && _arr.length === i) break; } } catch (err) { _d = true; _e = err; } finally { try { if (!_n && _i[\"return\"]) _i[\"return\"](); } finally { if (_d) throw _e; } } return _arr; } return function (arr, i) { if (Array.isArray(arr)) { return arr; } else if (Symbol.iterator in Object(arr)) { return sliceIterator(arr, i); } else { throw new TypeError(\"Invalid attempt to destructure non-iterable instance\"); } }; }();\n\t\n\tfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\t\n\tfunction _toConsumableArray(arr) { if (Array.isArray(arr)) { for (var i = 0, arr2 = Array(arr.length); i < arr.length; i++) { arr2[i] = arr[i]; } return arr2; } else { return Array.from(arr); } }\n\t\n\tObject.defineProperty(exports, \"__esModule\", { value: true });\n\tvar Promise = __webpack_require__(5);\n\tvar Papa = __webpack_require__(42);\n\tfunction ddfCsvReader(path, fileReader, logger) {\n\t    var internalConcepts = [{ concept: 'concept', concept_type: 'string', domain: null }, { concept: 'concept_type', concept_type: 'string', domain: null }];\n\t    var operators = new Map([['$and', function (row, predicates) {\n\t        return predicates.every(function (p) {\n\t            return applyFilterRow(row, p);\n\t        });\n\t    }], ['$or', function (row, predicates) {\n\t        return predicates.some(function (p) {\n\t            return applyFilterRow(row, p);\n\t        });\n\t    }], ['$not', function (row, predicate) {\n\t        return !applyFilterRow(row, predicate);\n\t    }], ['$nor', function (row, predicates) {\n\t        return !predicates.some(function (p) {\n\t            return applyFilterRow(row, p);\n\t        });\n\t    }], ['$eq', function (rowValue, filterValue) {\n\t        return rowValue === filterValue;\n\t    }], ['$ne', function (rowValue, filterValue) {\n\t        return rowValue !== filterValue;\n\t    }], ['$gt', function (rowValue, filterValue) {\n\t        return rowValue > filterValue;\n\t    }], ['$gte', function (rowValue, filterValue) {\n\t        return rowValue >= filterValue;\n\t    }], ['$lt', function (rowValue, filterValue) {\n\t        return rowValue < filterValue;\n\t    }], ['$lte', function (rowValue, filterValue) {\n\t        return rowValue <= filterValue;\n\t    }], ['$in', function (rowValue, filterValue) {\n\t        return filterValue.has(rowValue);\n\t    }], ['$nin', function (rowValue, filterValue) {\n\t        return !filterValue.has(rowValue);\n\t    }]]);\n\t    var datapackagePath = getDatapackagePath(path);\n\t    var basePath = getBasePath(datapackagePath);\n\t    var datapackagePromise = loadDataPackage(datapackagePath);\n\t    var conceptsPromise = datapackagePromise.then(loadConcepts);\n\t    var keyValueLookup = new Map();\n\t    var resourcesLookup = new Map();\n\t    var conceptsLookup = new Map();\n\t    var datapackage = void 0;\n\t    function getDatapackagePath(pathParam) {\n\t        if (!pathParam.endsWith('datapackage.json')) {\n\t            if (!pathParam.endsWith('/')) {\n\t                pathParam = pathParam + '/';\n\t            }\n\t            pathParam = pathParam + 'datapackage.json';\n\t        }\n\t        return pathParam;\n\t    }\n\t    function getBasePath(datapackagePathParam) {\n\t        var dpPathSplit = datapackagePathParam.split('/');\n\t        dpPathSplit.pop();\n\t        return dpPathSplit.join('/') + '/';\n\t    }\n\t    function loadDataPackage(pathParam) {\n\t        return new Promise(function (resolve, reject) {\n\t            fileReader.readText(pathParam, function (err, data) {\n\t                if (err) {\n\t                    return reject(err);\n\t                }\n\t                try {\n\t                    datapackage = JSON.parse(data);\n\t                } catch (parseErr) {\n\t                    return reject(parseErr);\n\t                }\n\t                buildResourcesLookup(datapackage);\n\t                buildKeyValueLookup(datapackage);\n\t                resolve(datapackage);\n\t            });\n\t        });\n\t    }\n\t    function loadConcepts() {\n\t        setConceptsLookup(internalConcepts);\n\t        var conceptQuery = {\n\t            select: { key: ['concept'], value: ['concept_type', 'domain'] },\n\t            from: 'concepts'\n\t        };\n\t        return queryData(conceptQuery).then(buildConceptsLookup).then(reparseConcepts);\n\t    }\n\t    function buildConceptsLookup(concepts) {\n\t        var entitySetMembershipConcepts = concepts.filter(function (concept) {\n\t            return concept.concept_type === 'entity_set';\n\t        }).map(function (concept) {\n\t            return {\n\t                concept: 'is--' + concept.concept,\n\t                concept_type: 'boolean',\n\t                domain: null\n\t            };\n\t        });\n\t        concepts = concepts.concat(entitySetMembershipConcepts).concat(internalConcepts);\n\t        setConceptsLookup(concepts);\n\t        return conceptsLookup;\n\t    }\n\t    function reparseConcepts() {\n\t        var parsingFunctions = new Map([['boolean', function (str) {\n\t            return str === 'true' || str === 'TRUE';\n\t        }], ['measure', function (str) {\n\t            return parseFloat(str);\n\t        }]]);\n\t        var resources = getResources(['concept']);\n\t        var resourceUpdates = [].concat(_toConsumableArray(resources)).map(function (resource) {\n\t            return resource.data.then(function (response) {\n\t                var resourceConcepts = Object.keys(response.data[0]);\n\t                var parsingConcepts = new Map();\n\t                resourceConcepts.forEach(function (concept) {\n\t                    var type = conceptsLookup.get(concept).concept_type;\n\t                    var fn = parsingFunctions.get(type);\n\t                    if (fn) {\n\t                        parsingConcepts.set(concept, fn);\n\t                    }\n\t                });\n\t                return response.data.forEach(function (row) {\n\t                    var _iteratorNormalCompletion = true;\n\t                    var _didIteratorError = false;\n\t                    var _iteratorError = undefined;\n\t\n\t                    try {\n\t                        for (var _iterator = parsingConcepts[Symbol.iterator](), _step; !(_iteratorNormalCompletion = (_step = _iterator.next()).done); _iteratorNormalCompletion = true) {\n\t                            var _step$value = _slicedToArray(_step.value, 2),\n\t                                concept = _step$value[0],\n\t                                parseFn = _step$value[1];\n\t\n\t                            row[concept] = parseFn(row[concept]);\n\t                        }\n\t                    } catch (err) {\n\t                        _didIteratorError = true;\n\t                        _iteratorError = err;\n\t                    } finally {\n\t                        try {\n\t                            if (!_iteratorNormalCompletion && _iterator.return) {\n\t                                _iterator.return();\n\t                            }\n\t                        } finally {\n\t                            if (_didIteratorError) {\n\t                                throw _iteratorError;\n\t                            }\n\t                        }\n\t                    }\n\t                });\n\t            });\n\t        });\n\t        return Promise.all(resourceUpdates);\n\t    }\n\t    function setConceptsLookup(concepts) {\n\t        conceptsLookup.clear();\n\t        concepts.forEach(function (row) {\n\t            return conceptsLookup.set(row.concept, row);\n\t        });\n\t    }\n\t    function query(queryParam) {\n\t        if (isSchemaQuery(queryParam)) {\n\t            return datapackagePromise.then(function () {\n\t                return querySchema(queryParam);\n\t            });\n\t        } else {\n\t            return conceptsPromise.then(function () {\n\t                return queryData(queryParam);\n\t            });\n\t        }\n\t    }\n\t    function isSchemaQuery(queryParam) {\n\t        var fromClause = queryParam.from || '';\n\t        return fromClause.split('.')[1] === 'schema';\n\t    }\n\t    function queryData(queryParam) {\n\t        var _queryParam$select = queryParam.select,\n\t            _queryParam$select$ke = _queryParam$select.key,\n\t            key = _queryParam$select$ke === undefined ? [] : _queryParam$select$ke,\n\t            _queryParam$select$va = _queryParam$select.value,\n\t            value = _queryParam$select$va === undefined ? [] : _queryParam$select$va,\n\t            _queryParam$from = queryParam.from,\n\t            from = _queryParam$from === undefined ? '' : _queryParam$from,\n\t            _queryParam$where = queryParam.where,\n\t            where = _queryParam$where === undefined ? {} : _queryParam$where,\n\t            _queryParam$join = queryParam.join,\n\t            join = _queryParam$join === undefined ? {} : _queryParam$join,\n\t            _queryParam$order_by = queryParam.order_by,\n\t            order_by = _queryParam$order_by === undefined ? [] : _queryParam$order_by,\n\t            language = queryParam.language;\n\t\n\t        var select = { key: key, value: value };\n\t        var projection = new Set(select.key.concat(select.value));\n\t        var filterFields = getFilterFields(where).filter(function (field) {\n\t            return !projection.has(field);\n\t        });\n\t        var resourcesPromise = loadResources(select.key, [].concat(_toConsumableArray(select.value), _toConsumableArray(filterFields)), language);\n\t        var joinsPromise = getJoinFilters(join);\n\t        var entitySetFilterPromise = getEntitySetFilter(select.key);\n\t        return Promise.all([resourcesPromise, entitySetFilterPromise, joinsPromise]).then(function (_ref) {\n\t            var _ref2 = _slicedToArray(_ref, 3),\n\t                resourceResponses = _ref2[0],\n\t                entitySetFilter = _ref2[1],\n\t                joinFilters = _ref2[2];\n\t\n\t            var whereResolved = processWhere(where, joinFilters);\n\t            var filter = mergeFilters(entitySetFilter, whereResolved);\n\t            var dataTables = resourceResponses.map(function (response) {\n\t                return processResourceResponse(response, select, filterFields);\n\t            });\n\t            var queryResult = joinData.apply(undefined, [select.key, 'overwrite'].concat(_toConsumableArray(dataTables))).filter(function (row) {\n\t                return applyFilterRow(row, filter);\n\t            }).map(function (row) {\n\t                return fillMissingValues(row, projection);\n\t            }).map(function (row) {\n\t                return projectRow(row, projection);\n\t            });\n\t            orderData(queryResult, order_by);\n\t            return queryResult;\n\t        });\n\t    }\n\t    function orderData(data) {\n\t        var orderBy = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n\t\n\t        if (orderBy.length === 0) {\n\t            return;\n\t        }\n\t        var orderNormalized = orderBy.map(function (orderPart) {\n\t            if (typeof orderPart === 'string') {\n\t                return { concept: orderPart, direction: 1 };\n\t            } else {\n\t                var concept = Object.keys(orderPart)[0];\n\t                var direction = orderPart[concept] === 'asc' ? 1 : -1;\n\t                return { concept: concept, direction: direction };\n\t            }\n\t        });\n\t        var n = orderNormalized.length;\n\t        data.sort(function (a, b) {\n\t            for (var i = 0; i < n; i++) {\n\t                var order = orderNormalized[i];\n\t                if (a[order.concept] < b[order.concept]) {\n\t                    return -1 * order.direction;\n\t                } else if (a[order.concept] > b[order.concept]) {\n\t                    return 1 * order.direction;\n\t                }\n\t            }\n\t            return 0;\n\t        });\n\t    }\n\t    function processWhere(where, joinFilters) {\n\t        var result = {};\n\t        for (var field in where) {\n\t            var fieldValue = where[field];\n\t            if (['$and', '$or', '$nor'].includes(field)) {\n\t                result[field] = fieldValue.map(function (subFilter) {\n\t                    return processWhere(subFilter, joinFilters);\n\t                });\n\t            } else if (field === '$in' || field === '$nin') {\n\t                result[field] = new Set(fieldValue);\n\t            } else if (typeof joinFilters[fieldValue] !== 'undefined') {\n\t                Object.assign(result, joinFilters[fieldValue]);\n\t            } else if ((typeof fieldValue === \"undefined\" ? \"undefined\" : _typeof(fieldValue)) === 'object') {\n\t                result[field] = processWhere(fieldValue, joinFilters);\n\t            } else {\n\t                result[field] = fieldValue;\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    function mergeFilters() {\n\t        for (var _len = arguments.length, filters = Array(_len), _key = 0; _key < _len; _key++) {\n\t            filters[_key] = arguments[_key];\n\t        }\n\t\n\t        return filters.reduce(function (a, b) {\n\t            a.$and.push(b);\n\t            return a;\n\t        }, { $and: [] });\n\t    }\n\t    function querySchema(queryPar) {\n\t        var getSchemaFromCollection = function getSchemaFromCollection(collectionPar) {\n\t            return datapackage.ddfSchema[collectionPar].map(function (_ref3) {\n\t                var primaryKey = _ref3.primaryKey,\n\t                    value = _ref3.value;\n\t                return { key: primaryKey, value: value };\n\t            });\n\t        };\n\t        var collection = queryPar.from.split('.')[0];\n\t        if (datapackage.ddfSchema[collection]) {\n\t            return getSchemaFromCollection(collection);\n\t        } else if (collection === '*') {\n\t            return Object.keys(datapackage.ddfSchema).map(getSchemaFromCollection).reduce(function (a, b) {\n\t                return a.concat(b);\n\t            });\n\t        } else {\n\t            throwError(\"No valid collection (\" + collection + \") for schema query\");\n\t        }\n\t    }\n\t    function fillMissingValues(row, projection) {\n\t        var _iteratorNormalCompletion2 = true;\n\t        var _didIteratorError2 = false;\n\t        var _iteratorError2 = undefined;\n\t\n\t        try {\n\t            for (var _iterator2 = projection[Symbol.iterator](), _step2; !(_iteratorNormalCompletion2 = (_step2 = _iterator2.next()).done); _iteratorNormalCompletion2 = true) {\n\t                var field = _step2.value;\n\t\n\t                if (typeof row[field] === 'undefined') {\n\t                    row[field] = null;\n\t                }\n\t            }\n\t        } catch (err) {\n\t            _didIteratorError2 = true;\n\t            _iteratorError2 = err;\n\t        } finally {\n\t            try {\n\t                if (!_iteratorNormalCompletion2 && _iterator2.return) {\n\t                    _iterator2.return();\n\t                }\n\t            } finally {\n\t                if (_didIteratorError2) {\n\t                    throw _iteratorError2;\n\t                }\n\t            }\n\t        }\n\t\n\t        return row;\n\t    }\n\t    function applyFilterRow(row, filter) {\n\t        return Object.keys(filter).every(function (filterKey) {\n\t            var operator = operators.get(filterKey);\n\t            if (operator) {\n\t                return operator(row, filter[filterKey]);\n\t            } else if (_typeof(filter[filterKey]) !== 'object') {\n\t                return operators.get('$eq')(row[filterKey], filter[filterKey]);\n\t            } else {\n\t                return applyFilterRow(row[filterKey], filter[filterKey]);\n\t            }\n\t        });\n\t    }\n\t    function getJoinFilters(join) {\n\t        return Promise.all(Object.keys(join).map(function (joinID) {\n\t            return getJoinFilter(joinID, join[joinID]);\n\t        })).then(function (results) {\n\t            return results.reduce(mergeObjects, {});\n\t        });\n\t    }\n\t    function mergeObjects(a, b) {\n\t        return Object.assign(a, b);\n\t    }\n\t    function getJoinFilter(joinID, join) {\n\t        if (conceptsLookup.get(join.key).concept_type === 'time') {\n\t            return Promise.resolve(_defineProperty({}, joinID, join.where));\n\t        } else {\n\t            return query({ select: { key: [join.key] }, where: join.where }).then(function (result) {\n\t                return _defineProperty({}, joinID, _defineProperty({}, join.key, {\n\t                    $in: new Set(result.map(function (row) {\n\t                        return row[join.key];\n\t                    }))\n\t                }));\n\t            });\n\t        }\n\t    }\n\t    function getFilterFields(filter) {\n\t        var fields = [];\n\t        for (var field in filter) {\n\t            if (['$and', '$or', '$not', '$nor'].includes(field)) {\n\t                filter[field].map(getFilterFields).forEach(function (subFields) {\n\t                    return fields.push.apply(fields, _toConsumableArray(subFields));\n\t                });\n\t            } else {\n\t                fields.push(field);\n\t            }\n\t        }\n\t        return fields;\n\t    }\n\t    function filterConceptsByType(conceptTypes) {\n\t        var conceptStrings = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Array.from(conceptsLookup.keys());\n\t\n\t        var concepts = [];\n\t        var _iteratorNormalCompletion3 = true;\n\t        var _didIteratorError3 = false;\n\t        var _iteratorError3 = undefined;\n\t\n\t        try {\n\t            for (var _iterator3 = conceptStrings[Symbol.iterator](), _step3; !(_iteratorNormalCompletion3 = (_step3 = _iterator3.next()).done); _iteratorNormalCompletion3 = true) {\n\t                var conceptString = _step3.value;\n\t\n\t                var concept = conceptsLookup.get(conceptString);\n\t                if (conceptTypes.includes(concept.concept_type)) {\n\t                    concepts.push(concept);\n\t                }\n\t            }\n\t        } catch (err) {\n\t            _didIteratorError3 = true;\n\t            _iteratorError3 = err;\n\t        } finally {\n\t            try {\n\t                if (!_iteratorNormalCompletion3 && _iterator3.return) {\n\t                    _iterator3.return();\n\t                }\n\t            } finally {\n\t                if (_didIteratorError3) {\n\t                    throw _iteratorError3;\n\t                }\n\t            }\n\t        }\n\t\n\t        return concepts;\n\t    }\n\t    function getEntityConceptRenameMap(queryKey, resourceKey) {\n\t        var resourceKeySet = new Set(resourceKey);\n\t        var entityConceptTypes = ['entity_set', 'entity_domain'];\n\t        var queryEntityConcepts = filterConceptsByType(entityConceptTypes, queryKey);\n\t        if (queryEntityConcepts.length === 0) {\n\t            return new Map();\n\t        }\n\t        var allEntityConcepts = filterConceptsByType(entityConceptTypes);\n\t        return queryEntityConcepts.map(function (concept) {\n\t            return allEntityConcepts.filter(function (lookupConcept) {\n\t                if (concept.concept_type === 'entity_set') {\n\t                    return resourceKeySet.has(lookupConcept.concept) && lookupConcept.concept !== concept.concept && (lookupConcept.domain === concept.domain || lookupConcept.concept === concept.domain);\n\t                } else {\n\t                    return resourceKeySet.has(lookupConcept.concept) && lookupConcept.concept !== concept.concept && lookupConcept.domain === concept.concept;\n\t                }\n\t            }).reduce(function (map, aliasConcept) {\n\t                return map.set(aliasConcept.concept, concept.concept);\n\t            }, new Map());\n\t        }).reduce(function (mapA, mapB) {\n\t            return new Map([].concat(_toConsumableArray(mapA), _toConsumableArray(mapB)));\n\t        }, new Map());\n\t    }\n\t    function getEntitySetFilter(conceptStrings) {\n\t        var promises = filterConceptsByType(['entity_set'], conceptStrings).map(function (concept) {\n\t            return query({ select: { key: [concept.domain], value: ['is--' + concept.concept] } }).then(function (result) {\n\t                return _defineProperty({}, concept.concept, {\n\t                    $in: new Set(result.filter(function (row) {\n\t                        return row['is--' + concept.concept];\n\t                    }).map(function (row) {\n\t                        return row[concept.domain];\n\t                    }))\n\t                });\n\t            });\n\t        });\n\t        return Promise.all(promises).then(function (results) {\n\t            return results.reduce(function (a, b) {\n\t                return Object.assign(a, b);\n\t            }, {});\n\t        });\n\t    }\n\t    function getResources(key, value) {\n\t        if (!value || value.length === 0) {\n\t            return new Set([].concat(_toConsumableArray(keyValueLookup.get(createKeyString(key)).values())).reduce(function (a, b) {\n\t                return a.concat(b);\n\t            }));\n\t        }\n\t        if (Array.isArray(value)) {\n\t            return value.map(function (singleValue) {\n\t                return getResources(key, singleValue);\n\t            }).reduce(function (resultSet, resources) {\n\t                return new Set([].concat(_toConsumableArray(resultSet), _toConsumableArray(resources)));\n\t            }, new Set());\n\t        }\n\t        return new Set(keyValueLookup.get(createKeyString(key)).get(value));\n\t    }\n\t    function processResourceResponse(response, select, filterFields) {\n\t        var resourcePK = response.resource.schema.primaryKey;\n\t        var resourceProjection = new Set([].concat(_toConsumableArray(resourcePK), _toConsumableArray(select.value), _toConsumableArray(filterFields)));\n\t        var renameMap = getEntityConceptRenameMap(select.key, resourcePK);\n\t        return response.data.map(function (row) {\n\t            return projectRow(row, resourceProjection);\n\t        }).map(function (row) {\n\t            return renameHeaderRow(row, renameMap);\n\t        });\n\t    }\n\t    function loadResources(key, value, language) {\n\t        var resources = getResources(key, value);\n\t        return Promise.all([].concat(_toConsumableArray(resources)).map(function (resource) {\n\t            return loadResource(resource, language);\n\t        }));\n\t    }\n\t    function projectRow(row, projectionSet) {\n\t        var result = {};\n\t        for (var concept in row) {\n\t            if (projectionSet.has(concept)) {\n\t                result[concept] = row[concept];\n\t            }\n\t        }\n\t        return result;\n\t    }\n\t    function renameHeaderRow(row, renameMap) {\n\t        var result = {};\n\t        for (var concept in row) {\n\t            result[renameMap.get(concept) || concept] = row[concept];\n\t        }\n\t        return result;\n\t    }\n\t    function joinData(key, joinMode) {\n\t        for (var _len2 = arguments.length, data = Array(_len2 > 2 ? _len2 - 2 : 0), _key2 = 2; _key2 < _len2; _key2++) {\n\t            data[_key2 - 2] = arguments[_key2];\n\t        }\n\t\n\t        if (data.length === 1) {\n\t            return data[0];\n\t        }\n\t        var canonicalKey = key.slice(0).sort();\n\t        var dataMap = data.reduce(function (result, dataPar) {\n\t            dataPar.forEach(function (row) {\n\t                var keyString = canonicalKey.map(function (concept) {\n\t                    return row[concept];\n\t                }).join(',');\n\t                if (result.has(keyString)) {\n\t                    var resultRow = result.get(keyString);\n\t                    joinRow(resultRow, row, joinMode);\n\t                } else {\n\t                    result.set(keyString, row);\n\t                }\n\t            });\n\t            return result;\n\t        }, new Map());\n\t        return [].concat(_toConsumableArray(dataMap.values()));\n\t    }\n\t    function joinRow(resultRow, sourceRow, mode) {\n\t        switch (mode) {\n\t            case 'overwrite':\n\t                Object.assign(resultRow, sourceRow);\n\t                break;\n\t            case 'translation':\n\t                for (var concept in sourceRow) {\n\t                    if (sourceRow[concept] !== '') {\n\t                        resultRow[concept] = sourceRow[concept];\n\t                    }\n\t                }\n\t                break;\n\t            case 'overwriteWithError':\n\t                for (var _concept in sourceRow) {\n\t                    if (resultRow[_concept] !== undefined && resultRow[_concept] !== sourceRow[_concept]) {\n\t                        var sourceRowStr = JSON.stringify(sourceRow);\n\t                        var resultRowStr = JSON.stringify(resultRow);\n\t                        var errStr = \"JOIN Error: two resources have different data for \\\"\" + _concept + \"\\\": \" + sourceRowStr + \",\" + resultRowStr;\n\t                        throwError(errStr);\n\t                    } else {\n\t                        resultRow[_concept] = sourceRow[_concept];\n\t                    }\n\t                }\n\t                break;\n\t        }\n\t    }\n\t    function throwError(error) {\n\t        var currentLogger = logger || console;\n\t        currentLogger.error(error);\n\t    }\n\t    function createKeyString(key) {\n\t        var row = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n\t\n\t        var canonicalKey = key.slice(0).sort();\n\t        if (!row) {\n\t            return canonicalKey.join(',');\n\t        } else {\n\t            return canonicalKey.map(function (concept) {\n\t                return row[concept];\n\t            }).join(',');\n\t        }\n\t    }\n\t    function loadResource(resource, language) {\n\t        var filePromises = [];\n\t        if (typeof resource.data === 'undefined') {\n\t            resource.data = loadFile(basePath + resource.path);\n\t        }\n\t        filePromises.push(resource.data);\n\t        var languageValid = typeof language !== 'undefined' && getLanguages().includes(language);\n\t        var languageLoaded = typeof resource.translations[language] !== 'undefined';\n\t        if (languageValid) {\n\t            if (!languageLoaded) {\n\t                var translationPath = basePath + \"lang/\" + language + \"/\" + resource.path;\n\t                resource.translations[language] = loadFile(translationPath);\n\t            }\n\t            filePromises.push(resource.translations[language]);\n\t        }\n\t        return Promise.all(filePromises).then(function (fileResponses) {\n\t            var filesData = fileResponses.map(function (resp) {\n\t                return resp.data;\n\t            });\n\t            var primaryKey = resource.schema.primaryKey;\n\t            var data = joinData.apply(undefined, [primaryKey, 'translation'].concat(_toConsumableArray(filesData)));\n\t            return { data: data, resource: resource };\n\t        });\n\t    }\n\t    function getLanguages() {\n\t        return datapackage.translations.map(function (lang) {\n\t            return lang.id;\n\t        });\n\t    }\n\t    function loadFile(filePath) {\n\t        return new Promise(function (resolve, reject) {\n\t            fileReader.readText(filePath, function (err, data) {\n\t                if (err) {\n\t                    return reject(err);\n\t                }\n\t                Papa.parse(data, {\n\t                    header: true,\n\t                    skipEmptyLines: true,\n\t                    dynamicTyping: function dynamicTyping(headerName) {\n\t                        if (!conceptsLookup) {\n\t                            return true;\n\t                        }\n\t                        var concept = conceptsLookup.get(headerName) || {};\n\t                        return ['boolean', 'measure'].includes(concept.concept_type);\n\t                    },\n\t                    complete: function complete(result) {\n\t                        return resolve(result);\n\t                    },\n\t                    error: function error(_error) {\n\t                        return reject(_error);\n\t                    }\n\t                });\n\t            });\n\t        });\n\t    }\n\t    function buildResourcesLookup(datapackagePar) {\n\t        if (resourcesLookup.size > 0) {\n\t            return resourcesLookup;\n\t        }\n\t        datapackagePar.resources.forEach(function (resource) {\n\t            if (!Array.isArray(resource.schema.primaryKey)) {\n\t                resource.schema.primaryKey = [resource.schema.primaryKey];\n\t            }\n\t            resource.translations = {};\n\t            resourcesLookup.set(resource.name, resource);\n\t        });\n\t        return resourcesLookup;\n\t    }\n\t    function buildKeyValueLookup(datapackagePar) {\n\t        if (keyValueLookup.size > 0) {\n\t            return keyValueLookup;\n\t        }\n\t        for (var collection in datapackagePar.ddfSchema) {\n\t            datapackagePar.ddfSchema[collection].map(function (kvPair) {\n\t                var key = createKeyString(kvPair.primaryKey);\n\t                var resources = kvPair.resources.map(function (resourceName) {\n\t                    return resourcesLookup.get(resourceName);\n\t                });\n\t                if (keyValueLookup.has(key)) {\n\t                    keyValueLookup.get(key).set(kvPair.value, resources);\n\t                } else {\n\t                    keyValueLookup.set(key, new Map([[kvPair.value, resources]]));\n\t                }\n\t            });\n\t        }\n\t        return keyValueLookup;\n\t    }\n\t    return {\n\t        query: query\n\t    };\n\t}\n\texports.ddfCsvReader = ddfCsvReader;\n\t//# sourceMappingURL=ddf-csv.js.map\n\n/***/ },\n/* 42 */\n/***/ function(module, exports, __webpack_require__) {\n\n\tvar __WEBPACK_AMD_DEFINE_FACTORY__, __WEBPACK_AMD_DEFINE_ARRAY__, __WEBPACK_AMD_DEFINE_RESULT__;'use strict';\n\t\n\tvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\t\n\t/*!\n\t\tPapa Parse\n\t\tv4.3.6\n\t\thttps://github.com/mholt/PapaParse\n\t\tLicense: MIT\n\t*/\n\t(function (root, factory) {\n\t\tif (true) {\n\t\t\t// AMD. Register as an anonymous module.\n\t\t\t!(__WEBPACK_AMD_DEFINE_ARRAY__ = [], __WEBPACK_AMD_DEFINE_FACTORY__ = (factory), __WEBPACK_AMD_DEFINE_RESULT__ = (typeof __WEBPACK_AMD_DEFINE_FACTORY__ === 'function' ? (__WEBPACK_AMD_DEFINE_FACTORY__.apply(exports, __WEBPACK_AMD_DEFINE_ARRAY__)) : __WEBPACK_AMD_DEFINE_FACTORY__), __WEBPACK_AMD_DEFINE_RESULT__ !== undefined && (module.exports = __WEBPACK_AMD_DEFINE_RESULT__));\n\t\t} else if ((typeof module === 'undefined' ? 'undefined' : _typeof(module)) === 'object' && typeof exports !== 'undefined') {\n\t\t\t// Node. Does not work with strict CommonJS, but\n\t\t\t// only CommonJS-like environments that support module.exports,\n\t\t\t// like Node.\n\t\t\tmodule.exports = factory();\n\t\t} else {\n\t\t\t// Browser globals (root is window)\n\t\t\troot.Papa = factory();\n\t\t}\n\t})(undefined, function () {\n\t\t'use strict';\n\t\n\t\tvar global = function () {\n\t\t\t// alternative method, similar to `Function('return this')()`\n\t\t\t// but without using `eval` (which is disabled when\n\t\t\t// using Content Security Policy).\n\t\n\t\t\tif (typeof self !== 'undefined') {\n\t\t\t\treturn self;\n\t\t\t}\n\t\t\tif (typeof window !== 'undefined') {\n\t\t\t\treturn window;\n\t\t\t}\n\t\t\tif (typeof global !== 'undefined') {\n\t\t\t\treturn global;\n\t\t\t}\n\t\n\t\t\t// When running tests none of the above have been defined\n\t\t\treturn {};\n\t\t}();\n\t\n\t\tvar IS_WORKER = !global.document && !!global.postMessage,\n\t\t    IS_PAPA_WORKER = IS_WORKER && /(\\?|&)papaworker(=|&|$)/.test(global.location.search),\n\t\t    LOADED_SYNC = false,\n\t\t    AUTO_SCRIPT_PATH;\n\t\tvar workers = {},\n\t\t    workerIdCounter = 0;\n\t\n\t\tvar Papa = {};\n\t\n\t\tPapa.parse = CsvToJson;\n\t\tPapa.unparse = JsonToCsv;\n\t\n\t\tPapa.RECORD_SEP = String.fromCharCode(30);\n\t\tPapa.UNIT_SEP = String.fromCharCode(31);\n\t\tPapa.BYTE_ORDER_MARK = '\\uFEFF';\n\t\tPapa.BAD_DELIMITERS = ['\\r', '\\n', '\"', Papa.BYTE_ORDER_MARK];\n\t\tPapa.WORKERS_SUPPORTED = !IS_WORKER && !!global.Worker;\n\t\tPapa.SCRIPT_PATH = null; // Must be set by your code if you use workers and this lib is loaded asynchronously\n\t\n\t\t// Configurable chunk sizes for local and remote files, respectively\n\t\tPapa.LocalChunkSize = 1024 * 1024 * 10; // 10 MB\n\t\tPapa.RemoteChunkSize = 1024 * 1024 * 5; // 5 MB\n\t\tPapa.DefaultDelimiter = ','; // Used if not specified and detection fails\n\t\n\t\t// Exposed for testing and development only\n\t\tPapa.Parser = Parser;\n\t\tPapa.ParserHandle = ParserHandle;\n\t\tPapa.NetworkStreamer = NetworkStreamer;\n\t\tPapa.FileStreamer = FileStreamer;\n\t\tPapa.StringStreamer = StringStreamer;\n\t\tPapa.ReadableStreamStreamer = ReadableStreamStreamer;\n\t\n\t\tif (global.jQuery) {\n\t\t\tvar $ = global.jQuery;\n\t\t\t$.fn.parse = function (options) {\n\t\t\t\tvar config = options.config || {};\n\t\t\t\tvar queue = [];\n\t\n\t\t\t\tthis.each(function (idx) {\n\t\t\t\t\tvar supported = $(this).prop('tagName').toUpperCase() === 'INPUT' && $(this).attr('type').toLowerCase() === 'file' && global.FileReader;\n\t\n\t\t\t\t\tif (!supported || !this.files || this.files.length === 0) return true; // continue to next input element\n\t\n\t\t\t\t\tfor (var i = 0; i < this.files.length; i++) {\n\t\t\t\t\t\tqueue.push({\n\t\t\t\t\t\t\tfile: this.files[i],\n\t\t\t\t\t\t\tinputElem: this,\n\t\t\t\t\t\t\tinstanceConfig: $.extend({}, config)\n\t\t\t\t\t\t});\n\t\t\t\t\t}\n\t\t\t\t});\n\t\n\t\t\t\tparseNextFile(); // begin parsing\n\t\t\t\treturn this; // maintains chainability\n\t\n\t\n\t\t\t\tfunction parseNextFile() {\n\t\t\t\t\tif (queue.length === 0) {\n\t\t\t\t\t\tif (isFunction(options.complete)) options.complete();\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tvar f = queue[0];\n\t\n\t\t\t\t\tif (isFunction(options.before)) {\n\t\t\t\t\t\tvar returned = options.before(f.file, f.inputElem);\n\t\n\t\t\t\t\t\tif ((typeof returned === 'undefined' ? 'undefined' : _typeof(returned)) === 'object') {\n\t\t\t\t\t\t\tif (returned.action === 'abort') {\n\t\t\t\t\t\t\t\terror('AbortError', f.file, f.inputElem, returned.reason);\n\t\t\t\t\t\t\t\treturn; // Aborts all queued files immediately\n\t\t\t\t\t\t\t} else if (returned.action === 'skip') {\n\t\t\t\t\t\t\t\tfileComplete(); // parse the next file in the queue, if any\n\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t} else if (_typeof(returned.config) === 'object') f.instanceConfig = $.extend(f.instanceConfig, returned.config);\n\t\t\t\t\t\t} else if (returned === 'skip') {\n\t\t\t\t\t\t\tfileComplete(); // parse the next file in the queue, if any\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Wrap up the user's complete callback, if any, so that ours also gets executed\n\t\t\t\t\tvar userCompleteFunc = f.instanceConfig.complete;\n\t\t\t\t\tf.instanceConfig.complete = function (results) {\n\t\t\t\t\t\tif (isFunction(userCompleteFunc)) userCompleteFunc(results, f.file, f.inputElem);\n\t\t\t\t\t\tfileComplete();\n\t\t\t\t\t};\n\t\n\t\t\t\t\tPapa.parse(f.file, f.instanceConfig);\n\t\t\t\t}\n\t\n\t\t\t\tfunction error(name, file, elem, reason) {\n\t\t\t\t\tif (isFunction(options.error)) options.error({ name: name }, file, elem, reason);\n\t\t\t\t}\n\t\n\t\t\t\tfunction fileComplete() {\n\t\t\t\t\tqueue.splice(0, 1);\n\t\t\t\t\tparseNextFile();\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t\n\t\tif (IS_PAPA_WORKER) {\n\t\t\tglobal.onmessage = workerThreadReceivedMessage;\n\t\t} else if (Papa.WORKERS_SUPPORTED) {\n\t\t\tAUTO_SCRIPT_PATH = getScriptPath();\n\t\n\t\t\t// Check if the script was loaded synchronously\n\t\t\tif (!document.body) {\n\t\t\t\t// Body doesn't exist yet, must be synchronous\n\t\t\t\tLOADED_SYNC = true;\n\t\t\t} else {\n\t\t\t\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\t\t\t\tLOADED_SYNC = true;\n\t\t\t\t}, true);\n\t\t\t}\n\t\t}\n\t\n\t\tfunction CsvToJson(_input, _config) {\n\t\t\t_config = _config || {};\n\t\t\tvar dynamicTyping = _config.dynamicTyping || false;\n\t\t\tif (isFunction(dynamicTyping)) {\n\t\t\t\t_config.dynamicTypingFunction = dynamicTyping;\n\t\t\t\t// Will be filled on first row call\n\t\t\t\tdynamicTyping = {};\n\t\t\t}\n\t\t\t_config.dynamicTyping = dynamicTyping;\n\t\n\t\t\tif (_config.worker && Papa.WORKERS_SUPPORTED) {\n\t\t\t\tvar w = newWorker();\n\t\n\t\t\t\tw.userStep = _config.step;\n\t\t\t\tw.userChunk = _config.chunk;\n\t\t\t\tw.userComplete = _config.complete;\n\t\t\t\tw.userError = _config.error;\n\t\n\t\t\t\t_config.step = isFunction(_config.step);\n\t\t\t\t_config.chunk = isFunction(_config.chunk);\n\t\t\t\t_config.complete = isFunction(_config.complete);\n\t\t\t\t_config.error = isFunction(_config.error);\n\t\t\t\tdelete _config.worker; // prevent infinite loop\n\t\n\t\t\t\tw.postMessage({\n\t\t\t\t\tinput: _input,\n\t\t\t\t\tconfig: _config,\n\t\t\t\t\tworkerId: w.id\n\t\t\t\t});\n\t\n\t\t\t\treturn;\n\t\t\t}\n\t\n\t\t\tvar streamer = null;\n\t\t\tif (typeof _input === 'string') {\n\t\t\t\tif (_config.download) streamer = new NetworkStreamer(_config);else streamer = new StringStreamer(_config);\n\t\t\t} else if (_input.readable === true && isFunction(_input.read) && isFunction(_input.on)) {\n\t\t\t\tstreamer = new ReadableStreamStreamer(_config);\n\t\t\t} else if (global.File && _input instanceof File || _input instanceof Object) // ...Safari. (see issue #106)\n\t\t\t\tstreamer = new FileStreamer(_config);\n\t\n\t\t\treturn streamer.stream(_input);\n\t\t}\n\t\n\t\tfunction JsonToCsv(_input, _config) {\n\t\t\tvar _output = '';\n\t\t\tvar _fields = [];\n\t\n\t\t\t// Default configuration\n\t\n\t\t\t/** whether to surround every datum with quotes */\n\t\t\tvar _quotes = false;\n\t\n\t\t\t/** whether to write headers */\n\t\t\tvar _writeHeader = true;\n\t\n\t\t\t/** delimiting character */\n\t\t\tvar _delimiter = ',';\n\t\n\t\t\t/** newline character(s) */\n\t\t\tvar _newline = '\\r\\n';\n\t\n\t\t\t/** quote character */\n\t\t\tvar _quoteChar = '\"';\n\t\n\t\t\tunpackConfig();\n\t\n\t\t\tvar quoteCharRegex = new RegExp(_quoteChar, 'g');\n\t\n\t\t\tif (typeof _input === 'string') _input = JSON.parse(_input);\n\t\n\t\t\tif (_input instanceof Array) {\n\t\t\t\tif (!_input.length || _input[0] instanceof Array) return serialize(null, _input);else if (_typeof(_input[0]) === 'object') return serialize(objectKeys(_input[0]), _input);\n\t\t\t} else if ((typeof _input === 'undefined' ? 'undefined' : _typeof(_input)) === 'object') {\n\t\t\t\tif (typeof _input.data === 'string') _input.data = JSON.parse(_input.data);\n\t\n\t\t\t\tif (_input.data instanceof Array) {\n\t\t\t\t\tif (!_input.fields) _input.fields = _input.meta && _input.meta.fields;\n\t\n\t\t\t\t\tif (!_input.fields) _input.fields = _input.data[0] instanceof Array ? _input.fields : objectKeys(_input.data[0]);\n\t\n\t\t\t\t\tif (!(_input.data[0] instanceof Array) && _typeof(_input.data[0]) !== 'object') _input.data = [_input.data]; // handles input like [1,2,3] or ['asdf']\n\t\t\t\t}\n\t\n\t\t\t\treturn serialize(_input.fields || [], _input.data || []);\n\t\t\t}\n\t\n\t\t\t// Default (any valid paths should return before this)\n\t\t\tthrow 'exception: Unable to serialize unrecognized input';\n\t\n\t\t\tfunction unpackConfig() {\n\t\t\t\tif ((typeof _config === 'undefined' ? 'undefined' : _typeof(_config)) !== 'object') return;\n\t\n\t\t\t\tif (typeof _config.delimiter === 'string' && _config.delimiter.length === 1 && Papa.BAD_DELIMITERS.indexOf(_config.delimiter) === -1) {\n\t\t\t\t\t_delimiter = _config.delimiter;\n\t\t\t\t}\n\t\n\t\t\t\tif (typeof _config.quotes === 'boolean' || _config.quotes instanceof Array) _quotes = _config.quotes;\n\t\n\t\t\t\tif (typeof _config.newline === 'string') _newline = _config.newline;\n\t\n\t\t\t\tif (typeof _config.quoteChar === 'string') _quoteChar = _config.quoteChar;\n\t\n\t\t\t\tif (typeof _config.header === 'boolean') _writeHeader = _config.header;\n\t\t\t}\n\t\n\t\t\t/** Turns an object's keys into an array */\n\t\t\tfunction objectKeys(obj) {\n\t\t\t\tif ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return [];\n\t\t\t\tvar keys = [];\n\t\t\t\tfor (var key in obj) {\n\t\t\t\t\tkeys.push(key);\n\t\t\t\t}return keys;\n\t\t\t}\n\t\n\t\t\t/** The double for loop that iterates the data and writes out a CSV string including header row */\n\t\t\tfunction serialize(fields, data) {\n\t\t\t\tvar csv = '';\n\t\n\t\t\t\tif (typeof fields === 'string') fields = JSON.parse(fields);\n\t\t\t\tif (typeof data === 'string') data = JSON.parse(data);\n\t\n\t\t\t\tvar hasHeader = fields instanceof Array && fields.length > 0;\n\t\t\t\tvar dataKeyedByField = !(data[0] instanceof Array);\n\t\n\t\t\t\t// If there a header row, write it first\n\t\t\t\tif (hasHeader && _writeHeader) {\n\t\t\t\t\tfor (var i = 0; i < fields.length; i++) {\n\t\t\t\t\t\tif (i > 0) csv += _delimiter;\n\t\t\t\t\t\tcsv += safe(fields[i], i);\n\t\t\t\t\t}\n\t\t\t\t\tif (data.length > 0) csv += _newline;\n\t\t\t\t}\n\t\n\t\t\t\t// Then write out the data\n\t\t\t\tfor (var row = 0; row < data.length; row++) {\n\t\t\t\t\tvar maxCol = hasHeader ? fields.length : data[row].length;\n\t\n\t\t\t\t\tfor (var col = 0; col < maxCol; col++) {\n\t\t\t\t\t\tif (col > 0) csv += _delimiter;\n\t\t\t\t\t\tvar colIdx = hasHeader && dataKeyedByField ? fields[col] : col;\n\t\t\t\t\t\tcsv += safe(data[row][colIdx], col);\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (row < data.length - 1) csv += _newline;\n\t\t\t\t}\n\t\n\t\t\t\treturn csv;\n\t\t\t}\n\t\n\t\t\t/** Encloses a value around quotes if needed (makes a value safe for CSV insertion) */\n\t\t\tfunction safe(str, col) {\n\t\t\t\tif (typeof str === 'undefined' || str === null) return '';\n\t\n\t\t\t\tstr = str.toString().replace(quoteCharRegex, _quoteChar + _quoteChar);\n\t\n\t\t\t\tvar needsQuotes = typeof _quotes === 'boolean' && _quotes || _quotes instanceof Array && _quotes[col] || hasAny(str, Papa.BAD_DELIMITERS) || str.indexOf(_delimiter) > -1 || str.charAt(0) === ' ' || str.charAt(str.length - 1) === ' ';\n\t\n\t\t\t\treturn needsQuotes ? _quoteChar + str + _quoteChar : str;\n\t\t\t}\n\t\n\t\t\tfunction hasAny(str, substrings) {\n\t\t\t\tfor (var i = 0; i < substrings.length; i++) {\n\t\t\t\t\tif (str.indexOf(substrings[i]) > -1) return true;\n\t\t\t\t}return false;\n\t\t\t}\n\t\t}\n\t\n\t\t/** ChunkStreamer is the base prototype for various streamer implementations. */\n\t\tfunction ChunkStreamer(config) {\n\t\t\tthis._handle = null;\n\t\t\tthis._paused = false;\n\t\t\tthis._finished = false;\n\t\t\tthis._input = null;\n\t\t\tthis._baseIndex = 0;\n\t\t\tthis._partialLine = '';\n\t\t\tthis._rowCount = 0;\n\t\t\tthis._start = 0;\n\t\t\tthis._nextChunk = null;\n\t\t\tthis.isFirstChunk = true;\n\t\t\tthis._completeResults = {\n\t\t\t\tdata: [],\n\t\t\t\terrors: [],\n\t\t\t\tmeta: {}\n\t\t\t};\n\t\t\treplaceConfig.call(this, config);\n\t\n\t\t\tthis.parseChunk = function (chunk) {\n\t\t\t\t// First chunk pre-processing\n\t\t\t\tif (this.isFirstChunk && isFunction(this._config.beforeFirstChunk)) {\n\t\t\t\t\tvar modifiedChunk = this._config.beforeFirstChunk(chunk);\n\t\t\t\t\tif (modifiedChunk !== undefined) chunk = modifiedChunk;\n\t\t\t\t}\n\t\t\t\tthis.isFirstChunk = false;\n\t\n\t\t\t\t// Rejoin the line we likely just split in two by chunking the file\n\t\t\t\tvar aggregate = this._partialLine + chunk;\n\t\t\t\tthis._partialLine = '';\n\t\n\t\t\t\tvar results = this._handle.parse(aggregate, this._baseIndex, !this._finished);\n\t\n\t\t\t\tif (this._handle.paused() || this._handle.aborted()) return;\n\t\n\t\t\t\tvar lastIndex = results.meta.cursor;\n\t\n\t\t\t\tif (!this._finished) {\n\t\t\t\t\tthis._partialLine = aggregate.substring(lastIndex - this._baseIndex);\n\t\t\t\t\tthis._baseIndex = lastIndex;\n\t\t\t\t}\n\t\n\t\t\t\tif (results && results.data) this._rowCount += results.data.length;\n\t\n\t\t\t\tvar finishedIncludingPreview = this._finished || this._config.preview && this._rowCount >= this._config.preview;\n\t\n\t\t\t\tif (IS_PAPA_WORKER) {\n\t\t\t\t\tglobal.postMessage({\n\t\t\t\t\t\tresults: results,\n\t\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\t\tfinished: finishedIncludingPreview\n\t\t\t\t\t});\n\t\t\t\t} else if (isFunction(this._config.chunk)) {\n\t\t\t\t\tthis._config.chunk(results, this._handle);\n\t\t\t\t\tif (this._paused) return;\n\t\t\t\t\tresults = undefined;\n\t\t\t\t\tthis._completeResults = undefined;\n\t\t\t\t}\n\t\n\t\t\t\tif (!this._config.step && !this._config.chunk) {\n\t\t\t\t\tthis._completeResults.data = this._completeResults.data.concat(results.data);\n\t\t\t\t\tthis._completeResults.errors = this._completeResults.errors.concat(results.errors);\n\t\t\t\t\tthis._completeResults.meta = results.meta;\n\t\t\t\t}\n\t\n\t\t\t\tif (finishedIncludingPreview && isFunction(this._config.complete) && (!results || !results.meta.aborted)) this._config.complete(this._completeResults, this._input);\n\t\n\t\t\t\tif (!finishedIncludingPreview && (!results || !results.meta.paused)) this._nextChunk();\n\t\n\t\t\t\treturn results;\n\t\t\t};\n\t\n\t\t\tthis._sendError = function (error) {\n\t\t\t\tif (isFunction(this._config.error)) this._config.error(error);else if (IS_PAPA_WORKER && this._config.error) {\n\t\t\t\t\tglobal.postMessage({\n\t\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\t\terror: error,\n\t\t\t\t\t\tfinished: false\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tfunction replaceConfig(config) {\n\t\t\t\t// Deep-copy the config so we can edit it\n\t\t\t\tvar configCopy = copy(config);\n\t\t\t\tconfigCopy.chunkSize = parseInt(configCopy.chunkSize); // parseInt VERY important so we don't concatenate strings!\n\t\t\t\tif (!config.step && !config.chunk) configCopy.chunkSize = null; // disable Range header if not streaming; bad values break IIS - see issue #196\n\t\t\t\tthis._handle = new ParserHandle(configCopy);\n\t\t\t\tthis._handle.streamer = this;\n\t\t\t\tthis._config = configCopy; // persist the copy to the caller\n\t\t\t}\n\t\t}\n\t\n\t\tfunction NetworkStreamer(config) {\n\t\t\tconfig = config || {};\n\t\t\tif (!config.chunkSize) config.chunkSize = Papa.RemoteChunkSize;\n\t\t\tChunkStreamer.call(this, config);\n\t\n\t\t\tvar xhr;\n\t\n\t\t\tif (IS_WORKER) {\n\t\t\t\tthis._nextChunk = function () {\n\t\t\t\t\tthis._readChunk();\n\t\t\t\t\tthis._chunkLoaded();\n\t\t\t\t};\n\t\t\t} else {\n\t\t\t\tthis._nextChunk = function () {\n\t\t\t\t\tthis._readChunk();\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tthis.stream = function (url) {\n\t\t\t\tthis._input = url;\n\t\t\t\tthis._nextChunk(); // Starts streaming\n\t\t\t};\n\t\n\t\t\tthis._readChunk = function () {\n\t\t\t\tif (this._finished) {\n\t\t\t\t\tthis._chunkLoaded();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\txhr = new XMLHttpRequest();\n\t\n\t\t\t\tif (this._config.withCredentials) {\n\t\t\t\t\txhr.withCredentials = this._config.withCredentials;\n\t\t\t\t}\n\t\n\t\t\t\tif (!IS_WORKER) {\n\t\t\t\t\txhr.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\t\txhr.onerror = bindFunction(this._chunkError, this);\n\t\t\t\t}\n\t\n\t\t\t\txhr.open('GET', this._input, !IS_WORKER);\n\t\t\t\t// Headers can only be set when once the request state is OPENED\n\t\t\t\tif (this._config.downloadRequestHeaders) {\n\t\t\t\t\tvar headers = this._config.downloadRequestHeaders;\n\t\n\t\t\t\t\tfor (var headerName in headers) {\n\t\t\t\t\t\txhr.setRequestHeader(headerName, headers[headerName]);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (this._config.chunkSize) {\n\t\t\t\t\tvar end = this._start + this._config.chunkSize - 1; // minus one because byte range is inclusive\n\t\t\t\t\txhr.setRequestHeader('Range', 'bytes=' + this._start + '-' + end);\n\t\t\t\t\txhr.setRequestHeader('If-None-Match', 'webkit-no-cache'); // https://bugs.webkit.org/show_bug.cgi?id=82672\n\t\t\t\t}\n\t\n\t\t\t\ttry {\n\t\t\t\t\txhr.send();\n\t\t\t\t} catch (err) {\n\t\t\t\t\tthis._chunkError(err.message);\n\t\t\t\t}\n\t\n\t\t\t\tif (IS_WORKER && xhr.status === 0) this._chunkError();else this._start += this._config.chunkSize;\n\t\t\t};\n\t\n\t\t\tthis._chunkLoaded = function () {\n\t\t\t\tif (xhr.readyState != 4) return;\n\t\n\t\t\t\tif (xhr.status < 200 || xhr.status >= 400) {\n\t\t\t\t\tthis._chunkError();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\t\n\t\t\t\tthis._finished = !this._config.chunkSize || this._start > getFileSize(xhr);\n\t\t\t\tthis.parseChunk(xhr.responseText);\n\t\t\t};\n\t\n\t\t\tthis._chunkError = function (errorMessage) {\n\t\t\t\tvar errorText = xhr.statusText || errorMessage;\n\t\t\t\tthis._sendError(errorText);\n\t\t\t};\n\t\n\t\t\tfunction getFileSize(xhr) {\n\t\t\t\tvar contentRange = xhr.getResponseHeader('Content-Range');\n\t\t\t\tif (contentRange === null) {\n\t\t\t\t\t// no content range, then finish!\n\t\t\t\t\treturn -1;\n\t\t\t\t}\n\t\t\t\treturn parseInt(contentRange.substr(contentRange.lastIndexOf('/') + 1));\n\t\t\t}\n\t\t}\n\t\tNetworkStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\t\tNetworkStreamer.prototype.constructor = NetworkStreamer;\n\t\n\t\tfunction FileStreamer(config) {\n\t\t\tconfig = config || {};\n\t\t\tif (!config.chunkSize) config.chunkSize = Papa.LocalChunkSize;\n\t\t\tChunkStreamer.call(this, config);\n\t\n\t\t\tvar reader, slice;\n\t\n\t\t\t// FileReader is better than FileReaderSync (even in worker) - see http://stackoverflow.com/q/24708649/1048862\n\t\t\t// But Firefox is a pill, too - see issue #76: https://github.com/mholt/PapaParse/issues/76\n\t\t\tvar usingAsyncReader = typeof FileReader !== 'undefined'; // Safari doesn't consider it a function - see issue #105\n\t\n\t\t\tthis.stream = function (file) {\n\t\t\t\tthis._input = file;\n\t\t\t\tslice = file.slice || file.webkitSlice || file.mozSlice;\n\t\n\t\t\t\tif (usingAsyncReader) {\n\t\t\t\t\treader = new FileReader(); // Preferred method of reading files, even in workers\n\t\t\t\t\treader.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\t\treader.onerror = bindFunction(this._chunkError, this);\n\t\t\t\t} else reader = new FileReaderSync(); // Hack for running in a web worker in Firefox\n\t\n\t\t\t\tthis._nextChunk(); // Starts streaming\n\t\t\t};\n\t\n\t\t\tthis._nextChunk = function () {\n\t\t\t\tif (!this._finished && (!this._config.preview || this._rowCount < this._config.preview)) this._readChunk();\n\t\t\t};\n\t\n\t\t\tthis._readChunk = function () {\n\t\t\t\tvar input = this._input;\n\t\t\t\tif (this._config.chunkSize) {\n\t\t\t\t\tvar end = Math.min(this._start + this._config.chunkSize, this._input.size);\n\t\t\t\t\tinput = slice.call(input, this._start, end);\n\t\t\t\t}\n\t\t\t\tvar txt = reader.readAsText(input, this._config.encoding);\n\t\t\t\tif (!usingAsyncReader) this._chunkLoaded({ target: { result: txt } }); // mimic the async signature\n\t\t\t};\n\t\n\t\t\tthis._chunkLoaded = function (event) {\n\t\t\t\t// Very important to increment start each time before handling results\n\t\t\t\tthis._start += this._config.chunkSize;\n\t\t\t\tthis._finished = !this._config.chunkSize || this._start >= this._input.size;\n\t\t\t\tthis.parseChunk(event.target.result);\n\t\t\t};\n\t\n\t\t\tthis._chunkError = function () {\n\t\t\t\tthis._sendError(reader.error);\n\t\t\t};\n\t\t}\n\t\tFileStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\t\tFileStreamer.prototype.constructor = FileStreamer;\n\t\n\t\tfunction StringStreamer(config) {\n\t\t\tconfig = config || {};\n\t\t\tChunkStreamer.call(this, config);\n\t\n\t\t\tvar string;\n\t\t\tvar remaining;\n\t\t\tthis.stream = function (s) {\n\t\t\t\tstring = s;\n\t\t\t\tremaining = s;\n\t\t\t\treturn this._nextChunk();\n\t\t\t};\n\t\t\tthis._nextChunk = function () {\n\t\t\t\tif (this._finished) return;\n\t\t\t\tvar size = this._config.chunkSize;\n\t\t\t\tvar chunk = size ? remaining.substr(0, size) : remaining;\n\t\t\t\tremaining = size ? remaining.substr(size) : '';\n\t\t\t\tthis._finished = !remaining;\n\t\t\t\treturn this.parseChunk(chunk);\n\t\t\t};\n\t\t}\n\t\tStringStreamer.prototype = Object.create(StringStreamer.prototype);\n\t\tStringStreamer.prototype.constructor = StringStreamer;\n\t\n\t\tfunction ReadableStreamStreamer(config) {\n\t\t\tconfig = config || {};\n\t\n\t\t\tChunkStreamer.call(this, config);\n\t\n\t\t\tvar queue = [];\n\t\t\tvar parseOnData = true;\n\t\n\t\t\tthis.stream = function (stream) {\n\t\t\t\tthis._input = stream;\n\t\n\t\t\t\tthis._input.on('data', this._streamData);\n\t\t\t\tthis._input.on('end', this._streamEnd);\n\t\t\t\tthis._input.on('error', this._streamError);\n\t\t\t};\n\t\n\t\t\tthis._nextChunk = function () {\n\t\t\t\tif (queue.length) {\n\t\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t\t} else {\n\t\t\t\t\tparseOnData = true;\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\tthis._streamData = bindFunction(function (chunk) {\n\t\t\t\ttry {\n\t\t\t\t\tqueue.push(typeof chunk === 'string' ? chunk : chunk.toString(this._config.encoding));\n\t\n\t\t\t\t\tif (parseOnData) {\n\t\t\t\t\t\tparseOnData = false;\n\t\t\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t\t\t}\n\t\t\t\t} catch (error) {\n\t\t\t\t\tthis._streamError(error);\n\t\t\t\t}\n\t\t\t}, this);\n\t\n\t\t\tthis._streamError = bindFunction(function (error) {\n\t\t\t\tthis._streamCleanUp();\n\t\t\t\tthis._sendError(error.message);\n\t\t\t}, this);\n\t\n\t\t\tthis._streamEnd = bindFunction(function () {\n\t\t\t\tthis._streamCleanUp();\n\t\t\t\tthis._finished = true;\n\t\t\t\tthis._streamData('');\n\t\t\t}, this);\n\t\n\t\t\tthis._streamCleanUp = bindFunction(function () {\n\t\t\t\tthis._input.removeListener('data', this._streamData);\n\t\t\t\tthis._input.removeListener('end', this._streamEnd);\n\t\t\t\tthis._input.removeListener('error', this._streamError);\n\t\t\t}, this);\n\t\t}\n\t\tReadableStreamStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\t\tReadableStreamStreamer.prototype.constructor = ReadableStreamStreamer;\n\t\n\t\t// Use one ParserHandle per entire CSV file or string\n\t\tfunction ParserHandle(_config) {\n\t\t\t// One goal is to minimize the use of regular expressions...\n\t\t\tvar FLOAT = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i;\n\t\n\t\t\tvar self = this;\n\t\t\tvar _stepCounter = 0; // Number of times step was called (number of rows parsed)\n\t\t\tvar _input; // The input being parsed\n\t\t\tvar _parser; // The core parser being used\n\t\t\tvar _paused = false; // Whether we are paused or not\n\t\t\tvar _aborted = false; // Whether the parser has aborted or not\n\t\t\tvar _delimiterError; // Temporary state between delimiter detection and processing results\n\t\t\tvar _fields = []; // Fields are from the header row of the input, if there is one\n\t\t\tvar _results = { // The last results returned from the parser\n\t\t\t\tdata: [],\n\t\t\t\terrors: [],\n\t\t\t\tmeta: {}\n\t\t\t};\n\t\n\t\t\tif (isFunction(_config.step)) {\n\t\t\t\tvar userStep = _config.step;\n\t\t\t\t_config.step = function (results) {\n\t\t\t\t\t_results = results;\n\t\n\t\t\t\t\tif (needsHeaderRow()) processResults();else // only call user's step function after header row\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tprocessResults();\n\t\n\t\t\t\t\t\t\t// It's possbile that this line was empty and there's no row here after all\n\t\t\t\t\t\t\tif (_results.data.length === 0) return;\n\t\n\t\t\t\t\t\t\t_stepCounter += results.data.length;\n\t\t\t\t\t\t\tif (_config.preview && _stepCounter > _config.preview) _parser.abort();else userStep(_results, self);\n\t\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\t/**\n\t   * Parses input. Most users won't need, and shouldn't mess with, the baseIndex\n\t   * and ignoreLastRow parameters. They are used by streamers (wrapper functions)\n\t   * when an input comes in multiple chunks, like from a file.\n\t   */\n\t\t\tthis.parse = function (input, baseIndex, ignoreLastRow) {\n\t\t\t\tif (!_config.newline) _config.newline = guessLineEndings(input);\n\t\n\t\t\t\t_delimiterError = false;\n\t\t\t\tif (!_config.delimiter) {\n\t\t\t\t\tvar delimGuess = guessDelimiter(input, _config.newline, _config.skipEmptyLines);\n\t\t\t\t\tif (delimGuess.successful) _config.delimiter = delimGuess.bestDelimiter;else {\n\t\t\t\t\t\t_delimiterError = true; // add error after parsing (otherwise it would be overwritten)\n\t\t\t\t\t\t_config.delimiter = Papa.DefaultDelimiter;\n\t\t\t\t\t}\n\t\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t\t} else if (isFunction(_config.delimiter)) {\n\t\t\t\t\t_config.delimiter = _config.delimiter(input);\n\t\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t\t}\n\t\n\t\t\t\tvar parserConfig = copy(_config);\n\t\t\t\tif (_config.preview && _config.header) parserConfig.preview++; // to compensate for header row\n\t\n\t\t\t\t_input = input;\n\t\t\t\t_parser = new Parser(parserConfig);\n\t\t\t\t_results = _parser.parse(_input, baseIndex, ignoreLastRow);\n\t\t\t\tprocessResults();\n\t\t\t\treturn _paused ? { meta: { paused: true } } : _results || { meta: { paused: false } };\n\t\t\t};\n\t\n\t\t\tthis.paused = function () {\n\t\t\t\treturn _paused;\n\t\t\t};\n\t\n\t\t\tthis.pause = function () {\n\t\t\t\t_paused = true;\n\t\t\t\t_parser.abort();\n\t\t\t\t_input = _input.substr(_parser.getCharIndex());\n\t\t\t};\n\t\n\t\t\tthis.resume = function () {\n\t\t\t\t_paused = false;\n\t\t\t\tself.streamer.parseChunk(_input);\n\t\t\t};\n\t\n\t\t\tthis.aborted = function () {\n\t\t\t\treturn _aborted;\n\t\t\t};\n\t\n\t\t\tthis.abort = function () {\n\t\t\t\t_aborted = true;\n\t\t\t\t_parser.abort();\n\t\t\t\t_results.meta.aborted = true;\n\t\t\t\tif (isFunction(_config.complete)) _config.complete(_results);\n\t\t\t\t_input = '';\n\t\t\t};\n\t\n\t\t\tfunction processResults() {\n\t\t\t\tif (_results && _delimiterError) {\n\t\t\t\t\taddError('Delimiter', 'UndetectableDelimiter', 'Unable to auto-detect delimiting character; defaulted to \\'' + Papa.DefaultDelimiter + '\\'');\n\t\t\t\t\t_delimiterError = false;\n\t\t\t\t}\n\t\n\t\t\t\tif (_config.skipEmptyLines) {\n\t\t\t\t\tfor (var i = 0; i < _results.data.length; i++) {\n\t\t\t\t\t\tif (_results.data[i].length === 1 && _results.data[i][0] === '') _results.data.splice(i--, 1);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (needsHeaderRow()) fillHeaderFields();\n\t\n\t\t\t\treturn applyHeaderAndDynamicTyping();\n\t\t\t}\n\t\n\t\t\tfunction needsHeaderRow() {\n\t\t\t\treturn _config.header && _fields.length === 0;\n\t\t\t}\n\t\n\t\t\tfunction fillHeaderFields() {\n\t\t\t\tif (!_results) return;\n\t\t\t\tfor (var i = 0; needsHeaderRow() && i < _results.data.length; i++) {\n\t\t\t\t\tfor (var j = 0; j < _results.data[i].length; j++) {\n\t\t\t\t\t\t_fields.push(_results.data[i][j]);\n\t\t\t\t\t}\n\t\t\t\t}_results.data.splice(0, 1);\n\t\t\t}\n\t\n\t\t\tfunction shouldApplyDynamicTyping(field) {\n\t\t\t\t// Cache function values to avoid calling it for each row\n\t\t\t\tif (_config.dynamicTypingFunction && _config.dynamicTyping[field] === undefined) {\n\t\t\t\t\t_config.dynamicTyping[field] = _config.dynamicTypingFunction(field);\n\t\t\t\t}\n\t\t\t\treturn (_config.dynamicTyping[field] || _config.dynamicTyping) === true;\n\t\t\t}\n\t\n\t\t\tfunction parseDynamic(field, value) {\n\t\t\t\tif (shouldApplyDynamicTyping(field)) {\n\t\t\t\t\tif (value === 'true' || value === 'TRUE') return true;else if (value === 'false' || value === 'FALSE') return false;else return tryParseFloat(value);\n\t\t\t\t}\n\t\t\t\treturn value;\n\t\t\t}\n\t\n\t\t\tfunction applyHeaderAndDynamicTyping() {\n\t\t\t\tif (!_results || !_config.header && !_config.dynamicTyping) return _results;\n\t\n\t\t\t\tfor (var i = 0; i < _results.data.length; i++) {\n\t\t\t\t\tvar row = _config.header ? {} : [];\n\t\n\t\t\t\t\tfor (var j = 0; j < _results.data[i].length; j++) {\n\t\t\t\t\t\tvar field = j;\n\t\t\t\t\t\tvar value = _results.data[i][j];\n\t\n\t\t\t\t\t\tif (_config.header) field = j >= _fields.length ? '__parsed_extra' : _fields[j];\n\t\n\t\t\t\t\t\tvalue = parseDynamic(field, value);\n\t\n\t\t\t\t\t\tif (field === '__parsed_extra') {\n\t\t\t\t\t\t\trow[field] = row[field] || [];\n\t\t\t\t\t\t\trow[field].push(value);\n\t\t\t\t\t\t} else row[field] = value;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t_results.data[i] = row;\n\t\n\t\t\t\t\tif (_config.header) {\n\t\t\t\t\t\tif (j > _fields.length) addError('FieldMismatch', 'TooManyFields', 'Too many fields: expected ' + _fields.length + ' fields but parsed ' + j, i);else if (j < _fields.length) addError('FieldMismatch', 'TooFewFields', 'Too few fields: expected ' + _fields.length + ' fields but parsed ' + j, i);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\tif (_config.header && _results.meta) _results.meta.fields = _fields;\n\t\t\t\treturn _results;\n\t\t\t}\n\t\n\t\t\tfunction guessDelimiter(input, newline, skipEmptyLines) {\n\t\t\t\tvar delimChoices = [',', '\\t', '|', ';', Papa.RECORD_SEP, Papa.UNIT_SEP];\n\t\t\t\tvar bestDelim, bestDelta, fieldCountPrevRow;\n\t\n\t\t\t\tfor (var i = 0; i < delimChoices.length; i++) {\n\t\t\t\t\tvar delim = delimChoices[i];\n\t\t\t\t\tvar delta = 0,\n\t\t\t\t\t    avgFieldCount = 0,\n\t\t\t\t\t    emptyLinesCount = 0;\n\t\t\t\t\tfieldCountPrevRow = undefined;\n\t\n\t\t\t\t\tvar preview = new Parser({\n\t\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\t\tnewline: newline,\n\t\t\t\t\t\tpreview: 10\n\t\t\t\t\t}).parse(input);\n\t\n\t\t\t\t\tfor (var j = 0; j < preview.data.length; j++) {\n\t\t\t\t\t\tif (skipEmptyLines && preview.data[j].length === 1 && preview.data[j][0].length === 0) {\n\t\t\t\t\t\t\temptyLinesCount++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\t\t\t\t\tvar fieldCount = preview.data[j].length;\n\t\t\t\t\t\tavgFieldCount += fieldCount;\n\t\n\t\t\t\t\t\tif (typeof fieldCountPrevRow === 'undefined') {\n\t\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t} else if (fieldCount > 1) {\n\t\t\t\t\t\t\tdelta += Math.abs(fieldCount - fieldCountPrevRow);\n\t\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\n\t\t\t\t\tif (preview.data.length > 0) avgFieldCount /= preview.data.length - emptyLinesCount;\n\t\n\t\t\t\t\tif ((typeof bestDelta === 'undefined' || delta < bestDelta) && avgFieldCount > 1.99) {\n\t\t\t\t\t\tbestDelta = delta;\n\t\t\t\t\t\tbestDelim = delim;\n\t\t\t\t\t}\n\t\t\t\t}\n\t\n\t\t\t\t_config.delimiter = bestDelim;\n\t\n\t\t\t\treturn {\n\t\t\t\t\tsuccessful: !!bestDelim,\n\t\t\t\t\tbestDelimiter: bestDelim\n\t\t\t\t};\n\t\t\t}\n\t\n\t\t\tfunction guessLineEndings(input) {\n\t\t\t\tinput = input.substr(0, 1024 * 1024); // max length 1 MB\n\t\n\t\t\t\tvar r = input.split('\\r');\n\t\n\t\t\t\tvar n = input.split('\\n');\n\t\n\t\t\t\tvar nAppearsFirst = n.length > 1 && n[0].length < r[0].length;\n\t\n\t\t\t\tif (r.length === 1 || nAppearsFirst) return '\\n';\n\t\n\t\t\t\tvar numWithN = 0;\n\t\t\t\tfor (var i = 0; i < r.length; i++) {\n\t\t\t\t\tif (r[i][0] === '\\n') numWithN++;\n\t\t\t\t}\n\t\n\t\t\t\treturn numWithN >= r.length / 2 ? '\\r\\n' : '\\r';\n\t\t\t}\n\t\n\t\t\tfunction tryParseFloat(val) {\n\t\t\t\tvar isNumber = FLOAT.test(val);\n\t\t\t\treturn isNumber ? parseFloat(val) : val;\n\t\t\t}\n\t\n\t\t\tfunction addError(type, code, msg, row) {\n\t\t\t\t_results.errors.push({\n\t\t\t\t\ttype: type,\n\t\t\t\t\tcode: code,\n\t\t\t\t\tmessage: msg,\n\t\t\t\t\trow: row\n\t\t\t\t});\n\t\t\t}\n\t\t}\n\t\n\t\t/** The core parser implements speedy and correct CSV parsing */\n\t\tfunction Parser(config) {\n\t\t\t// Unpack the config object\n\t\t\tconfig = config || {};\n\t\t\tvar delim = config.delimiter;\n\t\t\tvar newline = config.newline;\n\t\t\tvar comments = config.comments;\n\t\t\tvar step = config.step;\n\t\t\tvar preview = config.preview;\n\t\t\tvar fastMode = config.fastMode;\n\t\t\tvar quoteChar = config.quoteChar || '\"';\n\t\n\t\t\t// Delimiter must be valid\n\t\t\tif (typeof delim !== 'string' || Papa.BAD_DELIMITERS.indexOf(delim) > -1) delim = ',';\n\t\n\t\t\t// Comment character must be valid\n\t\t\tif (comments === delim) throw 'Comment character same as delimiter';else if (comments === true) comments = '#';else if (typeof comments !== 'string' || Papa.BAD_DELIMITERS.indexOf(comments) > -1) comments = false;\n\t\n\t\t\t// Newline must be valid: \\r, \\n, or \\r\\n\n\t\t\tif (newline != '\\n' && newline != '\\r' && newline != '\\r\\n') newline = '\\n';\n\t\n\t\t\t// We're gonna need these at the Parser scope\n\t\t\tvar cursor = 0;\n\t\t\tvar aborted = false;\n\t\n\t\t\tthis.parse = function (input, baseIndex, ignoreLastRow) {\n\t\t\t\t// For some reason, in Chrome, this speeds things up (!?)\n\t\t\t\tif (typeof input !== 'string') throw 'Input must be a string';\n\t\n\t\t\t\t// We don't need to compute some of these every time parse() is called,\n\t\t\t\t// but having them in a more local scope seems to perform better\n\t\t\t\tvar inputLen = input.length,\n\t\t\t\t    delimLen = delim.length,\n\t\t\t\t    newlineLen = newline.length,\n\t\t\t\t    commentsLen = comments.length;\n\t\t\t\tvar stepIsFunction = isFunction(step);\n\t\n\t\t\t\t// Establish starting state\n\t\t\t\tcursor = 0;\n\t\t\t\tvar data = [],\n\t\t\t\t    errors = [],\n\t\t\t\t    row = [],\n\t\t\t\t    lastCursor = 0;\n\t\n\t\t\t\tif (!input) return returnable();\n\t\n\t\t\t\tif (fastMode || fastMode !== false && input.indexOf(quoteChar) === -1) {\n\t\t\t\t\tvar rows = input.split(newline);\n\t\t\t\t\tfor (var i = 0; i < rows.length; i++) {\n\t\t\t\t\t\tvar row = rows[i];\n\t\t\t\t\t\tcursor += row.length;\n\t\t\t\t\t\tif (i !== rows.length - 1) cursor += newline.length;else if (ignoreLastRow) return returnable();\n\t\t\t\t\t\tif (comments && row.substr(0, commentsLen) === comments) continue;\n\t\t\t\t\t\tif (stepIsFunction) {\n\t\t\t\t\t\t\tdata = [];\n\t\t\t\t\t\t\tpushRow(row.split(delim));\n\t\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\t\tif (aborted) return returnable();\n\t\t\t\t\t\t} else pushRow(row.split(delim));\n\t\t\t\t\t\tif (preview && i >= preview) {\n\t\t\t\t\t\t\tdata = data.slice(0, preview);\n\t\t\t\t\t\t\treturn returnable(true);\n\t\t\t\t\t\t}\n\t\t\t\t\t}\n\t\t\t\t\treturn returnable();\n\t\t\t\t}\n\t\n\t\t\t\tvar nextDelim = input.indexOf(delim, cursor);\n\t\t\t\tvar nextNewline = input.indexOf(newline, cursor);\n\t\t\t\tvar quoteCharRegex = new RegExp(quoteChar + quoteChar, 'g');\n\t\n\t\t\t\t// Parser loop\n\t\t\t\tfor (;;) {\n\t\t\t\t\t// Field has opening quote\n\t\t\t\t\tif (input[cursor] === quoteChar) {\n\t\t\t\t\t\t// Start our search for the closing quote where the cursor is\n\t\t\t\t\t\tvar quoteSearch = cursor;\n\t\n\t\t\t\t\t\t// Skip the opening quote\n\t\t\t\t\t\tcursor++;\n\t\n\t\t\t\t\t\tfor (;;) {\n\t\t\t\t\t\t\t// Find closing quote\n\t\t\t\t\t\t\tvar quoteSearch = input.indexOf(quoteChar, quoteSearch + 1);\n\t\n\t\t\t\t\t\t\t//No other quotes are found - no other delimiters\n\t\t\t\t\t\t\tif (quoteSearch === -1) {\n\t\t\t\t\t\t\t\tif (!ignoreLastRow) {\n\t\t\t\t\t\t\t\t\t// No closing quote... what a pity\n\t\t\t\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\t\t\t\tcode: 'MissingQuotes',\n\t\t\t\t\t\t\t\t\t\tmessage: 'Quoted field unterminated',\n\t\t\t\t\t\t\t\t\t\trow: data.length, // row has yet to be inserted\n\t\t\t\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\treturn finish();\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Closing quote at EOF\n\t\t\t\t\t\t\tif (quoteSearch === inputLen - 1) {\n\t\t\t\t\t\t\t\tvar value = input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar);\n\t\t\t\t\t\t\t\treturn finish(value);\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// If this quote is escaped, it's part of the data; skip it\n\t\t\t\t\t\t\tif (input[quoteSearch + 1] === quoteChar) {\n\t\t\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Closing quote followed by delimiter\n\t\t\t\t\t\t\tif (input[quoteSearch + 1] === delim) {\n\t\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\t\tcursor = quoteSearch + 1 + delimLen;\n\t\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Closing quote followed by newline\n\t\t\t\t\t\t\tif (input.substr(quoteSearch + 1, newlineLen) === newline) {\n\t\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\t\tsaveRow(quoteSearch + 1 + newlineLen);\n\t\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor); // because we may have skipped the nextDelim in the quoted field\n\t\n\t\t\t\t\t\t\t\tif (stepIsFunction) {\n\t\t\t\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\t\t\t\tif (aborted) return returnable();\n\t\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t\tif (preview && data.length >= preview) return returnable(true);\n\t\n\t\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\t\t// Checks for valid closing quotes are complete (escaped quotes or quote followed by EOF/delimiter/newline) -- assume these quotes are part of an invalid text string\n\t\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\t\tcode: 'InvalidQuotes',\n\t\t\t\t\t\t\t\tmessage: 'Trailing quote on quoted field is malformed',\n\t\t\t\t\t\t\t\trow: data.length, // row has yet to be inserted\n\t\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t\t});\n\t\n\t\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Comment found at start of new line\n\t\t\t\t\tif (comments && row.length === 0 && input.substr(cursor, commentsLen) === comments) {\n\t\t\t\t\t\tif (nextNewline === -1) // Comment ends at EOF\n\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t\tcursor = nextNewline + newlineLen;\n\t\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// Next delimiter comes before next newline, so we've reached end of field\n\t\t\t\t\tif (nextDelim !== -1 && (nextDelim < nextNewline || nextNewline === -1)) {\n\t\t\t\t\t\trow.push(input.substring(cursor, nextDelim));\n\t\t\t\t\t\tcursor = nextDelim + delimLen;\n\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\t// End of row\n\t\t\t\t\tif (nextNewline !== -1) {\n\t\t\t\t\t\trow.push(input.substring(cursor, nextNewline));\n\t\t\t\t\t\tsaveRow(nextNewline + newlineLen);\n\t\n\t\t\t\t\t\tif (stepIsFunction) {\n\t\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\t\tif (aborted) return returnable();\n\t\t\t\t\t\t}\n\t\n\t\t\t\t\t\tif (preview && data.length >= preview) return returnable(true);\n\t\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\n\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\n\t\t\t\treturn finish();\n\t\n\t\t\t\tfunction pushRow(row) {\n\t\t\t\t\tdata.push(row);\n\t\t\t\t\tlastCursor = cursor;\n\t\t\t\t}\n\t\n\t\t\t\t/**\n\t    * Appends the remaining input from cursor to the end into\n\t    * row, saves the row, calls step, and returns the results.\n\t    */\n\t\t\t\tfunction finish(value) {\n\t\t\t\t\tif (ignoreLastRow) return returnable();\n\t\t\t\t\tif (typeof value === 'undefined') value = input.substr(cursor);\n\t\t\t\t\trow.push(value);\n\t\t\t\t\tcursor = inputLen; // important in case parsing is paused\n\t\t\t\t\tpushRow(row);\n\t\t\t\t\tif (stepIsFunction) doStep();\n\t\t\t\t\treturn returnable();\n\t\t\t\t}\n\t\n\t\t\t\t/**\n\t    * Appends the current row to the results. It sets the cursor\n\t    * to newCursor and finds the nextNewline. The caller should\n\t    * take care to execute user's step function and check for\n\t    * preview and end parsing if necessary.\n\t    */\n\t\t\t\tfunction saveRow(newCursor) {\n\t\t\t\t\tcursor = newCursor;\n\t\t\t\t\tpushRow(row);\n\t\t\t\t\trow = [];\n\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t}\n\t\n\t\t\t\t/** Returns an object with the results, errors, and meta. */\n\t\t\t\tfunction returnable(stopped) {\n\t\t\t\t\treturn {\n\t\t\t\t\t\tdata: data,\n\t\t\t\t\t\terrors: errors,\n\t\t\t\t\t\tmeta: {\n\t\t\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\t\t\tlinebreak: newline,\n\t\t\t\t\t\t\taborted: aborted,\n\t\t\t\t\t\t\ttruncated: !!stopped,\n\t\t\t\t\t\t\tcursor: lastCursor + (baseIndex || 0)\n\t\t\t\t\t\t}\n\t\t\t\t\t};\n\t\t\t\t}\n\t\n\t\t\t\t/** Executes the user's step function and resets data & errors. */\n\t\t\t\tfunction doStep() {\n\t\t\t\t\tstep(returnable());\n\t\t\t\t\tdata = [], errors = [];\n\t\t\t\t}\n\t\t\t};\n\t\n\t\t\t/** Sets the abort flag */\n\t\t\tthis.abort = function () {\n\t\t\t\taborted = true;\n\t\t\t};\n\t\n\t\t\t/** Gets the cursor position */\n\t\t\tthis.getCharIndex = function () {\n\t\t\t\treturn cursor;\n\t\t\t};\n\t\t}\n\t\n\t\t// If you need to load Papa Parse asynchronously and you also need worker threads, hard-code\n\t\t// the script path here. See: https://github.com/mholt/PapaParse/issues/87#issuecomment-57885358\n\t\tfunction getScriptPath() {\n\t\t\tvar scripts = document.getElementsByTagName('script');\n\t\t\treturn scripts.length ? scripts[scripts.length - 1].src : '';\n\t\t}\n\t\n\t\tfunction newWorker() {\n\t\t\tif (!Papa.WORKERS_SUPPORTED) return false;\n\t\t\tif (!LOADED_SYNC && Papa.SCRIPT_PATH === null) throw new Error('Script path cannot be determined automatically when Papa Parse is loaded asynchronously. ' + 'You need to set Papa.SCRIPT_PATH manually.');\n\t\t\tvar workerUrl = Papa.SCRIPT_PATH || AUTO_SCRIPT_PATH;\n\t\t\t// Append 'papaworker' to the search string to tell papaparse that this is our worker.\n\t\t\tworkerUrl += (workerUrl.indexOf('?') !== -1 ? '&' : '?') + 'papaworker';\n\t\t\tvar w = new global.Worker(workerUrl);\n\t\t\tw.onmessage = mainThreadReceivedMessage;\n\t\t\tw.id = workerIdCounter++;\n\t\t\tworkers[w.id] = w;\n\t\t\treturn w;\n\t\t}\n\t\n\t\t/** Callback when main thread receives a message */\n\t\tfunction mainThreadReceivedMessage(e) {\n\t\t\tvar msg = e.data;\n\t\t\tvar worker = workers[msg.workerId];\n\t\t\tvar aborted = false;\n\t\n\t\t\tif (msg.error) worker.userError(msg.error, msg.file);else if (msg.results && msg.results.data) {\n\t\t\t\tvar abort = function abort() {\n\t\t\t\t\taborted = true;\n\t\t\t\t\tcompleteWorker(msg.workerId, { data: [], errors: [], meta: { aborted: true } });\n\t\t\t\t};\n\t\n\t\t\t\tvar handle = {\n\t\t\t\t\tabort: abort,\n\t\t\t\t\tpause: notImplemented,\n\t\t\t\t\tresume: notImplemented\n\t\t\t\t};\n\t\n\t\t\t\tif (isFunction(worker.userStep)) {\n\t\t\t\t\tfor (var i = 0; i < msg.results.data.length; i++) {\n\t\t\t\t\t\tworker.userStep({\n\t\t\t\t\t\t\tdata: [msg.results.data[i]],\n\t\t\t\t\t\t\terrors: msg.results.errors,\n\t\t\t\t\t\t\tmeta: msg.results.meta\n\t\t\t\t\t\t}, handle);\n\t\t\t\t\t\tif (aborted) break;\n\t\t\t\t\t}\n\t\t\t\t\tdelete msg.results; // free memory ASAP\n\t\t\t\t} else if (isFunction(worker.userChunk)) {\n\t\t\t\t\tworker.userChunk(msg.results, handle, msg.file);\n\t\t\t\t\tdelete msg.results;\n\t\t\t\t}\n\t\t\t}\n\t\n\t\t\tif (msg.finished && !aborted) completeWorker(msg.workerId, msg.results);\n\t\t}\n\t\n\t\tfunction completeWorker(workerId, results) {\n\t\t\tvar worker = workers[workerId];\n\t\t\tif (isFunction(worker.userComplete)) worker.userComplete(results);\n\t\t\tworker.terminate();\n\t\t\tdelete workers[workerId];\n\t\t}\n\t\n\t\tfunction notImplemented() {\n\t\t\tthrow 'Not implemented.';\n\t\t}\n\t\n\t\t/** Callback when worker thread receives a message */\n\t\tfunction workerThreadReceivedMessage(e) {\n\t\t\tvar msg = e.data;\n\t\n\t\t\tif (typeof Papa.WORKER_ID === 'undefined' && msg) Papa.WORKER_ID = msg.workerId;\n\t\n\t\t\tif (typeof msg.input === 'string') {\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\tresults: Papa.parse(msg.input, msg.config),\n\t\t\t\t\tfinished: true\n\t\t\t\t});\n\t\t\t} else if (global.File && msg.input instanceof File || msg.input instanceof Object) // thank you, Safari (see issue #106)\n\t\t\t\t{\n\t\t\t\t\tvar results = Papa.parse(msg.input, msg.config);\n\t\t\t\t\tif (results) global.postMessage({\n\t\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\t\tresults: results,\n\t\t\t\t\t\tfinished: true\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t}\n\t\n\t\t/** Makes a deep copy of an array or object (mostly) */\n\t\tfunction copy(obj) {\n\t\t\tif ((typeof obj === 'undefined' ? 'undefined' : _typeof(obj)) !== 'object') return obj;\n\t\t\tvar cpy = obj instanceof Array ? [] : {};\n\t\t\tfor (var key in obj) {\n\t\t\t\tcpy[key] = copy(obj[key]);\n\t\t\t}return cpy;\n\t\t}\n\t\n\t\tfunction bindFunction(f, self) {\n\t\t\treturn function () {\n\t\t\t\tf.apply(self, arguments);\n\t\t\t};\n\t\t}\n\t\n\t\tfunction isFunction(func) {\n\t\t\treturn typeof func === 'function';\n\t\t}\n\t\n\t\treturn Papa;\n\t});\n\n/***/ }\n/******/ ]);\n\n\n// WEBPACK FOOTER //\n// vizabi-ddfcsv-reader-node.js"," \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 28a8d3d60cfc5c064e29","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst backend_file_reader_1 = require(\"./file-readers/backend-file-reader\");\nvar backend_file_reader_2 = require(\"./file-readers/backend-file-reader\");\nexports.BackendFileReader = backend_file_reader_2.BackendFileReader;\nconst github_file_reader_1 = require(\"./file-readers/github-file-reader\");\nvar github_file_reader_2 = require(\"./file-readers/github-file-reader\");\nexports.GithubFileReader = github_file_reader_2.GithubFileReader;\nconst ddfcsv_reader_1 = require(\"./ddfcsv-reader\");\nexports.getDDFCsvReaderObject = ddfcsv_reader_1.prepareDDFCsvReaderObject(new backend_file_reader_1.BackendFileReader());\nexports.getGithubDDFCsvReaderObject = ddfcsv_reader_1.prepareDDFCsvReaderObject(new github_file_reader_1.GithubFileReader());\n//# sourceMappingURL=index.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/index.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst fs = require(\"fs\");\nclass BackendFileReader {\n    setRecordTransformer(recordTransformer) {\n        this.recordTransformer = recordTransformer;\n    }\n    readText(filePath, onFileRead) {\n        fs.readFile(filePath, 'utf-8', (err, content) => {\n            if (err) {\n                onFileRead(err);\n                return;\n            }\n            onFileRead(null, content.toString());\n        });\n    }\n}\nexports.BackendFileReader = BackendFileReader;\n//# sourceMappingURL=backend-file-reader.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/file-readers/backend-file-reader.js","module.exports = require(\"fs\");\n\n\n//////////////////\n// WEBPACK FOOTER\n// external \"fs\"\n// module id = 2\n// module chunks = 0","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nclass GithubFileReader {\n    setRecordTransformer(recordTransformer) {\n        this.recordTransformer = recordTransformer;\n    }\n    readText(filePath, onFileRead) {\n    }\n}\nexports.GithubFileReader = GithubFileReader;\n//# sourceMappingURL=github-file-reader.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/file-readers/github-file-reader.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Promise = require(\"bluebird\");\nconst ddf_csv_1 = require(\"./ddf-csv\");\nfunction prepareDDFCsvReaderObject(defaultFileReader) {\n    return function (externalFileReader, logger) {\n        return {\n            init(readerInfo) {\n                this._basepath = readerInfo.path;\n                this._lastModified = readerInfo._lastModified;\n                this.fileReader = externalFileReader || defaultFileReader;\n                this.logger = logger;\n                this.reader = ddf_csv_1.ddfCsvReader(`${this._basepath}/datapackage.json`, this.fileReader, this.logger);\n            },\n            getAsset(asset) {\n                const isJsonAsset = asset.slice(-'.json'.length) === '.json';\n                return new Promise((resolve, reject) => {\n                    this.fileReader.readText(`${this._basepath}/${asset}`, (err, data) => {\n                        if (err) {\n                            reject(err);\n                            return;\n                        }\n                        if (isJsonAsset) {\n                            try {\n                                resolve(JSON.parse(data));\n                            }\n                            catch (jsonErr) {\n                                reject(err);\n                            }\n                        }\n                        else {\n                            resolve(data);\n                        }\n                    });\n                });\n            },\n            read(queryPar, parsers) {\n                function prettifyData(data) {\n                    return data.map(record => {\n                        const keys = Object.keys(record);\n                        keys.forEach(key => {\n                            if (parsers[key]) {\n                                record[key] = parsers[key](record[key]);\n                            }\n                        });\n                        return record;\n                    });\n                }\n                return new Promise(resolve => {\n                    this.reader.query(queryPar).then(result => {\n                        result = parsers ? prettifyData(result) : result;\n                        if (this.logger && this.logger.log) {\n                            logger.log(JSON.stringify(queryPar), result.length);\n                            logger.log(result);\n                        }\n                        resolve(result);\n                    });\n                });\n            }\n        };\n    };\n}\nexports.prepareDDFCsvReaderObject = prepareDDFCsvReaderObject;\n//# sourceMappingURL=ddfcsv-reader.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/ddfcsv-reader.js","\"use strict\";\nvar old;\nif (typeof Promise !== \"undefined\") old = Promise;\nfunction noConflict() {\n    try { if (Promise === bluebird) Promise = old; }\n    catch (e) {}\n    return bluebird;\n}\nvar bluebird = require(\"./promise\")();\nbluebird.noConflict = noConflict;\nmodule.exports = bluebird;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/bluebird.js","\"use strict\";\nmodule.exports = function() {\nvar makeSelfResolutionError = function () {\n    return new TypeError(\"circular promise resolution chain\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar reflectHandler = function() {\n    return new Promise.PromiseInspection(this._target());\n};\nvar apiRejection = function(msg) {\n    return Promise.reject(new TypeError(msg));\n};\nfunction Proxyable() {}\nvar UNDEFINED_BINDING = {};\nvar util = require(\"./util\");\n\nvar getDomain;\nif (util.isNode) {\n    getDomain = function() {\n        var ret = process.domain;\n        if (ret === undefined) ret = null;\n        return ret;\n    };\n} else {\n    getDomain = function() {\n        return null;\n    };\n}\nutil.notEnumerableProp(Promise, \"_getDomain\", getDomain);\n\nvar es5 = require(\"./es5\");\nvar Async = require(\"./async\");\nvar async = new Async();\nes5.defineProperty(Promise, \"_async\", {value: async});\nvar errors = require(\"./errors\");\nvar TypeError = Promise.TypeError = errors.TypeError;\nPromise.RangeError = errors.RangeError;\nvar CancellationError = Promise.CancellationError = errors.CancellationError;\nPromise.TimeoutError = errors.TimeoutError;\nPromise.OperationalError = errors.OperationalError;\nPromise.RejectionError = errors.OperationalError;\nPromise.AggregateError = errors.AggregateError;\nvar INTERNAL = function(){};\nvar APPLY = {};\nvar NEXT_FILTER = {};\nvar tryConvertToPromise = require(\"./thenables\")(Promise, INTERNAL);\nvar PromiseArray =\n    require(\"./promise_array\")(Promise, INTERNAL,\n                               tryConvertToPromise, apiRejection, Proxyable);\nvar Context = require(\"./context\")(Promise);\n /*jshint unused:false*/\nvar createContext = Context.create;\nvar debug = require(\"./debuggability\")(Promise, Context);\nvar CapturedTrace = debug.CapturedTrace;\nvar PassThroughHandlerContext =\n    require(\"./finally\")(Promise, tryConvertToPromise, NEXT_FILTER);\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\nvar nodebackForPromise = require(\"./nodeback\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nfunction check(self, executor) {\n    if (self == null || self.constructor !== Promise) {\n        throw new TypeError(\"the promise constructor cannot be invoked directly\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (typeof executor !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(executor));\n    }\n\n}\n\nfunction Promise(executor) {\n    if (executor !== INTERNAL) {\n        check(this, executor);\n    }\n    this._bitField = 0;\n    this._fulfillmentHandler0 = undefined;\n    this._rejectionHandler0 = undefined;\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._resolveFromExecutor(executor);\n    this._promiseCreated();\n    this._fireEvent(\"promiseCreated\", this);\n}\n\nPromise.prototype.toString = function () {\n    return \"[object Promise]\";\n};\n\nPromise.prototype.caught = Promise.prototype[\"catch\"] = function (fn) {\n    var len = arguments.length;\n    if (len > 1) {\n        var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return apiRejection(\"Catch statement predicate: \" +\n                    \"expecting an object but got \" + util.classString(item));\n            }\n        }\n        catchInstances.length = j;\n        fn = arguments[i];\n        return this.then(undefined, catchFilter(catchInstances, fn, this));\n    }\n    return this.then(undefined, fn);\n};\n\nPromise.prototype.reflect = function () {\n    return this._then(reflectHandler,\n        reflectHandler, undefined, this, undefined);\n};\n\nPromise.prototype.then = function (didFulfill, didReject) {\n    if (debug.warnings() && arguments.length > 0 &&\n        typeof didFulfill !== \"function\" &&\n        typeof didReject !== \"function\") {\n        var msg = \".then() only accepts functions but was passed: \" +\n                util.classString(didFulfill);\n        if (arguments.length > 1) {\n            msg += \", \" + util.classString(didReject);\n        }\n        this._warn(msg);\n    }\n    return this._then(didFulfill, didReject, undefined, undefined, undefined);\n};\n\nPromise.prototype.done = function (didFulfill, didReject) {\n    var promise =\n        this._then(didFulfill, didReject, undefined, undefined, undefined);\n    promise._setIsFinal();\n};\n\nPromise.prototype.spread = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    return this.all()._then(fn, undefined, undefined, APPLY, undefined);\n};\n\nPromise.prototype.toJSON = function () {\n    var ret = {\n        isFulfilled: false,\n        isRejected: false,\n        fulfillmentValue: undefined,\n        rejectionReason: undefined\n    };\n    if (this.isFulfilled()) {\n        ret.fulfillmentValue = this.value();\n        ret.isFulfilled = true;\n    } else if (this.isRejected()) {\n        ret.rejectionReason = this.reason();\n        ret.isRejected = true;\n    }\n    return ret;\n};\n\nPromise.prototype.all = function () {\n    if (arguments.length > 0) {\n        this._warn(\".all() was passed arguments but it does not take any\");\n    }\n    return new PromiseArray(this).promise();\n};\n\nPromise.prototype.error = function (fn) {\n    return this.caught(util.originatesFromRejection, fn);\n};\n\nPromise.getNewLibraryCopy = module.exports;\n\nPromise.is = function (val) {\n    return val instanceof Promise;\n};\n\nPromise.fromNode = Promise.fromCallback = function(fn) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    var multiArgs = arguments.length > 1 ? !!Object(arguments[1]).multiArgs\n                                         : false;\n    var result = tryCatch(fn)(nodebackForPromise(ret, multiArgs));\n    if (result === errorObj) {\n        ret._rejectCallback(result.e, true);\n    }\n    if (!ret._isFateSealed()) ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.all = function (promises) {\n    return new PromiseArray(promises).promise();\n};\n\nPromise.cast = function (obj) {\n    var ret = tryConvertToPromise(obj);\n    if (!(ret instanceof Promise)) {\n        ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._setFulfilled();\n        ret._rejectionHandler0 = obj;\n    }\n    return ret;\n};\n\nPromise.resolve = Promise.fulfilled = Promise.cast;\n\nPromise.reject = Promise.rejected = function (reason) {\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._rejectCallback(reason, true);\n    return ret;\n};\n\nPromise.setScheduler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return async.setScheduler(fn);\n};\n\nPromise.prototype._then = function (\n    didFulfill,\n    didReject,\n    _,    receiver,\n    internalData\n) {\n    var haveInternalData = internalData !== undefined;\n    var promise = haveInternalData ? internalData : new Promise(INTERNAL);\n    var target = this._target();\n    var bitField = target._bitField;\n\n    if (!haveInternalData) {\n        promise._propagateFrom(this, 3);\n        promise._captureStackTrace();\n        if (receiver === undefined &&\n            ((this._bitField & 2097152) !== 0)) {\n            if (!((bitField & 50397184) === 0)) {\n                receiver = this._boundValue();\n            } else {\n                receiver = target === this ? undefined : this._boundTo;\n            }\n        }\n        this._fireEvent(\"promiseChained\", this, promise);\n    }\n\n    var domain = getDomain();\n    if (!((bitField & 50397184) === 0)) {\n        var handler, value, settler = target._settlePromiseCtx;\n        if (((bitField & 33554432) !== 0)) {\n            value = target._rejectionHandler0;\n            handler = didFulfill;\n        } else if (((bitField & 16777216) !== 0)) {\n            value = target._fulfillmentHandler0;\n            handler = didReject;\n            target._unsetRejectionIsUnhandled();\n        } else {\n            settler = target._settlePromiseLateCancellationObserver;\n            value = new CancellationError(\"late cancellation observer\");\n            target._attachExtraTrace(value);\n            handler = didReject;\n        }\n\n        async.invoke(settler, target, {\n            handler: domain === null ? handler\n                : (typeof handler === \"function\" &&\n                    util.domainBind(domain, handler)),\n            promise: promise,\n            receiver: receiver,\n            value: value\n        });\n    } else {\n        target._addCallbacks(didFulfill, didReject, promise, receiver, domain);\n    }\n\n    return promise;\n};\n\nPromise.prototype._length = function () {\n    return this._bitField & 65535;\n};\n\nPromise.prototype._isFateSealed = function () {\n    return (this._bitField & 117506048) !== 0;\n};\n\nPromise.prototype._isFollowing = function () {\n    return (this._bitField & 67108864) === 67108864;\n};\n\nPromise.prototype._setLength = function (len) {\n    this._bitField = (this._bitField & -65536) |\n        (len & 65535);\n};\n\nPromise.prototype._setFulfilled = function () {\n    this._bitField = this._bitField | 33554432;\n    this._fireEvent(\"promiseFulfilled\", this);\n};\n\nPromise.prototype._setRejected = function () {\n    this._bitField = this._bitField | 16777216;\n    this._fireEvent(\"promiseRejected\", this);\n};\n\nPromise.prototype._setFollowing = function () {\n    this._bitField = this._bitField | 67108864;\n    this._fireEvent(\"promiseResolved\", this);\n};\n\nPromise.prototype._setIsFinal = function () {\n    this._bitField = this._bitField | 4194304;\n};\n\nPromise.prototype._isFinal = function () {\n    return (this._bitField & 4194304) > 0;\n};\n\nPromise.prototype._unsetCancelled = function() {\n    this._bitField = this._bitField & (~65536);\n};\n\nPromise.prototype._setCancelled = function() {\n    this._bitField = this._bitField | 65536;\n    this._fireEvent(\"promiseCancelled\", this);\n};\n\nPromise.prototype._setWillBeCancelled = function() {\n    this._bitField = this._bitField | 8388608;\n};\n\nPromise.prototype._setAsyncGuaranteed = function() {\n    if (async.hasCustomScheduler()) return;\n    this._bitField = this._bitField | 134217728;\n};\n\nPromise.prototype._receiverAt = function (index) {\n    var ret = index === 0 ? this._receiver0 : this[\n            index * 4 - 4 + 3];\n    if (ret === UNDEFINED_BINDING) {\n        return undefined;\n    } else if (ret === undefined && this._isBound()) {\n        return this._boundValue();\n    }\n    return ret;\n};\n\nPromise.prototype._promiseAt = function (index) {\n    return this[\n            index * 4 - 4 + 2];\n};\n\nPromise.prototype._fulfillmentHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 0];\n};\n\nPromise.prototype._rejectionHandlerAt = function (index) {\n    return this[\n            index * 4 - 4 + 1];\n};\n\nPromise.prototype._boundValue = function() {};\n\nPromise.prototype._migrateCallback0 = function (follower) {\n    var bitField = follower._bitField;\n    var fulfill = follower._fulfillmentHandler0;\n    var reject = follower._rejectionHandler0;\n    var promise = follower._promise0;\n    var receiver = follower._receiverAt(0);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._migrateCallbackAt = function (follower, index) {\n    var fulfill = follower._fulfillmentHandlerAt(index);\n    var reject = follower._rejectionHandlerAt(index);\n    var promise = follower._promiseAt(index);\n    var receiver = follower._receiverAt(index);\n    if (receiver === undefined) receiver = UNDEFINED_BINDING;\n    this._addCallbacks(fulfill, reject, promise, receiver, null);\n};\n\nPromise.prototype._addCallbacks = function (\n    fulfill,\n    reject,\n    promise,\n    receiver,\n    domain\n) {\n    var index = this._length();\n\n    if (index >= 65535 - 4) {\n        index = 0;\n        this._setLength(0);\n    }\n\n    if (index === 0) {\n        this._promise0 = promise;\n        this._receiver0 = receiver;\n        if (typeof fulfill === \"function\") {\n            this._fulfillmentHandler0 =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this._rejectionHandler0 =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    } else {\n        var base = index * 4 - 4;\n        this[base + 2] = promise;\n        this[base + 3] = receiver;\n        if (typeof fulfill === \"function\") {\n            this[base + 0] =\n                domain === null ? fulfill : util.domainBind(domain, fulfill);\n        }\n        if (typeof reject === \"function\") {\n            this[base + 1] =\n                domain === null ? reject : util.domainBind(domain, reject);\n        }\n    }\n    this._setLength(index + 1);\n    return index;\n};\n\nPromise.prototype._proxy = function (proxyable, arg) {\n    this._addCallbacks(undefined, undefined, arg, proxyable, null);\n};\n\nPromise.prototype._resolveCallback = function(value, shouldBind) {\n    if (((this._bitField & 117506048) !== 0)) return;\n    if (value === this)\n        return this._rejectCallback(makeSelfResolutionError(), false);\n    var maybePromise = tryConvertToPromise(value, this);\n    if (!(maybePromise instanceof Promise)) return this._fulfill(value);\n\n    if (shouldBind) this._propagateFrom(maybePromise, 2);\n\n    var promise = maybePromise._target();\n\n    if (promise === this) {\n        this._reject(makeSelfResolutionError());\n        return;\n    }\n\n    var bitField = promise._bitField;\n    if (((bitField & 50397184) === 0)) {\n        var len = this._length();\n        if (len > 0) promise._migrateCallback0(this);\n        for (var i = 1; i < len; ++i) {\n            promise._migrateCallbackAt(this, i);\n        }\n        this._setFollowing();\n        this._setLength(0);\n        this._setFollowee(promise);\n    } else if (((bitField & 33554432) !== 0)) {\n        this._fulfill(promise._value());\n    } else if (((bitField & 16777216) !== 0)) {\n        this._reject(promise._reason());\n    } else {\n        var reason = new CancellationError(\"late cancellation observer\");\n        promise._attachExtraTrace(reason);\n        this._reject(reason);\n    }\n};\n\nPromise.prototype._rejectCallback =\nfunction(reason, synchronous, ignoreNonErrorWarnings) {\n    var trace = util.ensureErrorObject(reason);\n    var hasStack = trace === reason;\n    if (!hasStack && !ignoreNonErrorWarnings && debug.warnings()) {\n        var message = \"a promise was rejected with a non-error: \" +\n            util.classString(reason);\n        this._warn(message, true);\n    }\n    this._attachExtraTrace(trace, synchronous ? hasStack : false);\n    this._reject(reason);\n};\n\nPromise.prototype._resolveFromExecutor = function (executor) {\n    if (executor === INTERNAL) return;\n    var promise = this;\n    this._captureStackTrace();\n    this._pushContext();\n    var synchronous = true;\n    var r = this._execute(executor, function(value) {\n        promise._resolveCallback(value);\n    }, function (reason) {\n        promise._rejectCallback(reason, synchronous);\n    });\n    synchronous = false;\n    this._popContext();\n\n    if (r !== undefined) {\n        promise._rejectCallback(r, true);\n    }\n};\n\nPromise.prototype._settlePromiseFromHandler = function (\n    handler, receiver, value, promise\n) {\n    var bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n    promise._pushContext();\n    var x;\n    if (receiver === APPLY) {\n        if (!value || typeof value.length !== \"number\") {\n            x = errorObj;\n            x.e = new TypeError(\"cannot .spread() a non-array: \" +\n                                    util.classString(value));\n        } else {\n            x = tryCatch(handler).apply(this._boundValue(), value);\n        }\n    } else {\n        x = tryCatch(handler).call(receiver, value);\n    }\n    var promiseCreated = promise._popContext();\n    bitField = promise._bitField;\n    if (((bitField & 65536) !== 0)) return;\n\n    if (x === NEXT_FILTER) {\n        promise._reject(value);\n    } else if (x === errorObj) {\n        promise._rejectCallback(x.e, false);\n    } else {\n        debug.checkForgottenReturns(x, promiseCreated, \"\",  promise, this);\n        promise._resolveCallback(x);\n    }\n};\n\nPromise.prototype._target = function() {\n    var ret = this;\n    while (ret._isFollowing()) ret = ret._followee();\n    return ret;\n};\n\nPromise.prototype._followee = function() {\n    return this._rejectionHandler0;\n};\n\nPromise.prototype._setFollowee = function(promise) {\n    this._rejectionHandler0 = promise;\n};\n\nPromise.prototype._settlePromise = function(promise, handler, receiver, value) {\n    var isPromise = promise instanceof Promise;\n    var bitField = this._bitField;\n    var asyncGuaranteed = ((bitField & 134217728) !== 0);\n    if (((bitField & 65536) !== 0)) {\n        if (isPromise) promise._invokeInternalOnCancel();\n\n        if (receiver instanceof PassThroughHandlerContext &&\n            receiver.isFinallyHandler()) {\n            receiver.cancelPromise = promise;\n            if (tryCatch(handler).call(receiver, value) === errorObj) {\n                promise._reject(errorObj.e);\n            }\n        } else if (handler === reflectHandler) {\n            promise._fulfill(reflectHandler.call(receiver));\n        } else if (receiver instanceof Proxyable) {\n            receiver._promiseCancelled(promise);\n        } else if (isPromise || promise instanceof PromiseArray) {\n            promise._cancel();\n        } else {\n            receiver.cancel();\n        }\n    } else if (typeof handler === \"function\") {\n        if (!isPromise) {\n            handler.call(receiver, value, promise);\n        } else {\n            if (asyncGuaranteed) promise._setAsyncGuaranteed();\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (receiver instanceof Proxyable) {\n        if (!receiver._isResolved()) {\n            if (((bitField & 33554432) !== 0)) {\n                receiver._promiseFulfilled(value, promise);\n            } else {\n                receiver._promiseRejected(value, promise);\n            }\n        }\n    } else if (isPromise) {\n        if (asyncGuaranteed) promise._setAsyncGuaranteed();\n        if (((bitField & 33554432) !== 0)) {\n            promise._fulfill(value);\n        } else {\n            promise._reject(value);\n        }\n    }\n};\n\nPromise.prototype._settlePromiseLateCancellationObserver = function(ctx) {\n    var handler = ctx.handler;\n    var promise = ctx.promise;\n    var receiver = ctx.receiver;\n    var value = ctx.value;\n    if (typeof handler === \"function\") {\n        if (!(promise instanceof Promise)) {\n            handler.call(receiver, value, promise);\n        } else {\n            this._settlePromiseFromHandler(handler, receiver, value, promise);\n        }\n    } else if (promise instanceof Promise) {\n        promise._reject(value);\n    }\n};\n\nPromise.prototype._settlePromiseCtx = function(ctx) {\n    this._settlePromise(ctx.promise, ctx.handler, ctx.receiver, ctx.value);\n};\n\nPromise.prototype._settlePromise0 = function(handler, value, bitField) {\n    var promise = this._promise0;\n    var receiver = this._receiverAt(0);\n    this._promise0 = undefined;\n    this._receiver0 = undefined;\n    this._settlePromise(promise, handler, receiver, value);\n};\n\nPromise.prototype._clearCallbackDataAtIndex = function(index) {\n    var base = index * 4 - 4;\n    this[base + 2] =\n    this[base + 3] =\n    this[base + 0] =\n    this[base + 1] = undefined;\n};\n\nPromise.prototype._fulfill = function (value) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    if (value === this) {\n        var err = makeSelfResolutionError();\n        this._attachExtraTrace(err);\n        return this._reject(err);\n    }\n    this._setFulfilled();\n    this._rejectionHandler0 = value;\n\n    if ((bitField & 65535) > 0) {\n        if (((bitField & 134217728) !== 0)) {\n            this._settlePromises();\n        } else {\n            async.settlePromises(this);\n        }\n    }\n};\n\nPromise.prototype._reject = function (reason) {\n    var bitField = this._bitField;\n    if (((bitField & 117506048) >>> 16)) return;\n    this._setRejected();\n    this._fulfillmentHandler0 = reason;\n\n    if (this._isFinal()) {\n        return async.fatalError(reason, util.isNode);\n    }\n\n    if ((bitField & 65535) > 0) {\n        async.settlePromises(this);\n    } else {\n        this._ensurePossibleRejectionHandled();\n    }\n};\n\nPromise.prototype._fulfillPromises = function (len, value) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._fulfillmentHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, value);\n    }\n};\n\nPromise.prototype._rejectPromises = function (len, reason) {\n    for (var i = 1; i < len; i++) {\n        var handler = this._rejectionHandlerAt(i);\n        var promise = this._promiseAt(i);\n        var receiver = this._receiverAt(i);\n        this._clearCallbackDataAtIndex(i);\n        this._settlePromise(promise, handler, receiver, reason);\n    }\n};\n\nPromise.prototype._settlePromises = function () {\n    var bitField = this._bitField;\n    var len = (bitField & 65535);\n\n    if (len > 0) {\n        if (((bitField & 16842752) !== 0)) {\n            var reason = this._fulfillmentHandler0;\n            this._settlePromise0(this._rejectionHandler0, reason, bitField);\n            this._rejectPromises(len, reason);\n        } else {\n            var value = this._rejectionHandler0;\n            this._settlePromise0(this._fulfillmentHandler0, value, bitField);\n            this._fulfillPromises(len, value);\n        }\n        this._setLength(0);\n    }\n    this._clearCancellationData();\n};\n\nPromise.prototype._settledValue = function() {\n    var bitField = this._bitField;\n    if (((bitField & 33554432) !== 0)) {\n        return this._rejectionHandler0;\n    } else if (((bitField & 16777216) !== 0)) {\n        return this._fulfillmentHandler0;\n    }\n};\n\nfunction deferResolve(v) {this.promise._resolveCallback(v);}\nfunction deferReject(v) {this.promise._rejectCallback(v, false);}\n\nPromise.defer = Promise.pending = function() {\n    debug.deprecated(\"Promise.defer\", \"new Promise\");\n    var promise = new Promise(INTERNAL);\n    return {\n        promise: promise,\n        resolve: deferResolve,\n        reject: deferReject\n    };\n};\n\nutil.notEnumerableProp(Promise,\n                       \"_makeSelfResolutionError\",\n                       makeSelfResolutionError);\n\nrequire(\"./method\")(Promise, INTERNAL, tryConvertToPromise, apiRejection,\n    debug);\nrequire(\"./bind\")(Promise, INTERNAL, tryConvertToPromise, debug);\nrequire(\"./cancel\")(Promise, PromiseArray, apiRejection, debug);\nrequire(\"./direct_resolve\")(Promise);\nrequire(\"./synchronous_inspection\")(Promise);\nrequire(\"./join\")(\n    Promise, PromiseArray, tryConvertToPromise, INTERNAL, async, getDomain);\nPromise.Promise = Promise;\nPromise.version = \"3.5.0\";\nrequire('./map.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./call_get.js')(Promise);\nrequire('./using.js')(Promise, apiRejection, tryConvertToPromise, createContext, INTERNAL, debug);\nrequire('./timers.js')(Promise, INTERNAL, debug);\nrequire('./generators.js')(Promise, apiRejection, INTERNAL, tryConvertToPromise, Proxyable, debug);\nrequire('./nodeify.js')(Promise);\nrequire('./promisify.js')(Promise, INTERNAL);\nrequire('./props.js')(Promise, PromiseArray, tryConvertToPromise, apiRejection);\nrequire('./race.js')(Promise, INTERNAL, tryConvertToPromise, apiRejection);\nrequire('./reduce.js')(Promise, PromiseArray, apiRejection, tryConvertToPromise, INTERNAL, debug);\nrequire('./settle.js')(Promise, PromiseArray, debug);\nrequire('./some.js')(Promise, PromiseArray, apiRejection);\nrequire('./filter.js')(Promise, INTERNAL);\nrequire('./each.js')(Promise, INTERNAL);\nrequire('./any.js')(Promise);\n                                                         \n    util.toFastProperties(Promise);                                          \n    util.toFastProperties(Promise.prototype);                                \n    function fillTypes(value) {                                              \n        var p = new Promise(INTERNAL);                                       \n        p._fulfillmentHandler0 = value;                                      \n        p._rejectionHandler0 = value;                                        \n        p._promise0 = value;                                                 \n        p._receiver0 = value;                                                \n    }                                                                        \n    // Complete slack tracking, opt out of field-type tracking and           \n    // stabilize map                                                         \n    fillTypes({a: 1});                                                       \n    fillTypes({b: 2});                                                       \n    fillTypes({c: 3});                                                       \n    fillTypes(1);                                                            \n    fillTypes(function(){});                                                 \n    fillTypes(undefined);                                                    \n    fillTypes(false);                                                        \n    fillTypes(new Promise(INTERNAL));                                        \n    debug.setBounds(Async.firstLineError, util.lastLineError);               \n    return Promise;                                                          \n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/promise.js","\"use strict\";\nvar es5 = require(\"./es5\");\nvar canEvaluate = typeof navigator == \"undefined\";\n\nvar errorObj = {e: {}};\nvar tryCatchTarget;\nvar globalObject = typeof self !== \"undefined\" ? self :\n    typeof window !== \"undefined\" ? window :\n    typeof global !== \"undefined\" ? global :\n    this !== undefined ? this : null;\n\nfunction tryCatcher() {\n    try {\n        var target = tryCatchTarget;\n        tryCatchTarget = null;\n        return target.apply(this, arguments);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\nfunction tryCatch(fn) {\n    tryCatchTarget = fn;\n    return tryCatcher;\n}\n\nvar inherits = function(Child, Parent) {\n    var hasProp = {}.hasOwnProperty;\n\n    function T() {\n        this.constructor = Child;\n        this.constructor$ = Parent;\n        for (var propertyName in Parent.prototype) {\n            if (hasProp.call(Parent.prototype, propertyName) &&\n                propertyName.charAt(propertyName.length-1) !== \"$\"\n           ) {\n                this[propertyName + \"$\"] = Parent.prototype[propertyName];\n            }\n        }\n    }\n    T.prototype = Parent.prototype;\n    Child.prototype = new T();\n    return Child.prototype;\n};\n\n\nfunction isPrimitive(val) {\n    return val == null || val === true || val === false ||\n        typeof val === \"string\" || typeof val === \"number\";\n\n}\n\nfunction isObject(value) {\n    return typeof value === \"function\" ||\n           typeof value === \"object\" && value !== null;\n}\n\nfunction maybeWrapAsError(maybeError) {\n    if (!isPrimitive(maybeError)) return maybeError;\n\n    return new Error(safeToString(maybeError));\n}\n\nfunction withAppended(target, appendee) {\n    var len = target.length;\n    var ret = new Array(len + 1);\n    var i;\n    for (i = 0; i < len; ++i) {\n        ret[i] = target[i];\n    }\n    ret[i] = appendee;\n    return ret;\n}\n\nfunction getDataPropertyOrDefault(obj, key, defaultValue) {\n    if (es5.isES5) {\n        var desc = Object.getOwnPropertyDescriptor(obj, key);\n\n        if (desc != null) {\n            return desc.get == null && desc.set == null\n                    ? desc.value\n                    : defaultValue;\n        }\n    } else {\n        return {}.hasOwnProperty.call(obj, key) ? obj[key] : undefined;\n    }\n}\n\nfunction notEnumerableProp(obj, name, value) {\n    if (isPrimitive(obj)) return obj;\n    var descriptor = {\n        value: value,\n        configurable: true,\n        enumerable: false,\n        writable: true\n    };\n    es5.defineProperty(obj, name, descriptor);\n    return obj;\n}\n\nfunction thrower(r) {\n    throw r;\n}\n\nvar inheritedDataKeys = (function() {\n    var excludedPrototypes = [\n        Array.prototype,\n        Object.prototype,\n        Function.prototype\n    ];\n\n    var isExcludedProto = function(val) {\n        for (var i = 0; i < excludedPrototypes.length; ++i) {\n            if (excludedPrototypes[i] === val) {\n                return true;\n            }\n        }\n        return false;\n    };\n\n    if (es5.isES5) {\n        var getKeys = Object.getOwnPropertyNames;\n        return function(obj) {\n            var ret = [];\n            var visitedKeys = Object.create(null);\n            while (obj != null && !isExcludedProto(obj)) {\n                var keys;\n                try {\n                    keys = getKeys(obj);\n                } catch (e) {\n                    return ret;\n                }\n                for (var i = 0; i < keys.length; ++i) {\n                    var key = keys[i];\n                    if (visitedKeys[key]) continue;\n                    visitedKeys[key] = true;\n                    var desc = Object.getOwnPropertyDescriptor(obj, key);\n                    if (desc != null && desc.get == null && desc.set == null) {\n                        ret.push(key);\n                    }\n                }\n                obj = es5.getPrototypeOf(obj);\n            }\n            return ret;\n        };\n    } else {\n        var hasProp = {}.hasOwnProperty;\n        return function(obj) {\n            if (isExcludedProto(obj)) return [];\n            var ret = [];\n\n            /*jshint forin:false */\n            enumeration: for (var key in obj) {\n                if (hasProp.call(obj, key)) {\n                    ret.push(key);\n                } else {\n                    for (var i = 0; i < excludedPrototypes.length; ++i) {\n                        if (hasProp.call(excludedPrototypes[i], key)) {\n                            continue enumeration;\n                        }\n                    }\n                    ret.push(key);\n                }\n            }\n            return ret;\n        };\n    }\n\n})();\n\nvar thisAssignmentPattern = /this\\s*\\.\\s*\\S+\\s*=/;\nfunction isClass(fn) {\n    try {\n        if (typeof fn === \"function\") {\n            var keys = es5.names(fn.prototype);\n\n            var hasMethods = es5.isES5 && keys.length > 1;\n            var hasMethodsOtherThanConstructor = keys.length > 0 &&\n                !(keys.length === 1 && keys[0] === \"constructor\");\n            var hasThisAssignmentAndStaticMethods =\n                thisAssignmentPattern.test(fn + \"\") && es5.names(fn).length > 0;\n\n            if (hasMethods || hasMethodsOtherThanConstructor ||\n                hasThisAssignmentAndStaticMethods) {\n                return true;\n            }\n        }\n        return false;\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction toFastProperties(obj) {\n    /*jshint -W027,-W055,-W031*/\n    function FakeConstructor() {}\n    FakeConstructor.prototype = obj;\n    var l = 8;\n    while (l--) new FakeConstructor();\n    return obj;\n    eval(obj);\n}\n\nvar rident = /^[a-z$_][a-z$_0-9]*$/i;\nfunction isIdentifier(str) {\n    return rident.test(str);\n}\n\nfunction filledRange(count, prefix, suffix) {\n    var ret = new Array(count);\n    for(var i = 0; i < count; ++i) {\n        ret[i] = prefix + i + suffix;\n    }\n    return ret;\n}\n\nfunction safeToString(obj) {\n    try {\n        return obj + \"\";\n    } catch (e) {\n        return \"[no string representation]\";\n    }\n}\n\nfunction isError(obj) {\n    return obj !== null &&\n           typeof obj === \"object\" &&\n           typeof obj.message === \"string\" &&\n           typeof obj.name === \"string\";\n}\n\nfunction markAsOriginatingFromRejection(e) {\n    try {\n        notEnumerableProp(e, \"isOperational\", true);\n    }\n    catch(ignore) {}\n}\n\nfunction originatesFromRejection(e) {\n    if (e == null) return false;\n    return ((e instanceof Error[\"__BluebirdErrorTypes__\"].OperationalError) ||\n        e[\"isOperational\"] === true);\n}\n\nfunction canAttachTrace(obj) {\n    return isError(obj) && es5.propertyIsWritable(obj, \"stack\");\n}\n\nvar ensureErrorObject = (function() {\n    if (!(\"stack\" in new Error())) {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            try {throw new Error(safeToString(value));}\n            catch(err) {return err;}\n        };\n    } else {\n        return function(value) {\n            if (canAttachTrace(value)) return value;\n            return new Error(safeToString(value));\n        };\n    }\n})();\n\nfunction classString(obj) {\n    return {}.toString.call(obj);\n}\n\nfunction copyDescriptors(from, to, filter) {\n    var keys = es5.names(from);\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        if (filter(key)) {\n            try {\n                es5.defineProperty(to, key, es5.getDescriptor(from, key));\n            } catch (ignore) {}\n        }\n    }\n}\n\nvar asArray = function(v) {\n    if (es5.isArray(v)) {\n        return v;\n    }\n    return null;\n};\n\nif (typeof Symbol !== \"undefined\" && Symbol.iterator) {\n    var ArrayFrom = typeof Array.from === \"function\" ? function(v) {\n        return Array.from(v);\n    } : function(v) {\n        var ret = [];\n        var it = v[Symbol.iterator]();\n        var itResult;\n        while (!((itResult = it.next()).done)) {\n            ret.push(itResult.value);\n        }\n        return ret;\n    };\n\n    asArray = function(v) {\n        if (es5.isArray(v)) {\n            return v;\n        } else if (v != null && typeof v[Symbol.iterator] === \"function\") {\n            return ArrayFrom(v);\n        }\n        return null;\n    };\n}\n\nvar isNode = typeof process !== \"undefined\" &&\n        classString(process).toLowerCase() === \"[object process]\";\n\nvar hasEnvVariables = typeof process !== \"undefined\" &&\n    typeof process.env !== \"undefined\";\n\nfunction env(key) {\n    return hasEnvVariables ? process.env[key] : undefined;\n}\n\nfunction getNativePromise() {\n    if (typeof Promise === \"function\") {\n        try {\n            var promise = new Promise(function(){});\n            if ({}.toString.call(promise) === \"[object Promise]\") {\n                return Promise;\n            }\n        } catch (e) {}\n    }\n}\n\nfunction domainBind(self, cb) {\n    return self.bind(cb);\n}\n\nvar ret = {\n    isClass: isClass,\n    isIdentifier: isIdentifier,\n    inheritedDataKeys: inheritedDataKeys,\n    getDataPropertyOrDefault: getDataPropertyOrDefault,\n    thrower: thrower,\n    isArray: es5.isArray,\n    asArray: asArray,\n    notEnumerableProp: notEnumerableProp,\n    isPrimitive: isPrimitive,\n    isObject: isObject,\n    isError: isError,\n    canEvaluate: canEvaluate,\n    errorObj: errorObj,\n    tryCatch: tryCatch,\n    inherits: inherits,\n    withAppended: withAppended,\n    maybeWrapAsError: maybeWrapAsError,\n    toFastProperties: toFastProperties,\n    filledRange: filledRange,\n    toString: safeToString,\n    canAttachTrace: canAttachTrace,\n    ensureErrorObject: ensureErrorObject,\n    originatesFromRejection: originatesFromRejection,\n    markAsOriginatingFromRejection: markAsOriginatingFromRejection,\n    classString: classString,\n    copyDescriptors: copyDescriptors,\n    hasDevTools: typeof chrome !== \"undefined\" && chrome &&\n                 typeof chrome.loadTimes === \"function\",\n    isNode: isNode,\n    hasEnvVariables: hasEnvVariables,\n    env: env,\n    global: globalObject,\n    getNativePromise: getNativePromise,\n    domainBind: domainBind\n};\nret.isRecentNode = ret.isNode && (function() {\n    var version = process.versions.node.split(\".\").map(Number);\n    return (version[0] === 0 && version[1] > 10) || (version[0] > 0);\n})();\n\nif (ret.isNode) ret.toFastProperties(process);\n\ntry {throw new Error(); } catch (e) {ret.lastLineError = e;}\nmodule.exports = ret;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/util.js","var isES5 = (function(){\n    \"use strict\";\n    return this === undefined;\n})();\n\nif (isES5) {\n    module.exports = {\n        freeze: Object.freeze,\n        defineProperty: Object.defineProperty,\n        getDescriptor: Object.getOwnPropertyDescriptor,\n        keys: Object.keys,\n        names: Object.getOwnPropertyNames,\n        getPrototypeOf: Object.getPrototypeOf,\n        isArray: Array.isArray,\n        isES5: isES5,\n        propertyIsWritable: function(obj, prop) {\n            var descriptor = Object.getOwnPropertyDescriptor(obj, prop);\n            return !!(!descriptor || descriptor.writable || descriptor.set);\n        }\n    };\n} else {\n    var has = {}.hasOwnProperty;\n    var str = {}.toString;\n    var proto = {}.constructor.prototype;\n\n    var ObjectKeys = function (o) {\n        var ret = [];\n        for (var key in o) {\n            if (has.call(o, key)) {\n                ret.push(key);\n            }\n        }\n        return ret;\n    };\n\n    var ObjectGetDescriptor = function(o, key) {\n        return {value: o[key]};\n    };\n\n    var ObjectDefineProperty = function (o, key, desc) {\n        o[key] = desc.value;\n        return o;\n    };\n\n    var ObjectFreeze = function (obj) {\n        return obj;\n    };\n\n    var ObjectGetPrototypeOf = function (obj) {\n        try {\n            return Object(obj).constructor.prototype;\n        }\n        catch (e) {\n            return proto;\n        }\n    };\n\n    var ArrayIsArray = function (obj) {\n        try {\n            return str.call(obj) === \"[object Array]\";\n        }\n        catch(e) {\n            return false;\n        }\n    };\n\n    module.exports = {\n        isArray: ArrayIsArray,\n        keys: ObjectKeys,\n        names: ObjectKeys,\n        defineProperty: ObjectDefineProperty,\n        getDescriptor: ObjectGetDescriptor,\n        freeze: ObjectFreeze,\n        getPrototypeOf: ObjectGetPrototypeOf,\n        isES5: isES5,\n        propertyIsWritable: function() {\n            return true;\n        }\n    };\n}\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/es5.js","\"use strict\";\nvar firstLineError;\ntry {throw new Error(); } catch (e) {firstLineError = e;}\nvar schedule = require(\"./schedule\");\nvar Queue = require(\"./queue\");\nvar util = require(\"./util\");\n\nfunction Async() {\n    this._customScheduler = false;\n    this._isTickUsed = false;\n    this._lateQueue = new Queue(16);\n    this._normalQueue = new Queue(16);\n    this._haveDrainedQueues = false;\n    this._trampolineEnabled = true;\n    var self = this;\n    this.drainQueues = function () {\n        self._drainQueues();\n    };\n    this._schedule = schedule;\n}\n\nAsync.prototype.setScheduler = function(fn) {\n    var prev = this._schedule;\n    this._schedule = fn;\n    this._customScheduler = true;\n    return prev;\n};\n\nAsync.prototype.hasCustomScheduler = function() {\n    return this._customScheduler;\n};\n\nAsync.prototype.enableTrampoline = function() {\n    this._trampolineEnabled = true;\n};\n\nAsync.prototype.disableTrampolineIfNecessary = function() {\n    if (util.hasDevTools) {\n        this._trampolineEnabled = false;\n    }\n};\n\nAsync.prototype.haveItemsQueued = function () {\n    return this._isTickUsed || this._haveDrainedQueues;\n};\n\n\nAsync.prototype.fatalError = function(e, isNode) {\n    if (isNode) {\n        process.stderr.write(\"Fatal \" + (e instanceof Error ? e.stack : e) +\n            \"\\n\");\n        process.exit(2);\n    } else {\n        this.throwLater(e);\n    }\n};\n\nAsync.prototype.throwLater = function(fn, arg) {\n    if (arguments.length === 1) {\n        arg = fn;\n        fn = function () { throw arg; };\n    }\n    if (typeof setTimeout !== \"undefined\") {\n        setTimeout(function() {\n            fn(arg);\n        }, 0);\n    } else try {\n        this._schedule(function() {\n            fn(arg);\n        });\n    } catch (e) {\n        throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n};\n\nfunction AsyncInvokeLater(fn, receiver, arg) {\n    this._lateQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncInvoke(fn, receiver, arg) {\n    this._normalQueue.push(fn, receiver, arg);\n    this._queueTick();\n}\n\nfunction AsyncSettlePromises(promise) {\n    this._normalQueue._pushOne(promise);\n    this._queueTick();\n}\n\nif (!util.hasDevTools) {\n    Async.prototype.invokeLater = AsyncInvokeLater;\n    Async.prototype.invoke = AsyncInvoke;\n    Async.prototype.settlePromises = AsyncSettlePromises;\n} else {\n    Async.prototype.invokeLater = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvokeLater.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                setTimeout(function() {\n                    fn.call(receiver, arg);\n                }, 100);\n            });\n        }\n    };\n\n    Async.prototype.invoke = function (fn, receiver, arg) {\n        if (this._trampolineEnabled) {\n            AsyncInvoke.call(this, fn, receiver, arg);\n        } else {\n            this._schedule(function() {\n                fn.call(receiver, arg);\n            });\n        }\n    };\n\n    Async.prototype.settlePromises = function(promise) {\n        if (this._trampolineEnabled) {\n            AsyncSettlePromises.call(this, promise);\n        } else {\n            this._schedule(function() {\n                promise._settlePromises();\n            });\n        }\n    };\n}\n\nAsync.prototype._drainQueue = function(queue) {\n    while (queue.length() > 0) {\n        var fn = queue.shift();\n        if (typeof fn !== \"function\") {\n            fn._settlePromises();\n            continue;\n        }\n        var receiver = queue.shift();\n        var arg = queue.shift();\n        fn.call(receiver, arg);\n    }\n};\n\nAsync.prototype._drainQueues = function () {\n    this._drainQueue(this._normalQueue);\n    this._reset();\n    this._haveDrainedQueues = true;\n    this._drainQueue(this._lateQueue);\n};\n\nAsync.prototype._queueTick = function () {\n    if (!this._isTickUsed) {\n        this._isTickUsed = true;\n        this._schedule(this.drainQueues);\n    }\n};\n\nAsync.prototype._reset = function () {\n    this._isTickUsed = false;\n};\n\nmodule.exports = Async;\nmodule.exports.firstLineError = firstLineError;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/async.js","\"use strict\";\nvar util = require(\"./util\");\nvar schedule;\nvar noAsyncScheduler = function() {\n    throw new Error(\"No async scheduler available\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n};\nvar NativePromise = util.getNativePromise();\nif (util.isNode && typeof MutationObserver === \"undefined\") {\n    var GlobalSetImmediate = global.setImmediate;\n    var ProcessNextTick = process.nextTick;\n    schedule = util.isRecentNode\n                ? function(fn) { GlobalSetImmediate.call(global, fn); }\n                : function(fn) { ProcessNextTick.call(process, fn); };\n} else if (typeof NativePromise === \"function\" &&\n           typeof NativePromise.resolve === \"function\") {\n    var nativePromise = NativePromise.resolve();\n    schedule = function(fn) {\n        nativePromise.then(fn);\n    };\n} else if ((typeof MutationObserver !== \"undefined\") &&\n          !(typeof window !== \"undefined\" &&\n            window.navigator &&\n            (window.navigator.standalone || window.cordova))) {\n    schedule = (function() {\n        var div = document.createElement(\"div\");\n        var opts = {attributes: true};\n        var toggleScheduled = false;\n        var div2 = document.createElement(\"div\");\n        var o2 = new MutationObserver(function() {\n            div.classList.toggle(\"foo\");\n            toggleScheduled = false;\n        });\n        o2.observe(div2, opts);\n\n        var scheduleToggle = function() {\n            if (toggleScheduled) return;\n            toggleScheduled = true;\n            div2.classList.toggle(\"foo\");\n        };\n\n        return function schedule(fn) {\n            var o = new MutationObserver(function() {\n                o.disconnect();\n                fn();\n            });\n            o.observe(div, opts);\n            scheduleToggle();\n        };\n    })();\n} else if (typeof setImmediate !== \"undefined\") {\n    schedule = function (fn) {\n        setImmediate(fn);\n    };\n} else if (typeof setTimeout !== \"undefined\") {\n    schedule = function (fn) {\n        setTimeout(fn, 0);\n    };\n} else {\n    schedule = noAsyncScheduler;\n}\nmodule.exports = schedule;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/schedule.js","\"use strict\";\nfunction arrayMove(src, srcIndex, dst, dstIndex, len) {\n    for (var j = 0; j < len; ++j) {\n        dst[j + dstIndex] = src[j + srcIndex];\n        src[j + srcIndex] = void 0;\n    }\n}\n\nfunction Queue(capacity) {\n    this._capacity = capacity;\n    this._length = 0;\n    this._front = 0;\n}\n\nQueue.prototype._willBeOverCapacity = function (size) {\n    return this._capacity < size;\n};\n\nQueue.prototype._pushOne = function (arg) {\n    var length = this.length();\n    this._checkCapacity(length + 1);\n    var i = (this._front + length) & (this._capacity - 1);\n    this[i] = arg;\n    this._length = length + 1;\n};\n\nQueue.prototype.push = function (fn, receiver, arg) {\n    var length = this.length() + 3;\n    if (this._willBeOverCapacity(length)) {\n        this._pushOne(fn);\n        this._pushOne(receiver);\n        this._pushOne(arg);\n        return;\n    }\n    var j = this._front + length - 3;\n    this._checkCapacity(length);\n    var wrapMask = this._capacity - 1;\n    this[(j + 0) & wrapMask] = fn;\n    this[(j + 1) & wrapMask] = receiver;\n    this[(j + 2) & wrapMask] = arg;\n    this._length = length;\n};\n\nQueue.prototype.shift = function () {\n    var front = this._front,\n        ret = this[front];\n\n    this[front] = undefined;\n    this._front = (front + 1) & (this._capacity - 1);\n    this._length--;\n    return ret;\n};\n\nQueue.prototype.length = function () {\n    return this._length;\n};\n\nQueue.prototype._checkCapacity = function (size) {\n    if (this._capacity < size) {\n        this._resizeTo(this._capacity << 1);\n    }\n};\n\nQueue.prototype._resizeTo = function (capacity) {\n    var oldCapacity = this._capacity;\n    this._capacity = capacity;\n    var front = this._front;\n    var length = this._length;\n    var moveItemsCount = (front + length) & (oldCapacity - 1);\n    arrayMove(this, 0, this, oldCapacity, moveItemsCount);\n};\n\nmodule.exports = Queue;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/queue.js","\"use strict\";\nvar es5 = require(\"./es5\");\nvar Objectfreeze = es5.freeze;\nvar util = require(\"./util\");\nvar inherits = util.inherits;\nvar notEnumerableProp = util.notEnumerableProp;\n\nfunction subError(nameProperty, defaultMessage) {\n    function SubError(message) {\n        if (!(this instanceof SubError)) return new SubError(message);\n        notEnumerableProp(this, \"message\",\n            typeof message === \"string\" ? message : defaultMessage);\n        notEnumerableProp(this, \"name\", nameProperty);\n        if (Error.captureStackTrace) {\n            Error.captureStackTrace(this, this.constructor);\n        } else {\n            Error.call(this);\n        }\n    }\n    inherits(SubError, Error);\n    return SubError;\n}\n\nvar _TypeError, _RangeError;\nvar Warning = subError(\"Warning\", \"warning\");\nvar CancellationError = subError(\"CancellationError\", \"cancellation error\");\nvar TimeoutError = subError(\"TimeoutError\", \"timeout error\");\nvar AggregateError = subError(\"AggregateError\", \"aggregate error\");\ntry {\n    _TypeError = TypeError;\n    _RangeError = RangeError;\n} catch(e) {\n    _TypeError = subError(\"TypeError\", \"type error\");\n    _RangeError = subError(\"RangeError\", \"range error\");\n}\n\nvar methods = (\"join pop push shift unshift slice filter forEach some \" +\n    \"every map indexOf lastIndexOf reduce reduceRight sort reverse\").split(\" \");\n\nfor (var i = 0; i < methods.length; ++i) {\n    if (typeof Array.prototype[methods[i]] === \"function\") {\n        AggregateError.prototype[methods[i]] = Array.prototype[methods[i]];\n    }\n}\n\nes5.defineProperty(AggregateError.prototype, \"length\", {\n    value: 0,\n    configurable: false,\n    writable: true,\n    enumerable: true\n});\nAggregateError.prototype[\"isOperational\"] = true;\nvar level = 0;\nAggregateError.prototype.toString = function() {\n    var indent = Array(level * 4 + 1).join(\" \");\n    var ret = \"\\n\" + indent + \"AggregateError of:\" + \"\\n\";\n    level++;\n    indent = Array(level * 4 + 1).join(\" \");\n    for (var i = 0; i < this.length; ++i) {\n        var str = this[i] === this ? \"[Circular AggregateError]\" : this[i] + \"\";\n        var lines = str.split(\"\\n\");\n        for (var j = 0; j < lines.length; ++j) {\n            lines[j] = indent + lines[j];\n        }\n        str = lines.join(\"\\n\");\n        ret += str + \"\\n\";\n    }\n    level--;\n    return ret;\n};\n\nfunction OperationalError(message) {\n    if (!(this instanceof OperationalError))\n        return new OperationalError(message);\n    notEnumerableProp(this, \"name\", \"OperationalError\");\n    notEnumerableProp(this, \"message\", message);\n    this.cause = message;\n    this[\"isOperational\"] = true;\n\n    if (message instanceof Error) {\n        notEnumerableProp(this, \"message\", message.message);\n        notEnumerableProp(this, \"stack\", message.stack);\n    } else if (Error.captureStackTrace) {\n        Error.captureStackTrace(this, this.constructor);\n    }\n\n}\ninherits(OperationalError, Error);\n\nvar errorTypes = Error[\"__BluebirdErrorTypes__\"];\nif (!errorTypes) {\n    errorTypes = Objectfreeze({\n        CancellationError: CancellationError,\n        TimeoutError: TimeoutError,\n        OperationalError: OperationalError,\n        RejectionError: OperationalError,\n        AggregateError: AggregateError\n    });\n    es5.defineProperty(Error, \"__BluebirdErrorTypes__\", {\n        value: errorTypes,\n        writable: false,\n        enumerable: false,\n        configurable: false\n    });\n}\n\nmodule.exports = {\n    Error: Error,\n    TypeError: _TypeError,\n    RangeError: _RangeError,\n    CancellationError: errorTypes.CancellationError,\n    OperationalError: errorTypes.OperationalError,\n    TimeoutError: errorTypes.TimeoutError,\n    AggregateError: errorTypes.AggregateError,\n    Warning: Warning\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/errors.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar isObject = util.isObject;\n\nfunction tryConvertToPromise(obj, context) {\n    if (isObject(obj)) {\n        if (obj instanceof Promise) return obj;\n        var then = getThen(obj);\n        if (then === errorObj) {\n            if (context) context._pushContext();\n            var ret = Promise.reject(then.e);\n            if (context) context._popContext();\n            return ret;\n        } else if (typeof then === \"function\") {\n            if (isAnyBluebirdPromise(obj)) {\n                var ret = new Promise(INTERNAL);\n                obj._then(\n                    ret._fulfill,\n                    ret._reject,\n                    undefined,\n                    ret,\n                    null\n                );\n                return ret;\n            }\n            return doThenable(obj, then, context);\n        }\n    }\n    return obj;\n}\n\nfunction doGetThen(obj) {\n    return obj.then;\n}\n\nfunction getThen(obj) {\n    try {\n        return doGetThen(obj);\n    } catch (e) {\n        errorObj.e = e;\n        return errorObj;\n    }\n}\n\nvar hasProp = {}.hasOwnProperty;\nfunction isAnyBluebirdPromise(obj) {\n    try {\n        return hasProp.call(obj, \"_promise0\");\n    } catch (e) {\n        return false;\n    }\n}\n\nfunction doThenable(x, then, context) {\n    var promise = new Promise(INTERNAL);\n    var ret = promise;\n    if (context) context._pushContext();\n    promise._captureStackTrace();\n    if (context) context._popContext();\n    var synchronous = true;\n    var result = util.tryCatch(then).call(x, resolve, reject);\n    synchronous = false;\n\n    if (promise && result === errorObj) {\n        promise._rejectCallback(result.e, true, true);\n        promise = null;\n    }\n\n    function resolve(value) {\n        if (!promise) return;\n        promise._resolveCallback(value);\n        promise = null;\n    }\n\n    function reject(reason) {\n        if (!promise) return;\n        promise._rejectCallback(reason, synchronous, true);\n        promise = null;\n    }\n    return ret;\n}\n\nreturn tryConvertToPromise;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/thenables.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise,\n    apiRejection, Proxyable) {\nvar util = require(\"./util\");\nvar isArray = util.isArray;\n\nfunction toResolutionValue(val) {\n    switch(val) {\n    case -2: return [];\n    case -3: return {};\n    case -6: return new Map();\n    }\n}\n\nfunction PromiseArray(values) {\n    var promise = this._promise = new Promise(INTERNAL);\n    if (values instanceof Promise) {\n        promise._propagateFrom(values, 3);\n    }\n    promise._setOnCancel(this);\n    this._values = values;\n    this._length = 0;\n    this._totalResolved = 0;\n    this._init(undefined, -2);\n}\nutil.inherits(PromiseArray, Proxyable);\n\nPromiseArray.prototype.length = function () {\n    return this._length;\n};\n\nPromiseArray.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseArray.prototype._init = function init(_, resolveValueIfEmpty) {\n    var values = tryConvertToPromise(this._values, this._promise);\n    if (values instanceof Promise) {\n        values = values._target();\n        var bitField = values._bitField;\n        ;\n        this._values = values;\n\n        if (((bitField & 50397184) === 0)) {\n            this._promise._setAsyncGuaranteed();\n            return values._then(\n                init,\n                this._reject,\n                undefined,\n                this,\n                resolveValueIfEmpty\n           );\n        } else if (((bitField & 33554432) !== 0)) {\n            values = values._value();\n        } else if (((bitField & 16777216) !== 0)) {\n            return this._reject(values._reason());\n        } else {\n            return this._cancel();\n        }\n    }\n    values = util.asArray(values);\n    if (values === null) {\n        var err = apiRejection(\n            \"expecting an array or an iterable object but got \" + util.classString(values)).reason();\n        this._promise._rejectCallback(err, false);\n        return;\n    }\n\n    if (values.length === 0) {\n        if (resolveValueIfEmpty === -5) {\n            this._resolveEmptyArray();\n        }\n        else {\n            this._resolve(toResolutionValue(resolveValueIfEmpty));\n        }\n        return;\n    }\n    this._iterate(values);\n};\n\nPromiseArray.prototype._iterate = function(values) {\n    var len = this.getActualLength(values.length);\n    this._length = len;\n    this._values = this.shouldCopyValues() ? new Array(len) : this._values;\n    var result = this._promise;\n    var isResolved = false;\n    var bitField = null;\n    for (var i = 0; i < len; ++i) {\n        var maybePromise = tryConvertToPromise(values[i], result);\n\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            bitField = maybePromise._bitField;\n        } else {\n            bitField = null;\n        }\n\n        if (isResolved) {\n            if (bitField !== null) {\n                maybePromise.suppressUnhandledRejections();\n            }\n        } else if (bitField !== null) {\n            if (((bitField & 50397184) === 0)) {\n                maybePromise._proxy(this, i);\n                this._values[i] = maybePromise;\n            } else if (((bitField & 33554432) !== 0)) {\n                isResolved = this._promiseFulfilled(maybePromise._value(), i);\n            } else if (((bitField & 16777216) !== 0)) {\n                isResolved = this._promiseRejected(maybePromise._reason(), i);\n            } else {\n                isResolved = this._promiseCancelled(i);\n            }\n        } else {\n            isResolved = this._promiseFulfilled(maybePromise, i);\n        }\n    }\n    if (!isResolved) result._setAsyncGuaranteed();\n};\n\nPromiseArray.prototype._isResolved = function () {\n    return this._values === null;\n};\n\nPromiseArray.prototype._resolve = function (value) {\n    this._values = null;\n    this._promise._fulfill(value);\n};\n\nPromiseArray.prototype._cancel = function() {\n    if (this._isResolved() || !this._promise._isCancellable()) return;\n    this._values = null;\n    this._promise._cancel();\n};\n\nPromiseArray.prototype._reject = function (reason) {\n    this._values = null;\n    this._promise._rejectCallback(reason, false);\n};\n\nPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nPromiseArray.prototype._promiseCancelled = function() {\n    this._cancel();\n    return true;\n};\n\nPromiseArray.prototype._promiseRejected = function (reason) {\n    this._totalResolved++;\n    this._reject(reason);\n    return true;\n};\n\nPromiseArray.prototype._resultCancelled = function() {\n    if (this._isResolved()) return;\n    var values = this._values;\n    this._cancel();\n    if (values instanceof Promise) {\n        values.cancel();\n    } else {\n        for (var i = 0; i < values.length; ++i) {\n            if (values[i] instanceof Promise) {\n                values[i].cancel();\n            }\n        }\n    }\n};\n\nPromiseArray.prototype.shouldCopyValues = function () {\n    return true;\n};\n\nPromiseArray.prototype.getActualLength = function (len) {\n    return len;\n};\n\nreturn PromiseArray;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/promise_array.js","\"use strict\";\nmodule.exports = function(Promise) {\nvar longStackTraces = false;\nvar contextStack = [];\n\nPromise.prototype._promiseCreated = function() {};\nPromise.prototype._pushContext = function() {};\nPromise.prototype._popContext = function() {return null;};\nPromise._peekContext = Promise.prototype._peekContext = function() {};\n\nfunction Context() {\n    this._trace = new Context.CapturedTrace(peekContext());\n}\nContext.prototype._pushContext = function () {\n    if (this._trace !== undefined) {\n        this._trace._promiseCreated = null;\n        contextStack.push(this._trace);\n    }\n};\n\nContext.prototype._popContext = function () {\n    if (this._trace !== undefined) {\n        var trace = contextStack.pop();\n        var ret = trace._promiseCreated;\n        trace._promiseCreated = null;\n        return ret;\n    }\n    return null;\n};\n\nfunction createContext() {\n    if (longStackTraces) return new Context();\n}\n\nfunction peekContext() {\n    var lastIndex = contextStack.length - 1;\n    if (lastIndex >= 0) {\n        return contextStack[lastIndex];\n    }\n    return undefined;\n}\nContext.CapturedTrace = null;\nContext.create = createContext;\nContext.deactivateLongStackTraces = function() {};\nContext.activateLongStackTraces = function() {\n    var Promise_pushContext = Promise.prototype._pushContext;\n    var Promise_popContext = Promise.prototype._popContext;\n    var Promise_PeekContext = Promise._peekContext;\n    var Promise_peekContext = Promise.prototype._peekContext;\n    var Promise_promiseCreated = Promise.prototype._promiseCreated;\n    Context.deactivateLongStackTraces = function() {\n        Promise.prototype._pushContext = Promise_pushContext;\n        Promise.prototype._popContext = Promise_popContext;\n        Promise._peekContext = Promise_PeekContext;\n        Promise.prototype._peekContext = Promise_peekContext;\n        Promise.prototype._promiseCreated = Promise_promiseCreated;\n        longStackTraces = false;\n    };\n    longStackTraces = true;\n    Promise.prototype._pushContext = Context.prototype._pushContext;\n    Promise.prototype._popContext = Context.prototype._popContext;\n    Promise._peekContext = Promise.prototype._peekContext = peekContext;\n    Promise.prototype._promiseCreated = function() {\n        var ctx = this._peekContext();\n        if (ctx && ctx._promiseCreated == null) ctx._promiseCreated = this;\n    };\n};\nreturn Context;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/context.js","\"use strict\";\nmodule.exports = function(Promise, Context) {\nvar getDomain = Promise._getDomain;\nvar async = Promise._async;\nvar Warning = require(\"./errors\").Warning;\nvar util = require(\"./util\");\nvar canAttachTrace = util.canAttachTrace;\nvar unhandledRejectionHandled;\nvar possiblyUnhandledRejection;\nvar bluebirdFramePattern =\n    /[\\\\\\/]bluebird[\\\\\\/]js[\\\\\\/](release|debug|instrumented)/;\nvar nodeFramePattern = /\\((?:timers\\.js):\\d+:\\d+\\)/;\nvar parseLinePattern = /[\\/<\\(](.+?):(\\d+):(\\d+)\\)?\\s*$/;\nvar stackFramePattern = null;\nvar formatStack = null;\nvar indentStackFrames = false;\nvar printWarning;\nvar debugging = !!(util.env(\"BLUEBIRD_DEBUG\") != 0 &&\n                        (false ||\n                         util.env(\"BLUEBIRD_DEBUG\") ||\n                         util.env(\"NODE_ENV\") === \"development\"));\n\nvar warnings = !!(util.env(\"BLUEBIRD_WARNINGS\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_WARNINGS\")));\n\nvar longStackTraces = !!(util.env(\"BLUEBIRD_LONG_STACK_TRACES\") != 0 &&\n    (debugging || util.env(\"BLUEBIRD_LONG_STACK_TRACES\")));\n\nvar wForgottenReturn = util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\") != 0 &&\n    (warnings || !!util.env(\"BLUEBIRD_W_FORGOTTEN_RETURN\"));\n\nPromise.prototype.suppressUnhandledRejections = function() {\n    var target = this._target();\n    target._bitField = ((target._bitField & (~1048576)) |\n                      524288);\n};\n\nPromise.prototype._ensurePossibleRejectionHandled = function () {\n    if ((this._bitField & 524288) !== 0) return;\n    this._setRejectionIsUnhandled();\n    async.invokeLater(this._notifyUnhandledRejection, this, undefined);\n};\n\nPromise.prototype._notifyUnhandledRejectionIsHandled = function () {\n    fireRejectionEvent(\"rejectionHandled\",\n                                  unhandledRejectionHandled, undefined, this);\n};\n\nPromise.prototype._setReturnedNonUndefined = function() {\n    this._bitField = this._bitField | 268435456;\n};\n\nPromise.prototype._returnedNonUndefined = function() {\n    return (this._bitField & 268435456) !== 0;\n};\n\nPromise.prototype._notifyUnhandledRejection = function () {\n    if (this._isRejectionUnhandled()) {\n        var reason = this._settledValue();\n        this._setUnhandledRejectionIsNotified();\n        fireRejectionEvent(\"unhandledRejection\",\n                                      possiblyUnhandledRejection, reason, this);\n    }\n};\n\nPromise.prototype._setUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField | 262144;\n};\n\nPromise.prototype._unsetUnhandledRejectionIsNotified = function () {\n    this._bitField = this._bitField & (~262144);\n};\n\nPromise.prototype._isUnhandledRejectionNotified = function () {\n    return (this._bitField & 262144) > 0;\n};\n\nPromise.prototype._setRejectionIsUnhandled = function () {\n    this._bitField = this._bitField | 1048576;\n};\n\nPromise.prototype._unsetRejectionIsUnhandled = function () {\n    this._bitField = this._bitField & (~1048576);\n    if (this._isUnhandledRejectionNotified()) {\n        this._unsetUnhandledRejectionIsNotified();\n        this._notifyUnhandledRejectionIsHandled();\n    }\n};\n\nPromise.prototype._isRejectionUnhandled = function () {\n    return (this._bitField & 1048576) > 0;\n};\n\nPromise.prototype._warn = function(message, shouldUseOwnTrace, promise) {\n    return warn(message, shouldUseOwnTrace, promise || this);\n};\n\nPromise.onPossiblyUnhandledRejection = function (fn) {\n    var domain = getDomain();\n    possiblyUnhandledRejection =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nPromise.onUnhandledRejectionHandled = function (fn) {\n    var domain = getDomain();\n    unhandledRejectionHandled =\n        typeof fn === \"function\" ? (domain === null ?\n                                            fn : util.domainBind(domain, fn))\n                                 : undefined;\n};\n\nvar disableLongStackTraces = function() {};\nPromise.longStackTraces = function () {\n    if (async.haveItemsQueued() && !config.longStackTraces) {\n        throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    if (!config.longStackTraces && longStackTracesIsSupported()) {\n        var Promise_captureStackTrace = Promise.prototype._captureStackTrace;\n        var Promise_attachExtraTrace = Promise.prototype._attachExtraTrace;\n        config.longStackTraces = true;\n        disableLongStackTraces = function() {\n            if (async.haveItemsQueued() && !config.longStackTraces) {\n                throw new Error(\"cannot enable long stack traces after promises have been created\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n            }\n            Promise.prototype._captureStackTrace = Promise_captureStackTrace;\n            Promise.prototype._attachExtraTrace = Promise_attachExtraTrace;\n            Context.deactivateLongStackTraces();\n            async.enableTrampoline();\n            config.longStackTraces = false;\n        };\n        Promise.prototype._captureStackTrace = longStackTracesCaptureStackTrace;\n        Promise.prototype._attachExtraTrace = longStackTracesAttachExtraTrace;\n        Context.activateLongStackTraces();\n        async.disableTrampolineIfNecessary();\n    }\n};\n\nPromise.hasLongStackTraces = function () {\n    return config.longStackTraces && longStackTracesIsSupported();\n};\n\nvar fireDomEvent = (function() {\n    try {\n        if (typeof CustomEvent === \"function\") {\n            var event = new CustomEvent(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new CustomEvent(name.toLowerCase(), {\n                    detail: event,\n                    cancelable: true\n                });\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else if (typeof Event === \"function\") {\n            var event = new Event(\"CustomEvent\");\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = new Event(name.toLowerCase(), {\n                    cancelable: true\n                });\n                domEvent.detail = event;\n                return !util.global.dispatchEvent(domEvent);\n            };\n        } else {\n            var event = document.createEvent(\"CustomEvent\");\n            event.initCustomEvent(\"testingtheevent\", false, true, {});\n            util.global.dispatchEvent(event);\n            return function(name, event) {\n                var domEvent = document.createEvent(\"CustomEvent\");\n                domEvent.initCustomEvent(name.toLowerCase(), false, true,\n                    event);\n                return !util.global.dispatchEvent(domEvent);\n            };\n        }\n    } catch (e) {}\n    return function() {\n        return false;\n    };\n})();\n\nvar fireGlobalEvent = (function() {\n    if (util.isNode) {\n        return function() {\n            return process.emit.apply(process, arguments);\n        };\n    } else {\n        if (!util.global) {\n            return function() {\n                return false;\n            };\n        }\n        return function(name) {\n            var methodName = \"on\" + name.toLowerCase();\n            var method = util.global[methodName];\n            if (!method) return false;\n            method.apply(util.global, [].slice.call(arguments, 1));\n            return true;\n        };\n    }\n})();\n\nfunction generatePromiseLifecycleEventObject(name, promise) {\n    return {promise: promise};\n}\n\nvar eventToObjectGenerator = {\n    promiseCreated: generatePromiseLifecycleEventObject,\n    promiseFulfilled: generatePromiseLifecycleEventObject,\n    promiseRejected: generatePromiseLifecycleEventObject,\n    promiseResolved: generatePromiseLifecycleEventObject,\n    promiseCancelled: generatePromiseLifecycleEventObject,\n    promiseChained: function(name, promise, child) {\n        return {promise: promise, child: child};\n    },\n    warning: function(name, warning) {\n        return {warning: warning};\n    },\n    unhandledRejection: function (name, reason, promise) {\n        return {reason: reason, promise: promise};\n    },\n    rejectionHandled: generatePromiseLifecycleEventObject\n};\n\nvar activeFireEvent = function (name) {\n    var globalEventFired = false;\n    try {\n        globalEventFired = fireGlobalEvent.apply(null, arguments);\n    } catch (e) {\n        async.throwLater(e);\n        globalEventFired = true;\n    }\n\n    var domEventFired = false;\n    try {\n        domEventFired = fireDomEvent(name,\n                    eventToObjectGenerator[name].apply(null, arguments));\n    } catch (e) {\n        async.throwLater(e);\n        domEventFired = true;\n    }\n\n    return domEventFired || globalEventFired;\n};\n\nPromise.config = function(opts) {\n    opts = Object(opts);\n    if (\"longStackTraces\" in opts) {\n        if (opts.longStackTraces) {\n            Promise.longStackTraces();\n        } else if (!opts.longStackTraces && Promise.hasLongStackTraces()) {\n            disableLongStackTraces();\n        }\n    }\n    if (\"warnings\" in opts) {\n        var warningsOption = opts.warnings;\n        config.warnings = !!warningsOption;\n        wForgottenReturn = config.warnings;\n\n        if (util.isObject(warningsOption)) {\n            if (\"wForgottenReturn\" in warningsOption) {\n                wForgottenReturn = !!warningsOption.wForgottenReturn;\n            }\n        }\n    }\n    if (\"cancellation\" in opts && opts.cancellation && !config.cancellation) {\n        if (async.haveItemsQueued()) {\n            throw new Error(\n                \"cannot enable cancellation after promises are in use\");\n        }\n        Promise.prototype._clearCancellationData =\n            cancellationClearCancellationData;\n        Promise.prototype._propagateFrom = cancellationPropagateFrom;\n        Promise.prototype._onCancel = cancellationOnCancel;\n        Promise.prototype._setOnCancel = cancellationSetOnCancel;\n        Promise.prototype._attachCancellationCallback =\n            cancellationAttachCancellationCallback;\n        Promise.prototype._execute = cancellationExecute;\n        propagateFromFunction = cancellationPropagateFrom;\n        config.cancellation = true;\n    }\n    if (\"monitoring\" in opts) {\n        if (opts.monitoring && !config.monitoring) {\n            config.monitoring = true;\n            Promise.prototype._fireEvent = activeFireEvent;\n        } else if (!opts.monitoring && config.monitoring) {\n            config.monitoring = false;\n            Promise.prototype._fireEvent = defaultFireEvent;\n        }\n    }\n    return Promise;\n};\n\nfunction defaultFireEvent() { return false; }\n\nPromise.prototype._fireEvent = defaultFireEvent;\nPromise.prototype._execute = function(executor, resolve, reject) {\n    try {\n        executor(resolve, reject);\n    } catch (e) {\n        return e;\n    }\n};\nPromise.prototype._onCancel = function () {};\nPromise.prototype._setOnCancel = function (handler) { ; };\nPromise.prototype._attachCancellationCallback = function(onCancel) {\n    ;\n};\nPromise.prototype._captureStackTrace = function () {};\nPromise.prototype._attachExtraTrace = function () {};\nPromise.prototype._clearCancellationData = function() {};\nPromise.prototype._propagateFrom = function (parent, flags) {\n    ;\n    ;\n};\n\nfunction cancellationExecute(executor, resolve, reject) {\n    var promise = this;\n    try {\n        executor(resolve, reject, function(onCancel) {\n            if (typeof onCancel !== \"function\") {\n                throw new TypeError(\"onCancel must be a function, got: \" +\n                                    util.toString(onCancel));\n            }\n            promise._attachCancellationCallback(onCancel);\n        });\n    } catch (e) {\n        return e;\n    }\n}\n\nfunction cancellationAttachCancellationCallback(onCancel) {\n    if (!this._isCancellable()) return this;\n\n    var previousOnCancel = this._onCancel();\n    if (previousOnCancel !== undefined) {\n        if (util.isArray(previousOnCancel)) {\n            previousOnCancel.push(onCancel);\n        } else {\n            this._setOnCancel([previousOnCancel, onCancel]);\n        }\n    } else {\n        this._setOnCancel(onCancel);\n    }\n}\n\nfunction cancellationOnCancel() {\n    return this._onCancelField;\n}\n\nfunction cancellationSetOnCancel(onCancel) {\n    this._onCancelField = onCancel;\n}\n\nfunction cancellationClearCancellationData() {\n    this._cancellationParent = undefined;\n    this._onCancelField = undefined;\n}\n\nfunction cancellationPropagateFrom(parent, flags) {\n    if ((flags & 1) !== 0) {\n        this._cancellationParent = parent;\n        var branchesRemainingToCancel = parent._branchesRemainingToCancel;\n        if (branchesRemainingToCancel === undefined) {\n            branchesRemainingToCancel = 0;\n        }\n        parent._branchesRemainingToCancel = branchesRemainingToCancel + 1;\n    }\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\n\nfunction bindingPropagateFrom(parent, flags) {\n    if ((flags & 2) !== 0 && parent._isBound()) {\n        this._setBoundTo(parent._boundTo);\n    }\n}\nvar propagateFromFunction = bindingPropagateFrom;\n\nfunction boundValueFunction() {\n    var ret = this._boundTo;\n    if (ret !== undefined) {\n        if (ret instanceof Promise) {\n            if (ret.isFulfilled()) {\n                return ret.value();\n            } else {\n                return undefined;\n            }\n        }\n    }\n    return ret;\n}\n\nfunction longStackTracesCaptureStackTrace() {\n    this._trace = new CapturedTrace(this._peekContext());\n}\n\nfunction longStackTracesAttachExtraTrace(error, ignoreSelf) {\n    if (canAttachTrace(error)) {\n        var trace = this._trace;\n        if (trace !== undefined) {\n            if (ignoreSelf) trace = trace._parent;\n        }\n        if (trace !== undefined) {\n            trace.attachExtraTrace(error);\n        } else if (!error.__stackCleaned__) {\n            var parsed = parseStackAndMessage(error);\n            util.notEnumerableProp(error, \"stack\",\n                parsed.message + \"\\n\" + parsed.stack.join(\"\\n\"));\n            util.notEnumerableProp(error, \"__stackCleaned__\", true);\n        }\n    }\n}\n\nfunction checkForgottenReturns(returnValue, promiseCreated, name, promise,\n                               parent) {\n    if (returnValue === undefined && promiseCreated !== null &&\n        wForgottenReturn) {\n        if (parent !== undefined && parent._returnedNonUndefined()) return;\n        if ((promise._bitField & 65535) === 0) return;\n\n        if (name) name = name + \" \";\n        var handlerLine = \"\";\n        var creatorLine = \"\";\n        if (promiseCreated._trace) {\n            var traceLines = promiseCreated._trace.stack.split(\"\\n\");\n            var stack = cleanStack(traceLines);\n            for (var i = stack.length - 1; i >= 0; --i) {\n                var line = stack[i];\n                if (!nodeFramePattern.test(line)) {\n                    var lineMatches = line.match(parseLinePattern);\n                    if (lineMatches) {\n                        handlerLine  = \"at \" + lineMatches[1] +\n                            \":\" + lineMatches[2] + \":\" + lineMatches[3] + \" \";\n                    }\n                    break;\n                }\n            }\n\n            if (stack.length > 0) {\n                var firstUserLine = stack[0];\n                for (var i = 0; i < traceLines.length; ++i) {\n\n                    if (traceLines[i] === firstUserLine) {\n                        if (i > 0) {\n                            creatorLine = \"\\n\" + traceLines[i - 1];\n                        }\n                        break;\n                    }\n                }\n\n            }\n        }\n        var msg = \"a promise was created in a \" + name +\n            \"handler \" + handlerLine + \"but was not returned from it, \" +\n            \"see http://goo.gl/rRqMUw\" +\n            creatorLine;\n        promise._warn(msg, true, promiseCreated);\n    }\n}\n\nfunction deprecated(name, replacement) {\n    var message = name +\n        \" is deprecated and will be removed in a future version.\";\n    if (replacement) message += \" Use \" + replacement + \" instead.\";\n    return warn(message);\n}\n\nfunction warn(message, shouldUseOwnTrace, promise) {\n    if (!config.warnings) return;\n    var warning = new Warning(message);\n    var ctx;\n    if (shouldUseOwnTrace) {\n        promise._attachExtraTrace(warning);\n    } else if (config.longStackTraces && (ctx = Promise._peekContext())) {\n        ctx.attachExtraTrace(warning);\n    } else {\n        var parsed = parseStackAndMessage(warning);\n        warning.stack = parsed.message + \"\\n\" + parsed.stack.join(\"\\n\");\n    }\n\n    if (!activeFireEvent(\"warning\", warning)) {\n        formatAndLogError(warning, \"\", true);\n    }\n}\n\nfunction reconstructStack(message, stacks) {\n    for (var i = 0; i < stacks.length - 1; ++i) {\n        stacks[i].push(\"From previous event:\");\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    if (i < stacks.length) {\n        stacks[i] = stacks[i].join(\"\\n\");\n    }\n    return message + \"\\n\" + stacks.join(\"\\n\");\n}\n\nfunction removeDuplicateOrEmptyJumps(stacks) {\n    for (var i = 0; i < stacks.length; ++i) {\n        if (stacks[i].length === 0 ||\n            ((i + 1 < stacks.length) && stacks[i][0] === stacks[i+1][0])) {\n            stacks.splice(i, 1);\n            i--;\n        }\n    }\n}\n\nfunction removeCommonRoots(stacks) {\n    var current = stacks[0];\n    for (var i = 1; i < stacks.length; ++i) {\n        var prev = stacks[i];\n        var currentLastIndex = current.length - 1;\n        var currentLastLine = current[currentLastIndex];\n        var commonRootMeetPoint = -1;\n\n        for (var j = prev.length - 1; j >= 0; --j) {\n            if (prev[j] === currentLastLine) {\n                commonRootMeetPoint = j;\n                break;\n            }\n        }\n\n        for (var j = commonRootMeetPoint; j >= 0; --j) {\n            var line = prev[j];\n            if (current[currentLastIndex] === line) {\n                current.pop();\n                currentLastIndex--;\n            } else {\n                break;\n            }\n        }\n        current = prev;\n    }\n}\n\nfunction cleanStack(stack) {\n    var ret = [];\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        var isTraceLine = \"    (No stack trace)\" === line ||\n            stackFramePattern.test(line);\n        var isInternalFrame = isTraceLine && shouldIgnore(line);\n        if (isTraceLine && !isInternalFrame) {\n            if (indentStackFrames && line.charAt(0) !== \" \") {\n                line = \"    \" + line;\n            }\n            ret.push(line);\n        }\n    }\n    return ret;\n}\n\nfunction stackFramesAsArray(error) {\n    var stack = error.stack.replace(/\\s+$/g, \"\").split(\"\\n\");\n    for (var i = 0; i < stack.length; ++i) {\n        var line = stack[i];\n        if (\"    (No stack trace)\" === line || stackFramePattern.test(line)) {\n            break;\n        }\n    }\n    if (i > 0 && error.name != \"SyntaxError\") {\n        stack = stack.slice(i);\n    }\n    return stack;\n}\n\nfunction parseStackAndMessage(error) {\n    var stack = error.stack;\n    var message = error.toString();\n    stack = typeof stack === \"string\" && stack.length > 0\n                ? stackFramesAsArray(error) : [\"    (No stack trace)\"];\n    return {\n        message: message,\n        stack: error.name == \"SyntaxError\" ? stack : cleanStack(stack)\n    };\n}\n\nfunction formatAndLogError(error, title, isSoft) {\n    if (typeof console !== \"undefined\") {\n        var message;\n        if (util.isObject(error)) {\n            var stack = error.stack;\n            message = title + formatStack(stack, error);\n        } else {\n            message = title + String(error);\n        }\n        if (typeof printWarning === \"function\") {\n            printWarning(message, isSoft);\n        } else if (typeof console.log === \"function\" ||\n            typeof console.log === \"object\") {\n            console.log(message);\n        }\n    }\n}\n\nfunction fireRejectionEvent(name, localHandler, reason, promise) {\n    var localEventFired = false;\n    try {\n        if (typeof localHandler === \"function\") {\n            localEventFired = true;\n            if (name === \"rejectionHandled\") {\n                localHandler(promise);\n            } else {\n                localHandler(reason, promise);\n            }\n        }\n    } catch (e) {\n        async.throwLater(e);\n    }\n\n    if (name === \"unhandledRejection\") {\n        if (!activeFireEvent(name, reason, promise) && !localEventFired) {\n            formatAndLogError(reason, \"Unhandled rejection \");\n        }\n    } else {\n        activeFireEvent(name, promise);\n    }\n}\n\nfunction formatNonError(obj) {\n    var str;\n    if (typeof obj === \"function\") {\n        str = \"[function \" +\n            (obj.name || \"anonymous\") +\n            \"]\";\n    } else {\n        str = obj && typeof obj.toString === \"function\"\n            ? obj.toString() : util.toString(obj);\n        var ruselessToString = /\\[object [a-zA-Z0-9$_]+\\]/;\n        if (ruselessToString.test(str)) {\n            try {\n                var newStr = JSON.stringify(obj);\n                str = newStr;\n            }\n            catch(e) {\n\n            }\n        }\n        if (str.length === 0) {\n            str = \"(empty array)\";\n        }\n    }\n    return (\"(<\" + snip(str) + \">, no stack trace)\");\n}\n\nfunction snip(str) {\n    var maxChars = 41;\n    if (str.length < maxChars) {\n        return str;\n    }\n    return str.substr(0, maxChars - 3) + \"...\";\n}\n\nfunction longStackTracesIsSupported() {\n    return typeof captureStackTrace === \"function\";\n}\n\nvar shouldIgnore = function() { return false; };\nvar parseLineInfoRegex = /[\\/<\\(]([^:\\/]+):(\\d+):(?:\\d+)\\)?\\s*$/;\nfunction parseLineInfo(line) {\n    var matches = line.match(parseLineInfoRegex);\n    if (matches) {\n        return {\n            fileName: matches[1],\n            line: parseInt(matches[2], 10)\n        };\n    }\n}\n\nfunction setBounds(firstLineError, lastLineError) {\n    if (!longStackTracesIsSupported()) return;\n    var firstStackLines = firstLineError.stack.split(\"\\n\");\n    var lastStackLines = lastLineError.stack.split(\"\\n\");\n    var firstIndex = -1;\n    var lastIndex = -1;\n    var firstFileName;\n    var lastFileName;\n    for (var i = 0; i < firstStackLines.length; ++i) {\n        var result = parseLineInfo(firstStackLines[i]);\n        if (result) {\n            firstFileName = result.fileName;\n            firstIndex = result.line;\n            break;\n        }\n    }\n    for (var i = 0; i < lastStackLines.length; ++i) {\n        var result = parseLineInfo(lastStackLines[i]);\n        if (result) {\n            lastFileName = result.fileName;\n            lastIndex = result.line;\n            break;\n        }\n    }\n    if (firstIndex < 0 || lastIndex < 0 || !firstFileName || !lastFileName ||\n        firstFileName !== lastFileName || firstIndex >= lastIndex) {\n        return;\n    }\n\n    shouldIgnore = function(line) {\n        if (bluebirdFramePattern.test(line)) return true;\n        var info = parseLineInfo(line);\n        if (info) {\n            if (info.fileName === firstFileName &&\n                (firstIndex <= info.line && info.line <= lastIndex)) {\n                return true;\n            }\n        }\n        return false;\n    };\n}\n\nfunction CapturedTrace(parent) {\n    this._parent = parent;\n    this._promisesCreated = 0;\n    var length = this._length = 1 + (parent === undefined ? 0 : parent._length);\n    captureStackTrace(this, CapturedTrace);\n    if (length > 32) this.uncycle();\n}\nutil.inherits(CapturedTrace, Error);\nContext.CapturedTrace = CapturedTrace;\n\nCapturedTrace.prototype.uncycle = function() {\n    var length = this._length;\n    if (length < 2) return;\n    var nodes = [];\n    var stackToIndex = {};\n\n    for (var i = 0, node = this; node !== undefined; ++i) {\n        nodes.push(node);\n        node = node._parent;\n    }\n    length = this._length = i;\n    for (var i = length - 1; i >= 0; --i) {\n        var stack = nodes[i].stack;\n        if (stackToIndex[stack] === undefined) {\n            stackToIndex[stack] = i;\n        }\n    }\n    for (var i = 0; i < length; ++i) {\n        var currentStack = nodes[i].stack;\n        var index = stackToIndex[currentStack];\n        if (index !== undefined && index !== i) {\n            if (index > 0) {\n                nodes[index - 1]._parent = undefined;\n                nodes[index - 1]._length = 1;\n            }\n            nodes[i]._parent = undefined;\n            nodes[i]._length = 1;\n            var cycleEdgeNode = i > 0 ? nodes[i - 1] : this;\n\n            if (index < length - 1) {\n                cycleEdgeNode._parent = nodes[index + 1];\n                cycleEdgeNode._parent.uncycle();\n                cycleEdgeNode._length =\n                    cycleEdgeNode._parent._length + 1;\n            } else {\n                cycleEdgeNode._parent = undefined;\n                cycleEdgeNode._length = 1;\n            }\n            var currentChildLength = cycleEdgeNode._length + 1;\n            for (var j = i - 2; j >= 0; --j) {\n                nodes[j]._length = currentChildLength;\n                currentChildLength++;\n            }\n            return;\n        }\n    }\n};\n\nCapturedTrace.prototype.attachExtraTrace = function(error) {\n    if (error.__stackCleaned__) return;\n    this.uncycle();\n    var parsed = parseStackAndMessage(error);\n    var message = parsed.message;\n    var stacks = [parsed.stack];\n\n    var trace = this;\n    while (trace !== undefined) {\n        stacks.push(cleanStack(trace.stack.split(\"\\n\")));\n        trace = trace._parent;\n    }\n    removeCommonRoots(stacks);\n    removeDuplicateOrEmptyJumps(stacks);\n    util.notEnumerableProp(error, \"stack\", reconstructStack(message, stacks));\n    util.notEnumerableProp(error, \"__stackCleaned__\", true);\n};\n\nvar captureStackTrace = (function stackDetection() {\n    var v8stackFramePattern = /^\\s*at\\s*/;\n    var v8stackFormatter = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if (error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    if (typeof Error.stackTraceLimit === \"number\" &&\n        typeof Error.captureStackTrace === \"function\") {\n        Error.stackTraceLimit += 6;\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        var captureStackTrace = Error.captureStackTrace;\n\n        shouldIgnore = function(line) {\n            return bluebirdFramePattern.test(line);\n        };\n        return function(receiver, ignoreUntil) {\n            Error.stackTraceLimit += 6;\n            captureStackTrace(receiver, ignoreUntil);\n            Error.stackTraceLimit -= 6;\n        };\n    }\n    var err = new Error();\n\n    if (typeof err.stack === \"string\" &&\n        err.stack.split(\"\\n\")[0].indexOf(\"stackDetection@\") >= 0) {\n        stackFramePattern = /@/;\n        formatStack = v8stackFormatter;\n        indentStackFrames = true;\n        return function captureStackTrace(o) {\n            o.stack = new Error().stack;\n        };\n    }\n\n    var hasStackAfterThrow;\n    try { throw new Error(); }\n    catch(e) {\n        hasStackAfterThrow = (\"stack\" in e);\n    }\n    if (!(\"stack\" in err) && hasStackAfterThrow &&\n        typeof Error.stackTraceLimit === \"number\") {\n        stackFramePattern = v8stackFramePattern;\n        formatStack = v8stackFormatter;\n        return function captureStackTrace(o) {\n            Error.stackTraceLimit += 6;\n            try { throw new Error(); }\n            catch(e) { o.stack = e.stack; }\n            Error.stackTraceLimit -= 6;\n        };\n    }\n\n    formatStack = function(stack, error) {\n        if (typeof stack === \"string\") return stack;\n\n        if ((typeof error === \"object\" ||\n            typeof error === \"function\") &&\n            error.name !== undefined &&\n            error.message !== undefined) {\n            return error.toString();\n        }\n        return formatNonError(error);\n    };\n\n    return null;\n\n})([]);\n\nif (typeof console !== \"undefined\" && typeof console.warn !== \"undefined\") {\n    printWarning = function (message) {\n        console.warn(message);\n    };\n    if (util.isNode && process.stderr.isTTY) {\n        printWarning = function(message, isSoft) {\n            var color = isSoft ? \"\\u001b[33m\" : \"\\u001b[31m\";\n            console.warn(color + message + \"\\u001b[0m\\n\");\n        };\n    } else if (!util.isNode && typeof (new Error().stack) === \"string\") {\n        printWarning = function(message, isSoft) {\n            console.warn(\"%c\" + message,\n                        isSoft ? \"color: darkorange\" : \"color: red\");\n        };\n    }\n}\n\nvar config = {\n    warnings: warnings,\n    longStackTraces: false,\n    cancellation: false,\n    monitoring: false\n};\n\nif (longStackTraces) Promise.longStackTraces();\n\nreturn {\n    longStackTraces: function() {\n        return config.longStackTraces;\n    },\n    warnings: function() {\n        return config.warnings;\n    },\n    cancellation: function() {\n        return config.cancellation;\n    },\n    monitoring: function() {\n        return config.monitoring;\n    },\n    propagateFromFunction: function() {\n        return propagateFromFunction;\n    },\n    boundValueFunction: function() {\n        return boundValueFunction;\n    },\n    checkForgottenReturns: checkForgottenReturns,\n    setBounds: setBounds,\n    warn: warn,\n    deprecated: deprecated,\n    CapturedTrace: CapturedTrace,\n    fireDomEvent: fireDomEvent,\n    fireGlobalEvent: fireGlobalEvent\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/debuggability.js","\"use strict\";\nmodule.exports = function(Promise, tryConvertToPromise, NEXT_FILTER) {\nvar util = require(\"./util\");\nvar CancellationError = Promise.CancellationError;\nvar errorObj = util.errorObj;\nvar catchFilter = require(\"./catch_filter\")(NEXT_FILTER);\n\nfunction PassThroughHandlerContext(promise, type, handler) {\n    this.promise = promise;\n    this.type = type;\n    this.handler = handler;\n    this.called = false;\n    this.cancelPromise = null;\n}\n\nPassThroughHandlerContext.prototype.isFinallyHandler = function() {\n    return this.type === 0;\n};\n\nfunction FinallyHandlerCancelReaction(finallyHandler) {\n    this.finallyHandler = finallyHandler;\n}\n\nFinallyHandlerCancelReaction.prototype._resultCancelled = function() {\n    checkCancel(this.finallyHandler);\n};\n\nfunction checkCancel(ctx, reason) {\n    if (ctx.cancelPromise != null) {\n        if (arguments.length > 1) {\n            ctx.cancelPromise._reject(reason);\n        } else {\n            ctx.cancelPromise._cancel();\n        }\n        ctx.cancelPromise = null;\n        return true;\n    }\n    return false;\n}\n\nfunction succeed() {\n    return finallyHandler.call(this, this.promise._target()._settledValue());\n}\nfunction fail(reason) {\n    if (checkCancel(this, reason)) return;\n    errorObj.e = reason;\n    return errorObj;\n}\nfunction finallyHandler(reasonOrValue) {\n    var promise = this.promise;\n    var handler = this.handler;\n\n    if (!this.called) {\n        this.called = true;\n        var ret = this.isFinallyHandler()\n            ? handler.call(promise._boundValue())\n            : handler.call(promise._boundValue(), reasonOrValue);\n        if (ret === NEXT_FILTER) {\n            return ret;\n        } else if (ret !== undefined) {\n            promise._setReturnedNonUndefined();\n            var maybePromise = tryConvertToPromise(ret, promise);\n            if (maybePromise instanceof Promise) {\n                if (this.cancelPromise != null) {\n                    if (maybePromise._isCancelled()) {\n                        var reason =\n                            new CancellationError(\"late cancellation observer\");\n                        promise._attachExtraTrace(reason);\n                        errorObj.e = reason;\n                        return errorObj;\n                    } else if (maybePromise.isPending()) {\n                        maybePromise._attachCancellationCallback(\n                            new FinallyHandlerCancelReaction(this));\n                    }\n                }\n                return maybePromise._then(\n                    succeed, fail, undefined, this, undefined);\n            }\n        }\n    }\n\n    if (promise.isRejected()) {\n        checkCancel(this);\n        errorObj.e = reasonOrValue;\n        return errorObj;\n    } else {\n        checkCancel(this);\n        return reasonOrValue;\n    }\n}\n\nPromise.prototype._passThrough = function(handler, type, success, fail) {\n    if (typeof handler !== \"function\") return this.then();\n    return this._then(success,\n                      fail,\n                      undefined,\n                      new PassThroughHandlerContext(this, type, handler),\n                      undefined);\n};\n\nPromise.prototype.lastly =\nPromise.prototype[\"finally\"] = function (handler) {\n    return this._passThrough(handler,\n                             0,\n                             finallyHandler,\n                             finallyHandler);\n};\n\n\nPromise.prototype.tap = function (handler) {\n    return this._passThrough(handler, 1, finallyHandler);\n};\n\nPromise.prototype.tapCatch = function (handlerOrPredicate) {\n    var len = arguments.length;\n    if(len === 1) {\n        return this._passThrough(handlerOrPredicate,\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    } else {\n         var catchInstances = new Array(len - 1),\n            j = 0, i;\n        for (i = 0; i < len - 1; ++i) {\n            var item = arguments[i];\n            if (util.isObject(item)) {\n                catchInstances[j++] = item;\n            } else {\n                return Promise.reject(new TypeError(\n                    \"tapCatch statement predicate: \"\n                    + \"expecting an object but got \" + util.classString(item)\n                ));\n            }\n        }\n        catchInstances.length = j;\n        var handler = arguments[i];\n        return this._passThrough(catchFilter(catchInstances, handler, this),\n                                 1,\n                                 undefined,\n                                 finallyHandler);\n    }\n\n};\n\nreturn PassThroughHandlerContext;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/finally.js","\"use strict\";\nmodule.exports = function(NEXT_FILTER) {\nvar util = require(\"./util\");\nvar getKeys = require(\"./es5\").keys;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction catchFilter(instances, cb, promise) {\n    return function(e) {\n        var boundTo = promise._boundValue();\n        predicateLoop: for (var i = 0; i < instances.length; ++i) {\n            var item = instances[i];\n\n            if (item === Error ||\n                (item != null && item.prototype instanceof Error)) {\n                if (e instanceof item) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (typeof item === \"function\") {\n                var matchesPredicate = tryCatch(item).call(boundTo, e);\n                if (matchesPredicate === errorObj) {\n                    return matchesPredicate;\n                } else if (matchesPredicate) {\n                    return tryCatch(cb).call(boundTo, e);\n                }\n            } else if (util.isObject(e)) {\n                var keys = getKeys(item);\n                for (var j = 0; j < keys.length; ++j) {\n                    var key = keys[j];\n                    if (item[key] != e[key]) {\n                        continue predicateLoop;\n                    }\n                }\n                return tryCatch(cb).call(boundTo, e);\n            }\n        }\n        return NEXT_FILTER;\n    };\n}\n\nreturn catchFilter;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/catch_filter.js","\"use strict\";\nvar util = require(\"./util\");\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar errors = require(\"./errors\");\nvar OperationalError = errors.OperationalError;\nvar es5 = require(\"./es5\");\n\nfunction isUntypedError(obj) {\n    return obj instanceof Error &&\n        es5.getPrototypeOf(obj) === Error.prototype;\n}\n\nvar rErrorKey = /^(?:name|message|stack|cause)$/;\nfunction wrapAsOperationalError(obj) {\n    var ret;\n    if (isUntypedError(obj)) {\n        ret = new OperationalError(obj);\n        ret.name = obj.name;\n        ret.message = obj.message;\n        ret.stack = obj.stack;\n        var keys = es5.keys(obj);\n        for (var i = 0; i < keys.length; ++i) {\n            var key = keys[i];\n            if (!rErrorKey.test(key)) {\n                ret[key] = obj[key];\n            }\n        }\n        return ret;\n    }\n    util.markAsOriginatingFromRejection(obj);\n    return obj;\n}\n\nfunction nodebackForPromise(promise, multiArgs) {\n    return function(err, value) {\n        if (promise === null) return;\n        if (err) {\n            var wrapped = wrapAsOperationalError(maybeWrapAsError(err));\n            promise._attachExtraTrace(wrapped);\n            promise._reject(wrapped);\n        } else if (!multiArgs) {\n            promise._fulfill(value);\n        } else {\n            var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n            promise._fulfill(args);\n        }\n        promise = null;\n    };\n}\n\nmodule.exports = nodebackForPromise;\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/nodeback.js","\"use strict\";\nmodule.exports =\nfunction(Promise, INTERNAL, tryConvertToPromise, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nPromise.method = function (fn) {\n    if (typeof fn !== \"function\") {\n        throw new Promise.TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    return function () {\n        var ret = new Promise(INTERNAL);\n        ret._captureStackTrace();\n        ret._pushContext();\n        var value = tryCatch(fn).apply(this, arguments);\n        var promiseCreated = ret._popContext();\n        debug.checkForgottenReturns(\n            value, promiseCreated, \"Promise.method\", ret);\n        ret._resolveFromSyncValue(value);\n        return ret;\n    };\n};\n\nPromise.attempt = Promise[\"try\"] = function (fn) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var ret = new Promise(INTERNAL);\n    ret._captureStackTrace();\n    ret._pushContext();\n    var value;\n    if (arguments.length > 1) {\n        debug.deprecated(\"calling Promise.try with more than 1 argument\");\n        var arg = arguments[1];\n        var ctx = arguments[2];\n        value = util.isArray(arg) ? tryCatch(fn).apply(ctx, arg)\n                                  : tryCatch(fn).call(ctx, arg);\n    } else {\n        value = tryCatch(fn)();\n    }\n    var promiseCreated = ret._popContext();\n    debug.checkForgottenReturns(\n        value, promiseCreated, \"Promise.try\", ret);\n    ret._resolveFromSyncValue(value);\n    return ret;\n};\n\nPromise.prototype._resolveFromSyncValue = function (value) {\n    if (value === util.errorObj) {\n        this._rejectCallback(value.e, false);\n    } else {\n        this._resolveCallback(value, true);\n    }\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/method.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, tryConvertToPromise, debug) {\nvar calledBind = false;\nvar rejectThis = function(_, e) {\n    this._reject(e);\n};\n\nvar targetRejected = function(e, context) {\n    context.promiseRejectionQueued = true;\n    context.bindingPromise._then(rejectThis, rejectThis, null, this, e);\n};\n\nvar bindingResolved = function(thisArg, context) {\n    if (((this._bitField & 50397184) === 0)) {\n        this._resolveCallback(context.target);\n    }\n};\n\nvar bindingRejected = function(e, context) {\n    if (!context.promiseRejectionQueued) this._reject(e);\n};\n\nPromise.prototype.bind = function (thisArg) {\n    if (!calledBind) {\n        calledBind = true;\n        Promise.prototype._propagateFrom = debug.propagateFromFunction();\n        Promise.prototype._boundValue = debug.boundValueFunction();\n    }\n    var maybePromise = tryConvertToPromise(thisArg);\n    var ret = new Promise(INTERNAL);\n    ret._propagateFrom(this, 1);\n    var target = this._target();\n    ret._setBoundTo(maybePromise);\n    if (maybePromise instanceof Promise) {\n        var context = {\n            promiseRejectionQueued: false,\n            promise: ret,\n            target: target,\n            bindingPromise: maybePromise\n        };\n        target._then(INTERNAL, targetRejected, undefined, ret, context);\n        maybePromise._then(\n            bindingResolved, bindingRejected, undefined, ret, context);\n        ret._setOnCancel(maybePromise);\n    } else {\n        ret._resolveCallback(target);\n    }\n    return ret;\n};\n\nPromise.prototype._setBoundTo = function (obj) {\n    if (obj !== undefined) {\n        this._bitField = this._bitField | 2097152;\n        this._boundTo = obj;\n    } else {\n        this._bitField = this._bitField & (~2097152);\n    }\n};\n\nPromise.prototype._isBound = function () {\n    return (this._bitField & 2097152) === 2097152;\n};\n\nPromise.bind = function (thisArg, value) {\n    return Promise.resolve(value).bind(thisArg);\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/bind.js","\"use strict\";\nmodule.exports = function(Promise, PromiseArray, apiRejection, debug) {\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nPromise.prototype[\"break\"] = Promise.prototype.cancel = function() {\n    if (!debug.cancellation()) return this._warn(\"cancellation is disabled\");\n\n    var promise = this;\n    var child = promise;\n    while (promise._isCancellable()) {\n        if (!promise._cancelBy(child)) {\n            if (child._isFollowing()) {\n                child._followee().cancel();\n            } else {\n                child._cancelBranched();\n            }\n            break;\n        }\n\n        var parent = promise._cancellationParent;\n        if (parent == null || !parent._isCancellable()) {\n            if (promise._isFollowing()) {\n                promise._followee().cancel();\n            } else {\n                promise._cancelBranched();\n            }\n            break;\n        } else {\n            if (promise._isFollowing()) promise._followee().cancel();\n            promise._setWillBeCancelled();\n            child = promise;\n            promise = parent;\n        }\n    }\n};\n\nPromise.prototype._branchHasCancelled = function() {\n    this._branchesRemainingToCancel--;\n};\n\nPromise.prototype._enoughBranchesHaveCancelled = function() {\n    return this._branchesRemainingToCancel === undefined ||\n           this._branchesRemainingToCancel <= 0;\n};\n\nPromise.prototype._cancelBy = function(canceller) {\n    if (canceller === this) {\n        this._branchesRemainingToCancel = 0;\n        this._invokeOnCancel();\n        return true;\n    } else {\n        this._branchHasCancelled();\n        if (this._enoughBranchesHaveCancelled()) {\n            this._invokeOnCancel();\n            return true;\n        }\n    }\n    return false;\n};\n\nPromise.prototype._cancelBranched = function() {\n    if (this._enoughBranchesHaveCancelled()) {\n        this._cancel();\n    }\n};\n\nPromise.prototype._cancel = function() {\n    if (!this._isCancellable()) return;\n    this._setCancelled();\n    async.invoke(this._cancelPromises, this, undefined);\n};\n\nPromise.prototype._cancelPromises = function() {\n    if (this._length() > 0) this._settlePromises();\n};\n\nPromise.prototype._unsetOnCancel = function() {\n    this._onCancelField = undefined;\n};\n\nPromise.prototype._isCancellable = function() {\n    return this.isPending() && !this._isCancelled();\n};\n\nPromise.prototype.isCancellable = function() {\n    return this.isPending() && !this.isCancelled();\n};\n\nPromise.prototype._doInvokeOnCancel = function(onCancelCallback, internalOnly) {\n    if (util.isArray(onCancelCallback)) {\n        for (var i = 0; i < onCancelCallback.length; ++i) {\n            this._doInvokeOnCancel(onCancelCallback[i], internalOnly);\n        }\n    } else if (onCancelCallback !== undefined) {\n        if (typeof onCancelCallback === \"function\") {\n            if (!internalOnly) {\n                var e = tryCatch(onCancelCallback).call(this._boundValue());\n                if (e === errorObj) {\n                    this._attachExtraTrace(e.e);\n                    async.throwLater(e.e);\n                }\n            }\n        } else {\n            onCancelCallback._resultCancelled(this);\n        }\n    }\n};\n\nPromise.prototype._invokeOnCancel = function() {\n    var onCancelCallback = this._onCancel();\n    this._unsetOnCancel();\n    async.invoke(this._doInvokeOnCancel, this, onCancelCallback);\n};\n\nPromise.prototype._invokeInternalOnCancel = function() {\n    if (this._isCancellable()) {\n        this._doInvokeOnCancel(this._onCancel(), true);\n        this._unsetOnCancel();\n    }\n};\n\nPromise.prototype._resultCancelled = function() {\n    this.cancel();\n};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/cancel.js","\"use strict\";\nmodule.exports = function(Promise) {\nfunction returner() {\n    return this.value;\n}\nfunction thrower() {\n    throw this.reason;\n}\n\nPromise.prototype[\"return\"] =\nPromise.prototype.thenReturn = function (value) {\n    if (value instanceof Promise) value.suppressUnhandledRejections();\n    return this._then(\n        returner, undefined, undefined, {value: value}, undefined);\n};\n\nPromise.prototype[\"throw\"] =\nPromise.prototype.thenThrow = function (reason) {\n    return this._then(\n        thrower, undefined, undefined, {reason: reason}, undefined);\n};\n\nPromise.prototype.catchThrow = function (reason) {\n    if (arguments.length <= 1) {\n        return this._then(\n            undefined, thrower, undefined, {reason: reason}, undefined);\n    } else {\n        var _reason = arguments[1];\n        var handler = function() {throw _reason;};\n        return this.caught(reason, handler);\n    }\n};\n\nPromise.prototype.catchReturn = function (value) {\n    if (arguments.length <= 1) {\n        if (value instanceof Promise) value.suppressUnhandledRejections();\n        return this._then(\n            undefined, returner, undefined, {value: value}, undefined);\n    } else {\n        var _value = arguments[1];\n        if (_value instanceof Promise) _value.suppressUnhandledRejections();\n        var handler = function() {return _value;};\n        return this.caught(value, handler);\n    }\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/direct_resolve.js","\"use strict\";\nmodule.exports = function(Promise) {\nfunction PromiseInspection(promise) {\n    if (promise !== undefined) {\n        promise = promise._target();\n        this._bitField = promise._bitField;\n        this._settledValueField = promise._isFateSealed()\n            ? promise._settledValue() : undefined;\n    }\n    else {\n        this._bitField = 0;\n        this._settledValueField = undefined;\n    }\n}\n\nPromiseInspection.prototype._settledValue = function() {\n    return this._settledValueField;\n};\n\nvar value = PromiseInspection.prototype.value = function () {\n    if (!this.isFulfilled()) {\n        throw new TypeError(\"cannot get fulfillment value of a non-fulfilled promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar reason = PromiseInspection.prototype.error =\nPromiseInspection.prototype.reason = function () {\n    if (!this.isRejected()) {\n        throw new TypeError(\"cannot get rejection reason of a non-rejected promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    return this._settledValue();\n};\n\nvar isFulfilled = PromiseInspection.prototype.isFulfilled = function() {\n    return (this._bitField & 33554432) !== 0;\n};\n\nvar isRejected = PromiseInspection.prototype.isRejected = function () {\n    return (this._bitField & 16777216) !== 0;\n};\n\nvar isPending = PromiseInspection.prototype.isPending = function () {\n    return (this._bitField & 50397184) === 0;\n};\n\nvar isResolved = PromiseInspection.prototype.isResolved = function () {\n    return (this._bitField & 50331648) !== 0;\n};\n\nPromiseInspection.prototype.isCancelled = function() {\n    return (this._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.__isCancelled = function() {\n    return (this._bitField & 65536) === 65536;\n};\n\nPromise.prototype._isCancelled = function() {\n    return this._target().__isCancelled();\n};\n\nPromise.prototype.isCancelled = function() {\n    return (this._target()._bitField & 8454144) !== 0;\n};\n\nPromise.prototype.isPending = function() {\n    return isPending.call(this._target());\n};\n\nPromise.prototype.isRejected = function() {\n    return isRejected.call(this._target());\n};\n\nPromise.prototype.isFulfilled = function() {\n    return isFulfilled.call(this._target());\n};\n\nPromise.prototype.isResolved = function() {\n    return isResolved.call(this._target());\n};\n\nPromise.prototype.value = function() {\n    return value.call(this._target());\n};\n\nPromise.prototype.reason = function() {\n    var target = this._target();\n    target._unsetRejectionIsUnhandled();\n    return reason.call(target);\n};\n\nPromise.prototype._value = function() {\n    return this._settledValue();\n};\n\nPromise.prototype._reason = function() {\n    this._unsetRejectionIsUnhandled();\n    return this._settledValue();\n};\n\nPromise.PromiseInspection = PromiseInspection;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/synchronous_inspection.js","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, tryConvertToPromise, INTERNAL, async,\n         getDomain) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar reject;\n\nif (!false) {\nif (canEvaluate) {\n    var thenCallback = function(i) {\n        return new Function(\"value\", \"holder\", \"                             \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = value;                                           \\n\\\n            holder.checkFulfillment(this);                                   \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var promiseSetter = function(i) {\n        return new Function(\"promise\", \"holder\", \"                           \\n\\\n            'use strict';                                                    \\n\\\n            holder.pIndex = promise;                                         \\n\\\n            \".replace(/Index/g, i));\n    };\n\n    var generateHolderClass = function(total) {\n        var props = new Array(total);\n        for (var i = 0; i < props.length; ++i) {\n            props[i] = \"this.p\" + (i+1);\n        }\n        var assignment = props.join(\" = \") + \" = null;\";\n        var cancellationCode= \"var promise;\\n\" + props.map(function(prop) {\n            return \"                                                         \\n\\\n                promise = \" + prop + \";                                      \\n\\\n                if (promise instanceof Promise) {                            \\n\\\n                    promise.cancel();                                        \\n\\\n                }                                                            \\n\\\n            \";\n        }).join(\"\\n\");\n        var passedArguments = props.join(\", \");\n        var name = \"Holder$\" + total;\n\n\n        var code = \"return function(tryCatch, errorObj, Promise, async) {    \\n\\\n            'use strict';                                                    \\n\\\n            function [TheName](fn) {                                         \\n\\\n                [TheProperties]                                              \\n\\\n                this.fn = fn;                                                \\n\\\n                this.asyncNeeded = true;                                     \\n\\\n                this.now = 0;                                                \\n\\\n            }                                                                \\n\\\n                                                                             \\n\\\n            [TheName].prototype._callFunction = function(promise) {          \\n\\\n                promise._pushContext();                                      \\n\\\n                var ret = tryCatch(this.fn)([ThePassedArguments]);           \\n\\\n                promise._popContext();                                       \\n\\\n                if (ret === errorObj) {                                      \\n\\\n                    promise._rejectCallback(ret.e, false);                   \\n\\\n                } else {                                                     \\n\\\n                    promise._resolveCallback(ret);                           \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype.checkFulfillment = function(promise) {       \\n\\\n                var now = ++this.now;                                        \\n\\\n                if (now === [TheTotal]) {                                    \\n\\\n                    if (this.asyncNeeded) {                                  \\n\\\n                        async.invoke(this._callFunction, this, promise);     \\n\\\n                    } else {                                                 \\n\\\n                        this._callFunction(promise);                         \\n\\\n                    }                                                        \\n\\\n                                                                             \\n\\\n                }                                                            \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            [TheName].prototype._resultCancelled = function() {              \\n\\\n                [CancellationCode]                                           \\n\\\n            };                                                               \\n\\\n                                                                             \\n\\\n            return [TheName];                                                \\n\\\n        }(tryCatch, errorObj, Promise, async);                               \\n\\\n        \";\n\n        code = code.replace(/\\[TheName\\]/g, name)\n            .replace(/\\[TheTotal\\]/g, total)\n            .replace(/\\[ThePassedArguments\\]/g, passedArguments)\n            .replace(/\\[TheProperties\\]/g, assignment)\n            .replace(/\\[CancellationCode\\]/g, cancellationCode);\n\n        return new Function(\"tryCatch\", \"errorObj\", \"Promise\", \"async\", code)\n                           (tryCatch, errorObj, Promise, async);\n    };\n\n    var holderClasses = [];\n    var thenCallbacks = [];\n    var promiseSetters = [];\n\n    for (var i = 0; i < 8; ++i) {\n        holderClasses.push(generateHolderClass(i + 1));\n        thenCallbacks.push(thenCallback(i + 1));\n        promiseSetters.push(promiseSetter(i + 1));\n    }\n\n    reject = function (reason) {\n        this._reject(reason);\n    };\n}}\n\nPromise.join = function () {\n    var last = arguments.length - 1;\n    var fn;\n    if (last > 0 && typeof arguments[last] === \"function\") {\n        fn = arguments[last];\n        if (!false) {\n            if (last <= 8 && canEvaluate) {\n                var ret = new Promise(INTERNAL);\n                ret._captureStackTrace();\n                var HolderClass = holderClasses[last - 1];\n                var holder = new HolderClass(fn);\n                var callbacks = thenCallbacks;\n\n                for (var i = 0; i < last; ++i) {\n                    var maybePromise = tryConvertToPromise(arguments[i], ret);\n                    if (maybePromise instanceof Promise) {\n                        maybePromise = maybePromise._target();\n                        var bitField = maybePromise._bitField;\n                        ;\n                        if (((bitField & 50397184) === 0)) {\n                            maybePromise._then(callbacks[i], reject,\n                                               undefined, ret, holder);\n                            promiseSetters[i](maybePromise, holder);\n                            holder.asyncNeeded = false;\n                        } else if (((bitField & 33554432) !== 0)) {\n                            callbacks[i].call(ret,\n                                              maybePromise._value(), holder);\n                        } else if (((bitField & 16777216) !== 0)) {\n                            ret._reject(maybePromise._reason());\n                        } else {\n                            ret._cancel();\n                        }\n                    } else {\n                        callbacks[i].call(ret, maybePromise, holder);\n                    }\n                }\n\n                if (!ret._isFateSealed()) {\n                    if (holder.asyncNeeded) {\n                        var domain = getDomain();\n                        if (domain !== null) {\n                            holder.fn = util.domainBind(domain, holder.fn);\n                        }\n                    }\n                    ret._setAsyncGuaranteed();\n                    ret._setOnCancel(holder);\n                }\n                return ret;\n            }\n        }\n    }\n    var $_len = arguments.length;var args = new Array($_len); for(var $_i = 0; $_i < $_len; ++$_i) {args[$_i] = arguments[$_i];};\n    if (fn) args.pop();\n    var ret = new PromiseArray(args).promise();\n    return fn !== undefined ? ret.spread(fn) : ret;\n};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/join.js","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\nvar async = Promise._async;\n\nfunction MappingPromiseArray(promises, fn, limit, _filter) {\n    this.constructor$(promises);\n    this._promise._captureStackTrace();\n    var domain = getDomain();\n    this._callback = domain === null ? fn : util.domainBind(domain, fn);\n    this._preservedValues = _filter === INTERNAL\n        ? new Array(this.length())\n        : null;\n    this._limit = limit;\n    this._inFlight = 0;\n    this._queue = [];\n    async.invoke(this._asyncInit, this, undefined);\n}\nutil.inherits(MappingPromiseArray, PromiseArray);\n\nMappingPromiseArray.prototype._asyncInit = function() {\n    this._init$(undefined, -2);\n};\n\nMappingPromiseArray.prototype._init = function () {};\n\nMappingPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var values = this._values;\n    var length = this.length();\n    var preservedValues = this._preservedValues;\n    var limit = this._limit;\n\n    if (index < 0) {\n        index = (index * -1) - 1;\n        values[index] = value;\n        if (limit >= 1) {\n            this._inFlight--;\n            this._drainQueue();\n            if (this._isResolved()) return true;\n        }\n    } else {\n        if (limit >= 1 && this._inFlight >= limit) {\n            values[index] = value;\n            this._queue.push(index);\n            return false;\n        }\n        if (preservedValues !== null) preservedValues[index] = value;\n\n        var promise = this._promise;\n        var callback = this._callback;\n        var receiver = promise._boundValue();\n        promise._pushContext();\n        var ret = tryCatch(callback).call(receiver, value, index, length);\n        var promiseCreated = promise._popContext();\n        debug.checkForgottenReturns(\n            ret,\n            promiseCreated,\n            preservedValues !== null ? \"Promise.filter\" : \"Promise.map\",\n            promise\n        );\n        if (ret === errorObj) {\n            this._reject(ret.e);\n            return true;\n        }\n\n        var maybePromise = tryConvertToPromise(ret, this._promise);\n        if (maybePromise instanceof Promise) {\n            maybePromise = maybePromise._target();\n            var bitField = maybePromise._bitField;\n            ;\n            if (((bitField & 50397184) === 0)) {\n                if (limit >= 1) this._inFlight++;\n                values[index] = maybePromise;\n                maybePromise._proxy(this, (index + 1) * -1);\n                return false;\n            } else if (((bitField & 33554432) !== 0)) {\n                ret = maybePromise._value();\n            } else if (((bitField & 16777216) !== 0)) {\n                this._reject(maybePromise._reason());\n                return true;\n            } else {\n                this._cancel();\n                return true;\n            }\n        }\n        values[index] = ret;\n    }\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= length) {\n        if (preservedValues !== null) {\n            this._filter(values, preservedValues);\n        } else {\n            this._resolve(values);\n        }\n        return true;\n    }\n    return false;\n};\n\nMappingPromiseArray.prototype._drainQueue = function () {\n    var queue = this._queue;\n    var limit = this._limit;\n    var values = this._values;\n    while (queue.length > 0 && this._inFlight < limit) {\n        if (this._isResolved()) return;\n        var index = queue.pop();\n        this._promiseFulfilled(values[index], index);\n    }\n};\n\nMappingPromiseArray.prototype._filter = function (booleans, values) {\n    var len = values.length;\n    var ret = new Array(len);\n    var j = 0;\n    for (var i = 0; i < len; ++i) {\n        if (booleans[i]) ret[j++] = values[i];\n    }\n    ret.length = j;\n    this._resolve(ret);\n};\n\nMappingPromiseArray.prototype.preservedValues = function () {\n    return this._preservedValues;\n};\n\nfunction map(promises, fn, options, _filter) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n\n    var limit = 0;\n    if (options !== undefined) {\n        if (typeof options === \"object\" && options !== null) {\n            if (typeof options.concurrency !== \"number\") {\n                return Promise.reject(\n                    new TypeError(\"'concurrency' must be a number but it is \" +\n                                    util.classString(options.concurrency)));\n            }\n            limit = options.concurrency;\n        } else {\n            return Promise.reject(new TypeError(\n                            \"options argument must be an object but it is \" +\n                             util.classString(options)));\n        }\n    }\n    limit = typeof limit === \"number\" &&\n        isFinite(limit) && limit >= 1 ? limit : 0;\n    return new MappingPromiseArray(promises, fn, limit, _filter).promise();\n}\n\nPromise.prototype.map = function (fn, options) {\n    return map(this, fn, options, null);\n};\n\nPromise.map = function (promises, fn, options, _filter) {\n    return map(promises, fn, options, _filter);\n};\n\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/map.js","\"use strict\";\nvar cr = Object.create;\nif (cr) {\n    var callerCache = cr(null);\n    var getterCache = cr(null);\n    callerCache[\" size\"] = getterCache[\" size\"] = 0;\n}\n\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar canEvaluate = util.canEvaluate;\nvar isIdentifier = util.isIdentifier;\n\nvar getMethodCaller;\nvar getGetter;\nif (!false) {\nvar makeMethodCaller = function (methodName) {\n    return new Function(\"ensureMethod\", \"                                    \\n\\\n        return function(obj) {                                               \\n\\\n            'use strict'                                                     \\n\\\n            var len = this.length;                                           \\n\\\n            ensureMethod(obj, 'methodName');                                 \\n\\\n            switch(len) {                                                    \\n\\\n                case 1: return obj.methodName(this[0]);                      \\n\\\n                case 2: return obj.methodName(this[0], this[1]);             \\n\\\n                case 3: return obj.methodName(this[0], this[1], this[2]);    \\n\\\n                case 0: return obj.methodName();                             \\n\\\n                default:                                                     \\n\\\n                    return obj.methodName.apply(obj, this);                  \\n\\\n            }                                                                \\n\\\n        };                                                                   \\n\\\n        \".replace(/methodName/g, methodName))(ensureMethod);\n};\n\nvar makeGetter = function (propertyName) {\n    return new Function(\"obj\", \"                                             \\n\\\n        'use strict';                                                        \\n\\\n        return obj.propertyName;                                             \\n\\\n        \".replace(\"propertyName\", propertyName));\n};\n\nvar getCompiled = function(name, compiler, cache) {\n    var ret = cache[name];\n    if (typeof ret !== \"function\") {\n        if (!isIdentifier(name)) {\n            return null;\n        }\n        ret = compiler(name);\n        cache[name] = ret;\n        cache[\" size\"]++;\n        if (cache[\" size\"] > 512) {\n            var keys = Object.keys(cache);\n            for (var i = 0; i < 256; ++i) delete cache[keys[i]];\n            cache[\" size\"] = keys.length - 256;\n        }\n    }\n    return ret;\n};\n\ngetMethodCaller = function(name) {\n    return getCompiled(name, makeMethodCaller, callerCache);\n};\n\ngetGetter = function(name) {\n    return getCompiled(name, makeGetter, getterCache);\n};\n}\n\nfunction ensureMethod(obj, methodName) {\n    var fn;\n    if (obj != null) fn = obj[methodName];\n    if (typeof fn !== \"function\") {\n        var message = \"Object \" + util.classString(obj) + \" has no method '\" +\n            util.toString(methodName) + \"'\";\n        throw new Promise.TypeError(message);\n    }\n    return fn;\n}\n\nfunction caller(obj) {\n    var methodName = this.pop();\n    var fn = ensureMethod(obj, methodName);\n    return fn.apply(obj, this);\n}\nPromise.prototype.call = function (methodName) {\n    var $_len = arguments.length;var args = new Array(Math.max($_len - 1, 0)); for(var $_i = 1; $_i < $_len; ++$_i) {args[$_i - 1] = arguments[$_i];};\n    if (!false) {\n        if (canEvaluate) {\n            var maybeCaller = getMethodCaller(methodName);\n            if (maybeCaller !== null) {\n                return this._then(\n                    maybeCaller, undefined, undefined, args, undefined);\n            }\n        }\n    }\n    args.push(methodName);\n    return this._then(caller, undefined, undefined, args, undefined);\n};\n\nfunction namedGetter(obj) {\n    return obj[this];\n}\nfunction indexedGetter(obj) {\n    var index = +this;\n    if (index < 0) index = Math.max(0, index + obj.length);\n    return obj[index];\n}\nPromise.prototype.get = function (propertyName) {\n    var isIndex = (typeof propertyName === \"number\");\n    var getter;\n    if (!isIndex) {\n        if (canEvaluate) {\n            var maybeGetter = getGetter(propertyName);\n            getter = maybeGetter !== null ? maybeGetter : namedGetter;\n        } else {\n            getter = namedGetter;\n        }\n    } else {\n        getter = indexedGetter;\n    }\n    return this._then(getter, undefined, undefined, propertyName, undefined);\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/call_get.js","\"use strict\";\nmodule.exports = function (Promise, apiRejection, tryConvertToPromise,\n    createContext, INTERNAL, debug) {\n    var util = require(\"./util\");\n    var TypeError = require(\"./errors\").TypeError;\n    var inherits = require(\"./util\").inherits;\n    var errorObj = util.errorObj;\n    var tryCatch = util.tryCatch;\n    var NULL = {};\n\n    function thrower(e) {\n        setTimeout(function(){throw e;}, 0);\n    }\n\n    function castPreservingDisposable(thenable) {\n        var maybePromise = tryConvertToPromise(thenable);\n        if (maybePromise !== thenable &&\n            typeof thenable._isDisposable === \"function\" &&\n            typeof thenable._getDisposer === \"function\" &&\n            thenable._isDisposable()) {\n            maybePromise._setDisposable(thenable._getDisposer());\n        }\n        return maybePromise;\n    }\n    function dispose(resources, inspection) {\n        var i = 0;\n        var len = resources.length;\n        var ret = new Promise(INTERNAL);\n        function iterator() {\n            if (i >= len) return ret._fulfill();\n            var maybePromise = castPreservingDisposable(resources[i++]);\n            if (maybePromise instanceof Promise &&\n                maybePromise._isDisposable()) {\n                try {\n                    maybePromise = tryConvertToPromise(\n                        maybePromise._getDisposer().tryDispose(inspection),\n                        resources.promise);\n                } catch (e) {\n                    return thrower(e);\n                }\n                if (maybePromise instanceof Promise) {\n                    return maybePromise._then(iterator, thrower,\n                                              null, null, null);\n                }\n            }\n            iterator();\n        }\n        iterator();\n        return ret;\n    }\n\n    function Disposer(data, promise, context) {\n        this._data = data;\n        this._promise = promise;\n        this._context = context;\n    }\n\n    Disposer.prototype.data = function () {\n        return this._data;\n    };\n\n    Disposer.prototype.promise = function () {\n        return this._promise;\n    };\n\n    Disposer.prototype.resource = function () {\n        if (this.promise().isFulfilled()) {\n            return this.promise().value();\n        }\n        return NULL;\n    };\n\n    Disposer.prototype.tryDispose = function(inspection) {\n        var resource = this.resource();\n        var context = this._context;\n        if (context !== undefined) context._pushContext();\n        var ret = resource !== NULL\n            ? this.doDispose(resource, inspection) : null;\n        if (context !== undefined) context._popContext();\n        this._promise._unsetDisposable();\n        this._data = null;\n        return ret;\n    };\n\n    Disposer.isDisposer = function (d) {\n        return (d != null &&\n                typeof d.resource === \"function\" &&\n                typeof d.tryDispose === \"function\");\n    };\n\n    function FunctionDisposer(fn, promise, context) {\n        this.constructor$(fn, promise, context);\n    }\n    inherits(FunctionDisposer, Disposer);\n\n    FunctionDisposer.prototype.doDispose = function (resource, inspection) {\n        var fn = this.data();\n        return fn.call(resource, resource, inspection);\n    };\n\n    function maybeUnwrapDisposer(value) {\n        if (Disposer.isDisposer(value)) {\n            this.resources[this.index]._setDisposable(value);\n            return value.promise();\n        }\n        return value;\n    }\n\n    function ResourceList(length) {\n        this.length = length;\n        this.promise = null;\n        this[length-1] = null;\n    }\n\n    ResourceList.prototype._resultCancelled = function() {\n        var len = this.length;\n        for (var i = 0; i < len; ++i) {\n            var item = this[i];\n            if (item instanceof Promise) {\n                item.cancel();\n            }\n        }\n    };\n\n    Promise.using = function () {\n        var len = arguments.length;\n        if (len < 2) return apiRejection(\n                        \"you must pass at least 2 arguments to Promise.using\");\n        var fn = arguments[len - 1];\n        if (typeof fn !== \"function\") {\n            return apiRejection(\"expecting a function but got \" + util.classString(fn));\n        }\n        var input;\n        var spreadArgs = true;\n        if (len === 2 && Array.isArray(arguments[0])) {\n            input = arguments[0];\n            len = input.length;\n            spreadArgs = false;\n        } else {\n            input = arguments;\n            len--;\n        }\n        var resources = new ResourceList(len);\n        for (var i = 0; i < len; ++i) {\n            var resource = input[i];\n            if (Disposer.isDisposer(resource)) {\n                var disposer = resource;\n                resource = resource.promise();\n                resource._setDisposable(disposer);\n            } else {\n                var maybePromise = tryConvertToPromise(resource);\n                if (maybePromise instanceof Promise) {\n                    resource =\n                        maybePromise._then(maybeUnwrapDisposer, null, null, {\n                            resources: resources,\n                            index: i\n                    }, undefined);\n                }\n            }\n            resources[i] = resource;\n        }\n\n        var reflectedResources = new Array(resources.length);\n        for (var i = 0; i < reflectedResources.length; ++i) {\n            reflectedResources[i] = Promise.resolve(resources[i]).reflect();\n        }\n\n        var resultPromise = Promise.all(reflectedResources)\n            .then(function(inspections) {\n                for (var i = 0; i < inspections.length; ++i) {\n                    var inspection = inspections[i];\n                    if (inspection.isRejected()) {\n                        errorObj.e = inspection.error();\n                        return errorObj;\n                    } else if (!inspection.isFulfilled()) {\n                        resultPromise.cancel();\n                        return;\n                    }\n                    inspections[i] = inspection.value();\n                }\n                promise._pushContext();\n\n                fn = tryCatch(fn);\n                var ret = spreadArgs\n                    ? fn.apply(undefined, inspections) : fn(inspections);\n                var promiseCreated = promise._popContext();\n                debug.checkForgottenReturns(\n                    ret, promiseCreated, \"Promise.using\", promise);\n                return ret;\n            });\n\n        var promise = resultPromise.lastly(function() {\n            var inspection = new Promise.PromiseInspection(resultPromise);\n            return dispose(resources, inspection);\n        });\n        resources.promise = promise;\n        promise._setOnCancel(resources);\n        return promise;\n    };\n\n    Promise.prototype._setDisposable = function (disposer) {\n        this._bitField = this._bitField | 131072;\n        this._disposer = disposer;\n    };\n\n    Promise.prototype._isDisposable = function () {\n        return (this._bitField & 131072) > 0;\n    };\n\n    Promise.prototype._getDisposer = function () {\n        return this._disposer;\n    };\n\n    Promise.prototype._unsetDisposable = function () {\n        this._bitField = this._bitField & (~131072);\n        this._disposer = undefined;\n    };\n\n    Promise.prototype.disposer = function (fn) {\n        if (typeof fn === \"function\") {\n            return new FunctionDisposer(fn, this, createContext());\n        }\n        throw new TypeError();\n    };\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/using.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL, debug) {\nvar util = require(\"./util\");\nvar TimeoutError = Promise.TimeoutError;\n\nfunction HandleWrapper(handle)  {\n    this.handle = handle;\n}\n\nHandleWrapper.prototype._resultCancelled = function() {\n    clearTimeout(this.handle);\n};\n\nvar afterValue = function(value) { return delay(+this).thenReturn(value); };\nvar delay = Promise.delay = function (ms, value) {\n    var ret;\n    var handle;\n    if (value !== undefined) {\n        ret = Promise.resolve(value)\n                ._then(afterValue, null, null, ms, undefined);\n        if (debug.cancellation() && value instanceof Promise) {\n            ret._setOnCancel(value);\n        }\n    } else {\n        ret = new Promise(INTERNAL);\n        handle = setTimeout(function() { ret._fulfill(); }, +ms);\n        if (debug.cancellation()) {\n            ret._setOnCancel(new HandleWrapper(handle));\n        }\n        ret._captureStackTrace();\n    }\n    ret._setAsyncGuaranteed();\n    return ret;\n};\n\nPromise.prototype.delay = function (ms) {\n    return delay(ms, this);\n};\n\nvar afterTimeout = function (promise, message, parent) {\n    var err;\n    if (typeof message !== \"string\") {\n        if (message instanceof Error) {\n            err = message;\n        } else {\n            err = new TimeoutError(\"operation timed out\");\n        }\n    } else {\n        err = new TimeoutError(message);\n    }\n    util.markAsOriginatingFromRejection(err);\n    promise._attachExtraTrace(err);\n    promise._reject(err);\n\n    if (parent != null) {\n        parent.cancel();\n    }\n};\n\nfunction successClear(value) {\n    clearTimeout(this.handle);\n    return value;\n}\n\nfunction failureClear(reason) {\n    clearTimeout(this.handle);\n    throw reason;\n}\n\nPromise.prototype.timeout = function (ms, message) {\n    ms = +ms;\n    var ret, parent;\n\n    var handleWrapper = new HandleWrapper(setTimeout(function timeoutTimeout() {\n        if (ret.isPending()) {\n            afterTimeout(ret, message, parent);\n        }\n    }, ms));\n\n    if (debug.cancellation()) {\n        parent = this.then();\n        ret = parent._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n        ret._setOnCancel(handleWrapper);\n    } else {\n        ret = this._then(successClear, failureClear,\n                            undefined, handleWrapper, undefined);\n    }\n\n    return ret;\n};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/timers.js","\"use strict\";\nmodule.exports = function(Promise,\n                          apiRejection,\n                          INTERNAL,\n                          tryConvertToPromise,\n                          Proxyable,\n                          debug) {\nvar errors = require(\"./errors\");\nvar TypeError = errors.TypeError;\nvar util = require(\"./util\");\nvar errorObj = util.errorObj;\nvar tryCatch = util.tryCatch;\nvar yieldHandlers = [];\n\nfunction promiseFromYieldHandler(value, yieldHandlers, traceParent) {\n    for (var i = 0; i < yieldHandlers.length; ++i) {\n        traceParent._pushContext();\n        var result = tryCatch(yieldHandlers[i])(value);\n        traceParent._popContext();\n        if (result === errorObj) {\n            traceParent._pushContext();\n            var ret = Promise.reject(errorObj.e);\n            traceParent._popContext();\n            return ret;\n        }\n        var maybePromise = tryConvertToPromise(result, traceParent);\n        if (maybePromise instanceof Promise) return maybePromise;\n    }\n    return null;\n}\n\nfunction PromiseSpawn(generatorFunction, receiver, yieldHandler, stack) {\n    if (debug.cancellation()) {\n        var internal = new Promise(INTERNAL);\n        var _finallyPromise = this._finallyPromise = new Promise(INTERNAL);\n        this._promise = internal.lastly(function() {\n            return _finallyPromise;\n        });\n        internal._captureStackTrace();\n        internal._setOnCancel(this);\n    } else {\n        var promise = this._promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n    }\n    this._stack = stack;\n    this._generatorFunction = generatorFunction;\n    this._receiver = receiver;\n    this._generator = undefined;\n    this._yieldHandlers = typeof yieldHandler === \"function\"\n        ? [yieldHandler].concat(yieldHandlers)\n        : yieldHandlers;\n    this._yieldedPromise = null;\n    this._cancellationPhase = false;\n}\nutil.inherits(PromiseSpawn, Proxyable);\n\nPromiseSpawn.prototype._isResolved = function() {\n    return this._promise === null;\n};\n\nPromiseSpawn.prototype._cleanup = function() {\n    this._promise = this._generator = null;\n    if (debug.cancellation() && this._finallyPromise !== null) {\n        this._finallyPromise._fulfill();\n        this._finallyPromise = null;\n    }\n};\n\nPromiseSpawn.prototype._promiseCancelled = function() {\n    if (this._isResolved()) return;\n    var implementsReturn = typeof this._generator[\"return\"] !== \"undefined\";\n\n    var result;\n    if (!implementsReturn) {\n        var reason = new Promise.CancellationError(\n            \"generator .return() sentinel\");\n        Promise.coroutine.returnSentinel = reason;\n        this._promise._attachExtraTrace(reason);\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"throw\"]).call(this._generator,\n                                                         reason);\n        this._promise._popContext();\n    } else {\n        this._promise._pushContext();\n        result = tryCatch(this._generator[\"return\"]).call(this._generator,\n                                                          undefined);\n        this._promise._popContext();\n    }\n    this._cancellationPhase = true;\n    this._yieldedPromise = null;\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseFulfilled = function(value) {\n    this._yieldedPromise = null;\n    this._promise._pushContext();\n    var result = tryCatch(this._generator.next).call(this._generator, value);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._promiseRejected = function(reason) {\n    this._yieldedPromise = null;\n    this._promise._attachExtraTrace(reason);\n    this._promise._pushContext();\n    var result = tryCatch(this._generator[\"throw\"])\n        .call(this._generator, reason);\n    this._promise._popContext();\n    this._continue(result);\n};\n\nPromiseSpawn.prototype._resultCancelled = function() {\n    if (this._yieldedPromise instanceof Promise) {\n        var promise = this._yieldedPromise;\n        this._yieldedPromise = null;\n        promise.cancel();\n    }\n};\n\nPromiseSpawn.prototype.promise = function () {\n    return this._promise;\n};\n\nPromiseSpawn.prototype._run = function () {\n    this._generator = this._generatorFunction.call(this._receiver);\n    this._receiver =\n        this._generatorFunction = undefined;\n    this._promiseFulfilled(undefined);\n};\n\nPromiseSpawn.prototype._continue = function (result) {\n    var promise = this._promise;\n    if (result === errorObj) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._rejectCallback(result.e, false);\n        }\n    }\n\n    var value = result.value;\n    if (result.done === true) {\n        this._cleanup();\n        if (this._cancellationPhase) {\n            return promise.cancel();\n        } else {\n            return promise._resolveCallback(value);\n        }\n    } else {\n        var maybePromise = tryConvertToPromise(value, this._promise);\n        if (!(maybePromise instanceof Promise)) {\n            maybePromise =\n                promiseFromYieldHandler(maybePromise,\n                                        this._yieldHandlers,\n                                        this._promise);\n            if (maybePromise === null) {\n                this._promiseRejected(\n                    new TypeError(\n                        \"A value %s was yielded that could not be treated as a promise\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\\u000a\".replace(\"%s\", String(value)) +\n                        \"From coroutine:\\u000a\" +\n                        this._stack.split(\"\\n\").slice(1, -7).join(\"\\n\")\n                    )\n                );\n                return;\n            }\n        }\n        maybePromise = maybePromise._target();\n        var bitField = maybePromise._bitField;\n        ;\n        if (((bitField & 50397184) === 0)) {\n            this._yieldedPromise = maybePromise;\n            maybePromise._proxy(this, null);\n        } else if (((bitField & 33554432) !== 0)) {\n            Promise._async.invoke(\n                this._promiseFulfilled, this, maybePromise._value()\n            );\n        } else if (((bitField & 16777216) !== 0)) {\n            Promise._async.invoke(\n                this._promiseRejected, this, maybePromise._reason()\n            );\n        } else {\n            this._promiseCancelled();\n        }\n    }\n};\n\nPromise.coroutine = function (generatorFunction, options) {\n    if (typeof generatorFunction !== \"function\") {\n        throw new TypeError(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var yieldHandler = Object(options).yieldHandler;\n    var PromiseSpawn$ = PromiseSpawn;\n    var stack = new Error().stack;\n    return function () {\n        var generator = generatorFunction.apply(this, arguments);\n        var spawn = new PromiseSpawn$(undefined, undefined, yieldHandler,\n                                      stack);\n        var ret = spawn.promise();\n        spawn._generator = generator;\n        spawn._promiseFulfilled(undefined);\n        return ret;\n    };\n};\n\nPromise.coroutine.addYieldHandler = function(fn) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    yieldHandlers.push(fn);\n};\n\nPromise.spawn = function (generatorFunction) {\n    debug.deprecated(\"Promise.spawn()\", \"Promise.coroutine()\");\n    if (typeof generatorFunction !== \"function\") {\n        return apiRejection(\"generatorFunction must be a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var spawn = new PromiseSpawn(generatorFunction, this);\n    var ret = spawn.promise();\n    spawn._run(Promise.spawn);\n    return ret;\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/generators.js","\"use strict\";\nmodule.exports = function(Promise) {\nvar util = require(\"./util\");\nvar async = Promise._async;\nvar tryCatch = util.tryCatch;\nvar errorObj = util.errorObj;\n\nfunction spreadAdapter(val, nodeback) {\n    var promise = this;\n    if (!util.isArray(val)) return successAdapter.call(promise, val, nodeback);\n    var ret =\n        tryCatch(nodeback).apply(promise._boundValue(), [null].concat(val));\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nfunction successAdapter(val, nodeback) {\n    var promise = this;\n    var receiver = promise._boundValue();\n    var ret = val === undefined\n        ? tryCatch(nodeback).call(receiver, null)\n        : tryCatch(nodeback).call(receiver, null, val);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\nfunction errorAdapter(reason, nodeback) {\n    var promise = this;\n    if (!reason) {\n        var newReason = new Error(reason + \"\");\n        newReason.cause = reason;\n        reason = newReason;\n    }\n    var ret = tryCatch(nodeback).call(promise._boundValue(), reason);\n    if (ret === errorObj) {\n        async.throwLater(ret.e);\n    }\n}\n\nPromise.prototype.asCallback = Promise.prototype.nodeify = function (nodeback,\n                                                                     options) {\n    if (typeof nodeback == \"function\") {\n        var adapter = successAdapter;\n        if (options !== undefined && Object(options).spread) {\n            adapter = spreadAdapter;\n        }\n        this._then(\n            adapter,\n            errorAdapter,\n            undefined,\n            this,\n            nodeback\n        );\n    }\n    return this;\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/nodeify.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar THIS = {};\nvar util = require(\"./util\");\nvar nodebackForPromise = require(\"./nodeback\");\nvar withAppended = util.withAppended;\nvar maybeWrapAsError = util.maybeWrapAsError;\nvar canEvaluate = util.canEvaluate;\nvar TypeError = require(\"./errors\").TypeError;\nvar defaultSuffix = \"Async\";\nvar defaultPromisified = {__isPromisified__: true};\nvar noCopyProps = [\n    \"arity\",    \"length\",\n    \"name\",\n    \"arguments\",\n    \"caller\",\n    \"callee\",\n    \"prototype\",\n    \"__isPromisified__\"\n];\nvar noCopyPropsPattern = new RegExp(\"^(?:\" + noCopyProps.join(\"|\") + \")$\");\n\nvar defaultFilter = function(name) {\n    return util.isIdentifier(name) &&\n        name.charAt(0) !== \"_\" &&\n        name !== \"constructor\";\n};\n\nfunction propsFilter(key) {\n    return !noCopyPropsPattern.test(key);\n}\n\nfunction isPromisified(fn) {\n    try {\n        return fn.__isPromisified__ === true;\n    }\n    catch (e) {\n        return false;\n    }\n}\n\nfunction hasPromisified(obj, key, suffix) {\n    var val = util.getDataPropertyOrDefault(obj, key + suffix,\n                                            defaultPromisified);\n    return val ? isPromisified(val) : false;\n}\nfunction checkValid(ret, suffix, suffixRegexp) {\n    for (var i = 0; i < ret.length; i += 2) {\n        var key = ret[i];\n        if (suffixRegexp.test(key)) {\n            var keyWithoutAsyncSuffix = key.replace(suffixRegexp, \"\");\n            for (var j = 0; j < ret.length; j += 2) {\n                if (ret[j] === keyWithoutAsyncSuffix) {\n                    throw new TypeError(\"Cannot promisify an API that has normal methods with '%s'-suffix\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\"\n                        .replace(\"%s\", suffix));\n                }\n            }\n        }\n    }\n}\n\nfunction promisifiableMethods(obj, suffix, suffixRegexp, filter) {\n    var keys = util.inheritedDataKeys(obj);\n    var ret = [];\n    for (var i = 0; i < keys.length; ++i) {\n        var key = keys[i];\n        var value = obj[key];\n        var passesDefaultFilter = filter === defaultFilter\n            ? true : defaultFilter(key, value, obj);\n        if (typeof value === \"function\" &&\n            !isPromisified(value) &&\n            !hasPromisified(obj, key, suffix) &&\n            filter(key, value, obj, passesDefaultFilter)) {\n            ret.push(key, value);\n        }\n    }\n    checkValid(ret, suffix, suffixRegexp);\n    return ret;\n}\n\nvar escapeIdentRegex = function(str) {\n    return str.replace(/([$])/, \"\\\\$\");\n};\n\nvar makeNodePromisifiedEval;\nif (!false) {\nvar switchCaseArgumentOrder = function(likelyArgumentCount) {\n    var ret = [likelyArgumentCount];\n    var min = Math.max(0, likelyArgumentCount - 1 - 3);\n    for(var i = likelyArgumentCount - 1; i >= min; --i) {\n        ret.push(i);\n    }\n    for(var i = likelyArgumentCount + 1; i <= 3; ++i) {\n        ret.push(i);\n    }\n    return ret;\n};\n\nvar argumentSequence = function(argumentCount) {\n    return util.filledRange(argumentCount, \"_arg\", \"\");\n};\n\nvar parameterDeclaration = function(parameterCount) {\n    return util.filledRange(\n        Math.max(parameterCount, 3), \"_arg\", \"\");\n};\n\nvar parameterCount = function(fn) {\n    if (typeof fn.length === \"number\") {\n        return Math.max(Math.min(fn.length, 1023 + 1), 0);\n    }\n    return 0;\n};\n\nmakeNodePromisifiedEval =\nfunction(callback, receiver, originalName, fn, _, multiArgs) {\n    var newParameterCount = Math.max(0, parameterCount(fn) - 1);\n    var argumentOrder = switchCaseArgumentOrder(newParameterCount);\n    var shouldProxyThis = typeof callback === \"string\" || receiver === THIS;\n\n    function generateCallForArgumentCount(count) {\n        var args = argumentSequence(count).join(\", \");\n        var comma = count > 0 ? \", \" : \"\";\n        var ret;\n        if (shouldProxyThis) {\n            ret = \"ret = callback.call(this, {{args}}, nodeback); break;\\n\";\n        } else {\n            ret = receiver === undefined\n                ? \"ret = callback({{args}}, nodeback); break;\\n\"\n                : \"ret = callback.call(receiver, {{args}}, nodeback); break;\\n\";\n        }\n        return ret.replace(\"{{args}}\", args).replace(\", \", comma);\n    }\n\n    function generateArgumentSwitchCase() {\n        var ret = \"\";\n        for (var i = 0; i < argumentOrder.length; ++i) {\n            ret += \"case \" + argumentOrder[i] +\":\" +\n                generateCallForArgumentCount(argumentOrder[i]);\n        }\n\n        ret += \"                                                             \\n\\\n        default:                                                             \\n\\\n            var args = new Array(len + 1);                                   \\n\\\n            var i = 0;                                                       \\n\\\n            for (var i = 0; i < len; ++i) {                                  \\n\\\n               args[i] = arguments[i];                                       \\n\\\n            }                                                                \\n\\\n            args[i] = nodeback;                                              \\n\\\n            [CodeForCall]                                                    \\n\\\n            break;                                                           \\n\\\n        \".replace(\"[CodeForCall]\", (shouldProxyThis\n                                ? \"ret = callback.apply(this, args);\\n\"\n                                : \"ret = callback.apply(receiver, args);\\n\"));\n        return ret;\n    }\n\n    var getFunctionCode = typeof callback === \"string\"\n                                ? (\"this != null ? this['\"+callback+\"'] : fn\")\n                                : \"fn\";\n    var body = \"'use strict';                                                \\n\\\n        var ret = function (Parameters) {                                    \\n\\\n            'use strict';                                                    \\n\\\n            var len = arguments.length;                                      \\n\\\n            var promise = new Promise(INTERNAL);                             \\n\\\n            promise._captureStackTrace();                                    \\n\\\n            var nodeback = nodebackForPromise(promise, \" + multiArgs + \");   \\n\\\n            var ret;                                                         \\n\\\n            var callback = tryCatch([GetFunctionCode]);                      \\n\\\n            switch(len) {                                                    \\n\\\n                [CodeForSwitchCase]                                          \\n\\\n            }                                                                \\n\\\n            if (ret === errorObj) {                                          \\n\\\n                promise._rejectCallback(maybeWrapAsError(ret.e), true, true);\\n\\\n            }                                                                \\n\\\n            if (!promise._isFateSealed()) promise._setAsyncGuaranteed();     \\n\\\n            return promise;                                                  \\n\\\n        };                                                                   \\n\\\n        notEnumerableProp(ret, '__isPromisified__', true);                   \\n\\\n        return ret;                                                          \\n\\\n    \".replace(\"[CodeForSwitchCase]\", generateArgumentSwitchCase())\n        .replace(\"[GetFunctionCode]\", getFunctionCode);\n    body = body.replace(\"Parameters\", parameterDeclaration(newParameterCount));\n    return new Function(\"Promise\",\n                        \"fn\",\n                        \"receiver\",\n                        \"withAppended\",\n                        \"maybeWrapAsError\",\n                        \"nodebackForPromise\",\n                        \"tryCatch\",\n                        \"errorObj\",\n                        \"notEnumerableProp\",\n                        \"INTERNAL\",\n                        body)(\n                    Promise,\n                    fn,\n                    receiver,\n                    withAppended,\n                    maybeWrapAsError,\n                    nodebackForPromise,\n                    util.tryCatch,\n                    util.errorObj,\n                    util.notEnumerableProp,\n                    INTERNAL);\n};\n}\n\nfunction makeNodePromisifiedClosure(callback, receiver, _, fn, __, multiArgs) {\n    var defaultThis = (function() {return this;})();\n    var method = callback;\n    if (typeof method === \"string\") {\n        callback = fn;\n    }\n    function promisified() {\n        var _receiver = receiver;\n        if (receiver === THIS) _receiver = this;\n        var promise = new Promise(INTERNAL);\n        promise._captureStackTrace();\n        var cb = typeof method === \"string\" && this !== defaultThis\n            ? this[method] : callback;\n        var fn = nodebackForPromise(promise, multiArgs);\n        try {\n            cb.apply(_receiver, withAppended(arguments, fn));\n        } catch(e) {\n            promise._rejectCallback(maybeWrapAsError(e), true, true);\n        }\n        if (!promise._isFateSealed()) promise._setAsyncGuaranteed();\n        return promise;\n    }\n    util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n    return promisified;\n}\n\nvar makeNodePromisified = canEvaluate\n    ? makeNodePromisifiedEval\n    : makeNodePromisifiedClosure;\n\nfunction promisifyAll(obj, suffix, filter, promisifier, multiArgs) {\n    var suffixRegexp = new RegExp(escapeIdentRegex(suffix) + \"$\");\n    var methods =\n        promisifiableMethods(obj, suffix, suffixRegexp, filter);\n\n    for (var i = 0, len = methods.length; i < len; i+= 2) {\n        var key = methods[i];\n        var fn = methods[i+1];\n        var promisifiedKey = key + suffix;\n        if (promisifier === makeNodePromisified) {\n            obj[promisifiedKey] =\n                makeNodePromisified(key, THIS, key, fn, suffix, multiArgs);\n        } else {\n            var promisified = promisifier(fn, function() {\n                return makeNodePromisified(key, THIS, key,\n                                           fn, suffix, multiArgs);\n            });\n            util.notEnumerableProp(promisified, \"__isPromisified__\", true);\n            obj[promisifiedKey] = promisified;\n        }\n    }\n    util.toFastProperties(obj);\n    return obj;\n}\n\nfunction promisify(callback, receiver, multiArgs) {\n    return makeNodePromisified(callback, receiver, undefined,\n                                callback, null, multiArgs);\n}\n\nPromise.promisify = function (fn, options) {\n    if (typeof fn !== \"function\") {\n        throw new TypeError(\"expecting a function but got \" + util.classString(fn));\n    }\n    if (isPromisified(fn)) {\n        return fn;\n    }\n    options = Object(options);\n    var receiver = options.context === undefined ? THIS : options.context;\n    var multiArgs = !!options.multiArgs;\n    var ret = promisify(fn, receiver, multiArgs);\n    util.copyDescriptors(fn, ret, propsFilter);\n    return ret;\n};\n\nPromise.promisifyAll = function (target, options) {\n    if (typeof target !== \"function\" && typeof target !== \"object\") {\n        throw new TypeError(\"the target of promisifyAll must be an object or a function\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    options = Object(options);\n    var multiArgs = !!options.multiArgs;\n    var suffix = options.suffix;\n    if (typeof suffix !== \"string\") suffix = defaultSuffix;\n    var filter = options.filter;\n    if (typeof filter !== \"function\") filter = defaultFilter;\n    var promisifier = options.promisifier;\n    if (typeof promisifier !== \"function\") promisifier = makeNodePromisified;\n\n    if (!util.isIdentifier(suffix)) {\n        throw new RangeError(\"suffix must be a valid identifier\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n\n    var keys = util.inheritedDataKeys(target);\n    for (var i = 0; i < keys.length; ++i) {\n        var value = target[keys[i]];\n        if (keys[i] !== \"constructor\" &&\n            util.isClass(value)) {\n            promisifyAll(value.prototype, suffix, filter, promisifier,\n                multiArgs);\n            promisifyAll(value, suffix, filter, promisifier, multiArgs);\n        }\n    }\n\n    return promisifyAll(target, suffix, filter, promisifier, multiArgs);\n};\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/promisify.js","\"use strict\";\nmodule.exports = function(\n    Promise, PromiseArray, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\nvar isObject = util.isObject;\nvar es5 = require(\"./es5\");\nvar Es6Map;\nif (typeof Map === \"function\") Es6Map = Map;\n\nvar mapToEntries = (function() {\n    var index = 0;\n    var size = 0;\n\n    function extractEntry(value, key) {\n        this[index] = value;\n        this[index + size] = key;\n        index++;\n    }\n\n    return function mapToEntries(map) {\n        size = map.size;\n        index = 0;\n        var ret = new Array(map.size * 2);\n        map.forEach(extractEntry, ret);\n        return ret;\n    };\n})();\n\nvar entriesToMap = function(entries) {\n    var ret = new Es6Map();\n    var length = entries.length / 2 | 0;\n    for (var i = 0; i < length; ++i) {\n        var key = entries[length + i];\n        var value = entries[i];\n        ret.set(key, value);\n    }\n    return ret;\n};\n\nfunction PropertiesPromiseArray(obj) {\n    var isMap = false;\n    var entries;\n    if (Es6Map !== undefined && obj instanceof Es6Map) {\n        entries = mapToEntries(obj);\n        isMap = true;\n    } else {\n        var keys = es5.keys(obj);\n        var len = keys.length;\n        entries = new Array(len * 2);\n        for (var i = 0; i < len; ++i) {\n            var key = keys[i];\n            entries[i] = obj[key];\n            entries[i + len] = key;\n        }\n    }\n    this.constructor$(entries);\n    this._isMap = isMap;\n    this._init$(undefined, isMap ? -6 : -3);\n}\nutil.inherits(PropertiesPromiseArray, PromiseArray);\n\nPropertiesPromiseArray.prototype._init = function () {};\n\nPropertiesPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    this._values[index] = value;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        var val;\n        if (this._isMap) {\n            val = entriesToMap(this._values);\n        } else {\n            val = {};\n            var keyOffset = this.length();\n            for (var i = 0, len = this.length(); i < len; ++i) {\n                val[this._values[i + keyOffset]] = this._values[i];\n            }\n        }\n        this._resolve(val);\n        return true;\n    }\n    return false;\n};\n\nPropertiesPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nPropertiesPromiseArray.prototype.getActualLength = function (len) {\n    return len >> 1;\n};\n\nfunction props(promises) {\n    var ret;\n    var castValue = tryConvertToPromise(promises);\n\n    if (!isObject(castValue)) {\n        return apiRejection(\"cannot await properties of a non-object\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    } else if (castValue instanceof Promise) {\n        ret = castValue._then(\n            Promise.props, undefined, undefined, undefined, undefined);\n    } else {\n        ret = new PropertiesPromiseArray(castValue).promise();\n    }\n\n    if (castValue instanceof Promise) {\n        ret._propagateFrom(castValue, 2);\n    }\n    return ret;\n}\n\nPromise.prototype.props = function () {\n    return props(this);\n};\n\nPromise.props = function (promises) {\n    return props(promises);\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/props.js","\"use strict\";\nmodule.exports = function(\n    Promise, INTERNAL, tryConvertToPromise, apiRejection) {\nvar util = require(\"./util\");\n\nvar raceLater = function (promise) {\n    return promise.then(function(array) {\n        return race(array, promise);\n    });\n};\n\nfunction race(promises, parent) {\n    var maybePromise = tryConvertToPromise(promises);\n\n    if (maybePromise instanceof Promise) {\n        return raceLater(maybePromise);\n    } else {\n        promises = util.asArray(promises);\n        if (promises === null)\n            return apiRejection(\"expecting an array or an iterable object but got \" + util.classString(promises));\n    }\n\n    var ret = new Promise(INTERNAL);\n    if (parent !== undefined) {\n        ret._propagateFrom(parent, 3);\n    }\n    var fulfill = ret._fulfill;\n    var reject = ret._reject;\n    for (var i = 0, len = promises.length; i < len; ++i) {\n        var val = promises[i];\n\n        if (val === undefined && !(i in promises)) {\n            continue;\n        }\n\n        Promise.cast(val)._then(fulfill, reject, undefined, ret, null);\n    }\n    return ret;\n}\n\nPromise.race = function (promises) {\n    return race(promises, undefined);\n};\n\nPromise.prototype.race = function () {\n    return race(this, undefined);\n};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/race.js","\"use strict\";\nmodule.exports = function(Promise,\n                          PromiseArray,\n                          apiRejection,\n                          tryConvertToPromise,\n                          INTERNAL,\n                          debug) {\nvar getDomain = Promise._getDomain;\nvar util = require(\"./util\");\nvar tryCatch = util.tryCatch;\n\nfunction ReductionPromiseArray(promises, fn, initialValue, _each) {\n    this.constructor$(promises);\n    var domain = getDomain();\n    this._fn = domain === null ? fn : util.domainBind(domain, fn);\n    if (initialValue !== undefined) {\n        initialValue = Promise.resolve(initialValue);\n        initialValue._attachCancellationCallback(this);\n    }\n    this._initialValue = initialValue;\n    this._currentCancellable = null;\n    if(_each === INTERNAL) {\n        this._eachValues = Array(this._length);\n    } else if (_each === 0) {\n        this._eachValues = null;\n    } else {\n        this._eachValues = undefined;\n    }\n    this._promise._captureStackTrace();\n    this._init$(undefined, -5);\n}\nutil.inherits(ReductionPromiseArray, PromiseArray);\n\nReductionPromiseArray.prototype._gotAccum = function(accum) {\n    if (this._eachValues !== undefined && \n        this._eachValues !== null && \n        accum !== INTERNAL) {\n        this._eachValues.push(accum);\n    }\n};\n\nReductionPromiseArray.prototype._eachComplete = function(value) {\n    if (this._eachValues !== null) {\n        this._eachValues.push(value);\n    }\n    return this._eachValues;\n};\n\nReductionPromiseArray.prototype._init = function() {};\n\nReductionPromiseArray.prototype._resolveEmptyArray = function() {\n    this._resolve(this._eachValues !== undefined ? this._eachValues\n                                                 : this._initialValue);\n};\n\nReductionPromiseArray.prototype.shouldCopyValues = function () {\n    return false;\n};\n\nReductionPromiseArray.prototype._resolve = function(value) {\n    this._promise._resolveCallback(value);\n    this._values = null;\n};\n\nReductionPromiseArray.prototype._resultCancelled = function(sender) {\n    if (sender === this._initialValue) return this._cancel();\n    if (this._isResolved()) return;\n    this._resultCancelled$();\n    if (this._currentCancellable instanceof Promise) {\n        this._currentCancellable.cancel();\n    }\n    if (this._initialValue instanceof Promise) {\n        this._initialValue.cancel();\n    }\n};\n\nReductionPromiseArray.prototype._iterate = function (values) {\n    this._values = values;\n    var value;\n    var i;\n    var length = values.length;\n    if (this._initialValue !== undefined) {\n        value = this._initialValue;\n        i = 0;\n    } else {\n        value = Promise.resolve(values[0]);\n        i = 1;\n    }\n\n    this._currentCancellable = value;\n\n    if (!value.isRejected()) {\n        for (; i < length; ++i) {\n            var ctx = {\n                accum: null,\n                value: values[i],\n                index: i,\n                length: length,\n                array: this\n            };\n            value = value._then(gotAccum, undefined, undefined, ctx, undefined);\n        }\n    }\n\n    if (this._eachValues !== undefined) {\n        value = value\n            ._then(this._eachComplete, undefined, undefined, this, undefined);\n    }\n    value._then(completed, completed, undefined, value, this);\n};\n\nPromise.prototype.reduce = function (fn, initialValue) {\n    return reduce(this, fn, initialValue, null);\n};\n\nPromise.reduce = function (promises, fn, initialValue, _each) {\n    return reduce(promises, fn, initialValue, _each);\n};\n\nfunction completed(valueOrReason, array) {\n    if (this.isFulfilled()) {\n        array._resolve(valueOrReason);\n    } else {\n        array._reject(valueOrReason);\n    }\n}\n\nfunction reduce(promises, fn, initialValue, _each) {\n    if (typeof fn !== \"function\") {\n        return apiRejection(\"expecting a function but got \" + util.classString(fn));\n    }\n    var array = new ReductionPromiseArray(promises, fn, initialValue, _each);\n    return array.promise();\n}\n\nfunction gotAccum(accum) {\n    this.accum = accum;\n    this.array._gotAccum(accum);\n    var value = tryConvertToPromise(this.value, this.array._promise);\n    if (value instanceof Promise) {\n        this.array._currentCancellable = value;\n        return value._then(gotValue, undefined, undefined, this, undefined);\n    } else {\n        return gotValue.call(this, value);\n    }\n}\n\nfunction gotValue(value) {\n    var array = this.array;\n    var promise = array._promise;\n    var fn = tryCatch(array._fn);\n    promise._pushContext();\n    var ret;\n    if (array._eachValues !== undefined) {\n        ret = fn.call(promise._boundValue(), value, this.index, this.length);\n    } else {\n        ret = fn.call(promise._boundValue(),\n                              this.accum, value, this.index, this.length);\n    }\n    if (ret instanceof Promise) {\n        array._currentCancellable = ret;\n    }\n    var promiseCreated = promise._popContext();\n    debug.checkForgottenReturns(\n        ret,\n        promiseCreated,\n        array._eachValues !== undefined ? \"Promise.each\" : \"Promise.reduce\",\n        promise\n    );\n    return ret;\n}\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/reduce.js","\"use strict\";\nmodule.exports =\n    function(Promise, PromiseArray, debug) {\nvar PromiseInspection = Promise.PromiseInspection;\nvar util = require(\"./util\");\n\nfunction SettledPromiseArray(values) {\n    this.constructor$(values);\n}\nutil.inherits(SettledPromiseArray, PromiseArray);\n\nSettledPromiseArray.prototype._promiseResolved = function (index, inspection) {\n    this._values[index] = inspection;\n    var totalResolved = ++this._totalResolved;\n    if (totalResolved >= this._length) {\n        this._resolve(this._values);\n        return true;\n    }\n    return false;\n};\n\nSettledPromiseArray.prototype._promiseFulfilled = function (value, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 33554432;\n    ret._settledValueField = value;\n    return this._promiseResolved(index, ret);\n};\nSettledPromiseArray.prototype._promiseRejected = function (reason, index) {\n    var ret = new PromiseInspection();\n    ret._bitField = 16777216;\n    ret._settledValueField = reason;\n    return this._promiseResolved(index, ret);\n};\n\nPromise.settle = function (promises) {\n    debug.deprecated(\".settle()\", \".reflect()\");\n    return new SettledPromiseArray(promises).promise();\n};\n\nPromise.prototype.settle = function () {\n    return Promise.settle(this);\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/settle.js","\"use strict\";\nmodule.exports =\nfunction(Promise, PromiseArray, apiRejection) {\nvar util = require(\"./util\");\nvar RangeError = require(\"./errors\").RangeError;\nvar AggregateError = require(\"./errors\").AggregateError;\nvar isArray = util.isArray;\nvar CANCELLATION = {};\n\n\nfunction SomePromiseArray(values) {\n    this.constructor$(values);\n    this._howMany = 0;\n    this._unwrap = false;\n    this._initialized = false;\n}\nutil.inherits(SomePromiseArray, PromiseArray);\n\nSomePromiseArray.prototype._init = function () {\n    if (!this._initialized) {\n        return;\n    }\n    if (this._howMany === 0) {\n        this._resolve([]);\n        return;\n    }\n    this._init$(undefined, -5);\n    var isArrayResolved = isArray(this._values);\n    if (!this._isResolved() &&\n        isArrayResolved &&\n        this._howMany > this._canPossiblyFulfill()) {\n        this._reject(this._getRangeError(this.length()));\n    }\n};\n\nSomePromiseArray.prototype.init = function () {\n    this._initialized = true;\n    this._init();\n};\n\nSomePromiseArray.prototype.setUnwrap = function () {\n    this._unwrap = true;\n};\n\nSomePromiseArray.prototype.howMany = function () {\n    return this._howMany;\n};\n\nSomePromiseArray.prototype.setHowMany = function (count) {\n    this._howMany = count;\n};\n\nSomePromiseArray.prototype._promiseFulfilled = function (value) {\n    this._addFulfilled(value);\n    if (this._fulfilled() === this.howMany()) {\n        this._values.length = this.howMany();\n        if (this.howMany() === 1 && this._unwrap) {\n            this._resolve(this._values[0]);\n        } else {\n            this._resolve(this._values);\n        }\n        return true;\n    }\n    return false;\n\n};\nSomePromiseArray.prototype._promiseRejected = function (reason) {\n    this._addRejected(reason);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._promiseCancelled = function () {\n    if (this._values instanceof Promise || this._values == null) {\n        return this._cancel();\n    }\n    this._addRejected(CANCELLATION);\n    return this._checkOutcome();\n};\n\nSomePromiseArray.prototype._checkOutcome = function() {\n    if (this.howMany() > this._canPossiblyFulfill()) {\n        var e = new AggregateError();\n        for (var i = this.length(); i < this._values.length; ++i) {\n            if (this._values[i] !== CANCELLATION) {\n                e.push(this._values[i]);\n            }\n        }\n        if (e.length > 0) {\n            this._reject(e);\n        } else {\n            this._cancel();\n        }\n        return true;\n    }\n    return false;\n};\n\nSomePromiseArray.prototype._fulfilled = function () {\n    return this._totalResolved;\n};\n\nSomePromiseArray.prototype._rejected = function () {\n    return this._values.length - this.length();\n};\n\nSomePromiseArray.prototype._addRejected = function (reason) {\n    this._values.push(reason);\n};\n\nSomePromiseArray.prototype._addFulfilled = function (value) {\n    this._values[this._totalResolved++] = value;\n};\n\nSomePromiseArray.prototype._canPossiblyFulfill = function () {\n    return this.length() - this._rejected();\n};\n\nSomePromiseArray.prototype._getRangeError = function (count) {\n    var message = \"Input array must contain at least \" +\n            this._howMany + \" items but contains only \" + count + \" items\";\n    return new RangeError(message);\n};\n\nSomePromiseArray.prototype._resolveEmptyArray = function () {\n    this._reject(this._getRangeError(0));\n};\n\nfunction some(promises, howMany) {\n    if ((howMany | 0) !== howMany || howMany < 0) {\n        return apiRejection(\"expecting a positive integer\\u000a\\u000a    See http://goo.gl/MqrFmX\\u000a\");\n    }\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(howMany);\n    ret.init();\n    return promise;\n}\n\nPromise.some = function (promises, howMany) {\n    return some(promises, howMany);\n};\n\nPromise.prototype.some = function (howMany) {\n    return some(this, howMany);\n};\n\nPromise._SomePromiseArray = SomePromiseArray;\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/some.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseMap = Promise.map;\n\nPromise.prototype.filter = function (fn, options) {\n    return PromiseMap(this, fn, options, INTERNAL);\n};\n\nPromise.filter = function (promises, fn, options) {\n    return PromiseMap(promises, fn, options, INTERNAL);\n};\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/filter.js","\"use strict\";\nmodule.exports = function(Promise, INTERNAL) {\nvar PromiseReduce = Promise.reduce;\nvar PromiseAll = Promise.all;\n\nfunction promiseAllThis() {\n    return PromiseAll(this);\n}\n\nfunction PromiseMapSeries(promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, INTERNAL);\n}\n\nPromise.prototype.each = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, this, undefined);\n};\n\nPromise.prototype.mapSeries = function (fn) {\n    return PromiseReduce(this, fn, INTERNAL, INTERNAL);\n};\n\nPromise.each = function (promises, fn) {\n    return PromiseReduce(promises, fn, INTERNAL, 0)\n              ._then(promiseAllThis, undefined, undefined, promises, undefined);\n};\n\nPromise.mapSeries = PromiseMapSeries;\n};\n\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/each.js","\"use strict\";\nmodule.exports = function(Promise) {\nvar SomePromiseArray = Promise._SomePromiseArray;\nfunction any(promises) {\n    var ret = new SomePromiseArray(promises);\n    var promise = ret.promise();\n    ret.setHowMany(1);\n    ret.setUnwrap();\n    ret.init();\n    return promise;\n}\n\nPromise.any = function (promises) {\n    return any(promises);\n};\n\nPromise.prototype.any = function () {\n    return any(this);\n};\n\n};\n\n\n\n// WEBPACK FOOTER //\n// ./~/bluebird/js/release/any.js","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nconst Promise = require('bluebird');\nconst Papa = require('papaparse');\nfunction ddfCsvReader(path, fileReader, logger) {\n    const internalConcepts = [\n        { concept: 'concept', concept_type: 'string', domain: null },\n        { concept: 'concept_type', concept_type: 'string', domain: null }\n    ];\n    const operators = new Map([\n        ['$and', (row, predicates) => predicates.every(p => applyFilterRow(row, p))],\n        ['$or', (row, predicates) => predicates.some(p => applyFilterRow(row, p))],\n        ['$not', (row, predicate) => !applyFilterRow(row, predicate)],\n        ['$nor', (row, predicates) => !predicates.some(p => applyFilterRow(row, p))],\n        ['$eq', (rowValue, filterValue) => rowValue === filterValue],\n        ['$ne', (rowValue, filterValue) => rowValue !== filterValue],\n        ['$gt', (rowValue, filterValue) => rowValue > filterValue],\n        ['$gte', (rowValue, filterValue) => rowValue >= filterValue],\n        ['$lt', (rowValue, filterValue) => rowValue < filterValue],\n        ['$lte', (rowValue, filterValue) => rowValue <= filterValue],\n        ['$in', (rowValue, filterValue) => filterValue.has(rowValue)],\n        ['$nin', (rowValue, filterValue) => !filterValue.has(rowValue)],\n    ]);\n    const datapackagePath = getDatapackagePath(path);\n    const basePath = getBasePath(datapackagePath);\n    const datapackagePromise = loadDataPackage(datapackagePath);\n    const conceptsPromise = datapackagePromise.then(loadConcepts);\n    const keyValueLookup = new Map();\n    const resourcesLookup = new Map();\n    const conceptsLookup = new Map();\n    let datapackage;\n    function getDatapackagePath(pathParam) {\n        if (!pathParam.endsWith('datapackage.json')) {\n            if (!pathParam.endsWith('/')) {\n                pathParam = pathParam + '/';\n            }\n            pathParam = pathParam + 'datapackage.json';\n        }\n        return pathParam;\n    }\n    function getBasePath(datapackagePathParam) {\n        const dpPathSplit = datapackagePathParam.split('/');\n        dpPathSplit.pop();\n        return dpPathSplit.join('/') + '/';\n    }\n    function loadDataPackage(pathParam) {\n        return new Promise((resolve, reject) => {\n            fileReader.readText(pathParam, (err, data) => {\n                if (err) {\n                    return reject(err);\n                }\n                try {\n                    datapackage = JSON.parse(data);\n                }\n                catch (parseErr) {\n                    return reject(parseErr);\n                }\n                buildResourcesLookup(datapackage);\n                buildKeyValueLookup(datapackage);\n                resolve(datapackage);\n            });\n        });\n    }\n    function loadConcepts() {\n        setConceptsLookup(internalConcepts);\n        const conceptQuery = {\n            select: { key: ['concept'], value: ['concept_type', 'domain'] },\n            from: 'concepts'\n        };\n        return queryData(conceptQuery)\n            .then(buildConceptsLookup)\n            .then(reparseConcepts);\n    }\n    function buildConceptsLookup(concepts) {\n        const entitySetMembershipConcepts = concepts\n            .filter(concept => concept.concept_type === 'entity_set')\n            .map(concept => ({\n            concept: 'is--' + concept.concept,\n            concept_type: 'boolean',\n            domain: null\n        }));\n        concepts = concepts\n            .concat(entitySetMembershipConcepts)\n            .concat(internalConcepts);\n        setConceptsLookup(concepts);\n        return conceptsLookup;\n    }\n    function reparseConcepts() {\n        const parsingFunctions = new Map([\n            ['boolean', (str) => str === 'true' || str === 'TRUE'],\n            ['measure', (str) => parseFloat(str)]\n        ]);\n        const resources = getResources(['concept']);\n        const resourceUpdates = [...resources].map(resource => {\n            return resource.data.then(response => {\n                const resourceConcepts = Object.keys(response.data[0]);\n                const parsingConcepts = new Map();\n                resourceConcepts.forEach(concept => {\n                    const type = conceptsLookup.get(concept).concept_type;\n                    const fn = parsingFunctions.get(type);\n                    if (fn) {\n                        parsingConcepts.set(concept, fn);\n                    }\n                });\n                return response.data.forEach(row => {\n                    for (const [concept, parseFn] of parsingConcepts) {\n                        row[concept] = parseFn(row[concept]);\n                    }\n                });\n            });\n        });\n        return Promise.all(resourceUpdates);\n    }\n    function setConceptsLookup(concepts) {\n        conceptsLookup.clear();\n        concepts.forEach(row => conceptsLookup.set(row.concept, row));\n    }\n    function query(queryParam) {\n        if (isSchemaQuery(queryParam)) {\n            return datapackagePromise.then(() => querySchema(queryParam));\n        }\n        else {\n            return conceptsPromise.then(() => queryData(queryParam));\n        }\n    }\n    function isSchemaQuery(queryParam) {\n        const fromClause = queryParam.from || '';\n        return fromClause.split('.')[1] === 'schema';\n    }\n    function queryData(queryParam) {\n        const { select: { key = [], value = [] }, from = '', where = {}, join = {}, order_by = [], language } = queryParam;\n        const select = { key, value };\n        const projection = new Set(select.key.concat(select.value));\n        const filterFields = getFilterFields(where).filter(field => !projection.has(field));\n        const resourcesPromise = loadResources(select.key, [...select.value, ...filterFields], language);\n        const joinsPromise = getJoinFilters(join);\n        const entitySetFilterPromise = getEntitySetFilter(select.key);\n        return Promise.all([resourcesPromise, entitySetFilterPromise, joinsPromise])\n            .then(([resourceResponses, entitySetFilter, joinFilters]) => {\n            const whereResolved = processWhere(where, joinFilters);\n            const filter = mergeFilters(entitySetFilter, whereResolved);\n            const dataTables = resourceResponses\n                .map(response => processResourceResponse(response, select, filterFields));\n            const queryResult = joinData(select.key, 'overwrite', ...dataTables)\n                .filter(row => applyFilterRow(row, filter))\n                .map(row => fillMissingValues(row, projection))\n                .map(row => projectRow(row, projection));\n            orderData(queryResult, order_by);\n            return queryResult;\n        });\n    }\n    function orderData(data, orderBy = []) {\n        if (orderBy.length === 0) {\n            return;\n        }\n        const orderNormalized = orderBy.map(orderPart => {\n            if (typeof orderPart === 'string') {\n                return { concept: orderPart, direction: 1 };\n            }\n            else {\n                const concept = Object.keys(orderPart)[0];\n                const direction = (orderPart[concept] === 'asc' ? 1 : -1);\n                return { concept, direction };\n            }\n        });\n        const n = orderNormalized.length;\n        data.sort((a, b) => {\n            for (let i = 0; i < n; i++) {\n                const order = orderNormalized[i];\n                if (a[order.concept] < b[order.concept]) {\n                    return -1 * order.direction;\n                }\n                else if (a[order.concept] > b[order.concept]) {\n                    return 1 * order.direction;\n                }\n            }\n            return 0;\n        });\n    }\n    function processWhere(where, joinFilters) {\n        const result = {};\n        for (const field in where) {\n            const fieldValue = where[field];\n            if (['$and', '$or', '$nor'].includes(field)) {\n                result[field] = fieldValue.map(subFilter => processWhere(subFilter, joinFilters));\n            }\n            else if (field === '$in' || field === '$nin') {\n                result[field] = new Set(fieldValue);\n            }\n            else if (typeof joinFilters[fieldValue] !== 'undefined') {\n                Object.assign(result, joinFilters[fieldValue]);\n            }\n            else if (typeof fieldValue === 'object') {\n                result[field] = processWhere(fieldValue, joinFilters);\n            }\n            else {\n                result[field] = fieldValue;\n            }\n        }\n        return result;\n    }\n    function mergeFilters(...filters) {\n        return filters.reduce((a, b) => {\n            a.$and.push(b);\n            return a;\n        }, { $and: [] });\n    }\n    function querySchema(queryPar) {\n        const getSchemaFromCollection = collectionPar => {\n            return datapackage.ddfSchema[collectionPar].map(({ primaryKey, value }) => ({ key: primaryKey, value }));\n        };\n        const collection = queryPar.from.split('.')[0];\n        if (datapackage.ddfSchema[collection]) {\n            return getSchemaFromCollection(collection);\n        }\n        else if (collection === '*') {\n            return Object.keys(datapackage.ddfSchema)\n                .map(getSchemaFromCollection)\n                .reduce((a, b) => a.concat(b));\n        }\n        else {\n            throwError(`No valid collection (${collection}) for schema query`);\n        }\n    }\n    function fillMissingValues(row, projection) {\n        for (const field of projection) {\n            if (typeof row[field] === 'undefined') {\n                row[field] = null;\n            }\n        }\n        return row;\n    }\n    function applyFilterRow(row, filter) {\n        return Object.keys(filter).every(filterKey => {\n            const operator = operators.get(filterKey);\n            if (operator) {\n                return operator(row, filter[filterKey]);\n            }\n            else if (typeof filter[filterKey] !== 'object') {\n                return operators.get('$eq')(row[filterKey], filter[filterKey]);\n            }\n            else {\n                return applyFilterRow(row[filterKey], filter[filterKey]);\n            }\n        });\n    }\n    function getJoinFilters(join) {\n        return Promise.all(Object.keys(join).map(joinID => getJoinFilter(joinID, join[joinID])))\n            .then(results => results.reduce(mergeObjects, {}));\n    }\n    function mergeObjects(a, b) {\n        return Object.assign(a, b);\n    }\n    function getJoinFilter(joinID, join) {\n        if (conceptsLookup.get(join.key).concept_type === 'time') {\n            return Promise.resolve({ [joinID]: join.where });\n        }\n        else {\n            return query({ select: { key: [join.key] }, where: join.where })\n                .then(result => ({\n                [joinID]: {\n                    [join.key]: {\n                        $in: new Set(result.map(row => row[join.key]))\n                    }\n                }\n            }));\n        }\n    }\n    function getFilterFields(filter) {\n        const fields = [];\n        for (const field in filter) {\n            if (['$and', '$or', '$not', '$nor'].includes(field)) {\n                filter[field].map(getFilterFields).forEach(subFields => fields.push(...subFields));\n            }\n            else {\n                fields.push(field);\n            }\n        }\n        return fields;\n    }\n    function filterConceptsByType(conceptTypes, conceptStrings = Array.from(conceptsLookup.keys())) {\n        const concepts = [];\n        for (const conceptString of conceptStrings) {\n            const concept = conceptsLookup.get(conceptString);\n            if (conceptTypes.includes(concept.concept_type)) {\n                concepts.push(concept);\n            }\n        }\n        return concepts;\n    }\n    function getEntityConceptRenameMap(queryKey, resourceKey) {\n        const resourceKeySet = new Set(resourceKey);\n        const entityConceptTypes = ['entity_set', 'entity_domain'];\n        const queryEntityConcepts = filterConceptsByType(entityConceptTypes, queryKey);\n        if (queryEntityConcepts.length === 0) {\n            return new Map();\n        }\n        const allEntityConcepts = filterConceptsByType(entityConceptTypes);\n        return queryEntityConcepts\n            .map(concept => allEntityConcepts\n            .filter(lookupConcept => {\n            if (concept.concept_type === 'entity_set') {\n                return resourceKeySet.has(lookupConcept.concept) &&\n                    lookupConcept.concept !== concept.concept &&\n                    (lookupConcept.domain === concept.domain ||\n                        lookupConcept.concept === concept.domain);\n            }\n            else {\n                return resourceKeySet.has(lookupConcept.concept) &&\n                    lookupConcept.concept !== concept.concept &&\n                    lookupConcept.domain === concept.concept;\n            }\n        })\n            .reduce((map, aliasConcept) => map.set(aliasConcept.concept, concept.concept), new Map())).reduce((mapA, mapB) => new Map([...mapA, ...mapB]), new Map());\n    }\n    function getEntitySetFilter(conceptStrings) {\n        const promises = filterConceptsByType(['entity_set'], conceptStrings)\n            .map(concept => query({ select: { key: [concept.domain], value: ['is--' + concept.concept] } })\n            .then(result => ({\n            [concept.concept]: {\n                $in: new Set(result\n                    .filter(row => row['is--' + concept.concept])\n                    .map(row => row[concept.domain]))\n            }\n        })));\n        return Promise.all(promises).then(results => {\n            return results.reduce((a, b) => Object.assign(a, b), {});\n        });\n    }\n    function getResources(key, value) {\n        if (!value || value.length === 0) {\n            return new Set([...keyValueLookup\n                    .get(createKeyString(key))\n                    .values()\n            ].reduce((a, b) => a.concat(b)));\n        }\n        if (Array.isArray(value)) {\n            return value\n                .map(singleValue => getResources(key, singleValue))\n                .reduce((resultSet, resources) => new Set([...resultSet, ...resources]), new Set());\n        }\n        return new Set(keyValueLookup\n            .get(createKeyString(key))\n            .get(value));\n    }\n    function processResourceResponse(response, select, filterFields) {\n        const resourcePK = response.resource.schema.primaryKey;\n        const resourceProjection = new Set([...resourcePK, ...select.value, ...filterFields]);\n        const renameMap = getEntityConceptRenameMap(select.key, resourcePK);\n        return response.data\n            .map(row => projectRow(row, resourceProjection))\n            .map(row => renameHeaderRow(row, renameMap));\n    }\n    function loadResources(key, value, language) {\n        const resources = getResources(key, value);\n        return Promise.all([...resources].map(resource => loadResource(resource, language)));\n    }\n    function projectRow(row, projectionSet) {\n        const result = {};\n        for (const concept in row) {\n            if (projectionSet.has(concept)) {\n                result[concept] = row[concept];\n            }\n        }\n        return result;\n    }\n    function renameHeaderRow(row, renameMap) {\n        const result = {};\n        for (const concept in row) {\n            result[renameMap.get(concept) || concept] = row[concept];\n        }\n        return result;\n    }\n    function joinData(key, joinMode, ...data) {\n        if (data.length === 1) {\n            return data[0];\n        }\n        const canonicalKey = key.slice(0).sort();\n        const dataMap = data.reduce((result, dataPar) => {\n            dataPar.forEach(row => {\n                const keyString = canonicalKey.map(concept => row[concept]).join(',');\n                if (result.has(keyString)) {\n                    const resultRow = result.get(keyString);\n                    joinRow(resultRow, row, joinMode);\n                }\n                else {\n                    result.set(keyString, row);\n                }\n            });\n            return result;\n        }, new Map());\n        return [...dataMap.values()];\n    }\n    function joinRow(resultRow, sourceRow, mode) {\n        switch (mode) {\n            case 'overwrite':\n                Object.assign(resultRow, sourceRow);\n                break;\n            case 'translation':\n                for (const concept in sourceRow) {\n                    if (sourceRow[concept] !== '') {\n                        resultRow[concept] = sourceRow[concept];\n                    }\n                }\n                break;\n            case 'overwriteWithError':\n                for (const concept in sourceRow) {\n                    if (resultRow[concept] !== undefined && resultRow[concept] !== sourceRow[concept]) {\n                        const sourceRowStr = JSON.stringify(sourceRow);\n                        const resultRowStr = JSON.stringify(resultRow);\n                        const errStr = `JOIN Error: two resources have different data for \"${concept}\": ${sourceRowStr},${resultRowStr}`;\n                        throwError(errStr);\n                    }\n                    else {\n                        resultRow[concept] = sourceRow[concept];\n                    }\n                }\n                break;\n        }\n    }\n    function throwError(error) {\n        const currentLogger = logger || console;\n        currentLogger.error(error);\n    }\n    function createKeyString(key, row = false) {\n        const canonicalKey = key.slice(0).sort();\n        if (!row) {\n            return canonicalKey.join(',');\n        }\n        else {\n            return canonicalKey.map(concept => row[concept]).join(',');\n        }\n    }\n    function loadResource(resource, language) {\n        const filePromises = [];\n        if (typeof resource.data === 'undefined') {\n            resource.data = loadFile(basePath + resource.path);\n        }\n        filePromises.push(resource.data);\n        const languageValid = typeof language !== 'undefined' && getLanguages().includes(language);\n        const languageLoaded = typeof resource.translations[language] !== 'undefined';\n        if (languageValid) {\n            if (!languageLoaded) {\n                const translationPath = `${basePath}lang/${language}/${resource.path}`;\n                resource.translations[language] = loadFile(translationPath);\n            }\n            filePromises.push(resource.translations[language]);\n        }\n        return Promise.all(filePromises).then(fileResponses => {\n            const filesData = fileResponses.map(resp => resp.data);\n            const primaryKey = resource.schema.primaryKey;\n            const data = joinData(primaryKey, 'translation', ...filesData);\n            return { data, resource };\n        });\n    }\n    function getLanguages() {\n        return datapackage.translations.map(lang => lang.id);\n    }\n    function loadFile(filePath) {\n        return new Promise((resolve, reject) => {\n            fileReader.readText(filePath, (err, data) => {\n                if (err) {\n                    return reject(err);\n                }\n                Papa.parse(data, {\n                    header: true,\n                    skipEmptyLines: true,\n                    dynamicTyping: (headerName) => {\n                        if (!conceptsLookup) {\n                            return true;\n                        }\n                        const concept = conceptsLookup.get(headerName) || {};\n                        return ['boolean', 'measure'].includes(concept.concept_type);\n                    },\n                    complete: result => resolve(result),\n                    error: error => reject(error)\n                });\n            });\n        });\n    }\n    function buildResourcesLookup(datapackagePar) {\n        if (resourcesLookup.size > 0) {\n            return resourcesLookup;\n        }\n        datapackagePar.resources.forEach(resource => {\n            if (!Array.isArray(resource.schema.primaryKey)) {\n                resource.schema.primaryKey = [resource.schema.primaryKey];\n            }\n            resource.translations = {};\n            resourcesLookup.set(resource.name, resource);\n        });\n        return resourcesLookup;\n    }\n    function buildKeyValueLookup(datapackagePar) {\n        if (keyValueLookup.size > 0) {\n            return keyValueLookup;\n        }\n        for (const collection in datapackagePar.ddfSchema) {\n            datapackagePar.ddfSchema[collection].map(kvPair => {\n                const key = createKeyString(kvPair.primaryKey);\n                const resources = kvPair.resources.map(resourceName => resourcesLookup.get(resourceName));\n                if (keyValueLookup.has(key)) {\n                    keyValueLookup.get(key).set(kvPair.value, resources);\n                }\n                else {\n                    keyValueLookup.set(key, new Map([[kvPair.value, resources]]));\n                }\n            });\n        }\n        return keyValueLookup;\n    }\n    return {\n        query\n    };\n}\nexports.ddfCsvReader = ddfCsvReader;\n//# sourceMappingURL=ddf-csv.js.map\n\n\n// WEBPACK FOOTER //\n// ./lib/ddf-csv.js","/*!\n\tPapa Parse\n\tv4.3.6\n\thttps://github.com/mholt/PapaParse\n\tLicense: MIT\n*/\n(function(root, factory)\n{\n\tif (typeof define === 'function' && define.amd)\n\t{\n\t\t// AMD. Register as an anonymous module.\n\t\tdefine([], factory);\n\t}\n\telse if (typeof module === 'object' && typeof exports !== 'undefined')\n\t{\n\t\t// Node. Does not work with strict CommonJS, but\n\t\t// only CommonJS-like environments that support module.exports,\n\t\t// like Node.\n\t\tmodule.exports = factory();\n\t}\n\telse\n\t{\n\t\t// Browser globals (root is window)\n\t\troot.Papa = factory();\n\t}\n}(this, function()\n{\n\t'use strict';\n\n\tvar global = (function () {\n\t\t// alternative method, similar to `Function('return this')()`\n\t\t// but without using `eval` (which is disabled when\n\t\t// using Content Security Policy).\n\n\t\tif (typeof self !== 'undefined') { return self; }\n\t\tif (typeof window !== 'undefined') { return window; }\n\t\tif (typeof global !== 'undefined') { return global; }\n\n\t\t// When running tests none of the above have been defined\n\t\treturn {};\n\t})();\n\n\n\tvar IS_WORKER = !global.document && !!global.postMessage,\n\t\tIS_PAPA_WORKER = IS_WORKER && /(\\?|&)papaworker(=|&|$)/.test(global.location.search),\n\t\tLOADED_SYNC = false, AUTO_SCRIPT_PATH;\n\tvar workers = {}, workerIdCounter = 0;\n\n\tvar Papa = {};\n\n\tPapa.parse = CsvToJson;\n\tPapa.unparse = JsonToCsv;\n\n\tPapa.RECORD_SEP = String.fromCharCode(30);\n\tPapa.UNIT_SEP = String.fromCharCode(31);\n\tPapa.BYTE_ORDER_MARK = '\\ufeff';\n\tPapa.BAD_DELIMITERS = ['\\r', '\\n', '\"', Papa.BYTE_ORDER_MARK];\n\tPapa.WORKERS_SUPPORTED = !IS_WORKER && !!global.Worker;\n\tPapa.SCRIPT_PATH = null;\t// Must be set by your code if you use workers and this lib is loaded asynchronously\n\n\t// Configurable chunk sizes for local and remote files, respectively\n\tPapa.LocalChunkSize = 1024 * 1024 * 10;\t// 10 MB\n\tPapa.RemoteChunkSize = 1024 * 1024 * 5;\t// 5 MB\n\tPapa.DefaultDelimiter = ',';\t\t\t// Used if not specified and detection fails\n\n\t// Exposed for testing and development only\n\tPapa.Parser = Parser;\n\tPapa.ParserHandle = ParserHandle;\n\tPapa.NetworkStreamer = NetworkStreamer;\n\tPapa.FileStreamer = FileStreamer;\n\tPapa.StringStreamer = StringStreamer;\n\tPapa.ReadableStreamStreamer = ReadableStreamStreamer;\n\n\tif (global.jQuery)\n\t{\n\t\tvar $ = global.jQuery;\n\t\t$.fn.parse = function(options)\n\t\t{\n\t\t\tvar config = options.config || {};\n\t\t\tvar queue = [];\n\n\t\t\tthis.each(function(idx)\n\t\t\t{\n\t\t\t\tvar supported = $(this).prop('tagName').toUpperCase() === 'INPUT'\n\t\t\t\t\t\t\t\t&& $(this).attr('type').toLowerCase() === 'file'\n\t\t\t\t\t\t\t\t&& global.FileReader;\n\n\t\t\t\tif (!supported || !this.files || this.files.length === 0)\n\t\t\t\t\treturn true;\t// continue to next input element\n\n\t\t\t\tfor (var i = 0; i < this.files.length; i++)\n\t\t\t\t{\n\t\t\t\t\tqueue.push({\n\t\t\t\t\t\tfile: this.files[i],\n\t\t\t\t\t\tinputElem: this,\n\t\t\t\t\t\tinstanceConfig: $.extend({}, config)\n\t\t\t\t\t});\n\t\t\t\t}\n\t\t\t});\n\n\t\t\tparseNextFile();\t// begin parsing\n\t\t\treturn this;\t\t// maintains chainability\n\n\n\t\t\tfunction parseNextFile()\n\t\t\t{\n\t\t\t\tif (queue.length === 0)\n\t\t\t\t{\n\t\t\t\t\tif (isFunction(options.complete))\n\t\t\t\t\t\toptions.complete();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar f = queue[0];\n\n\t\t\t\tif (isFunction(options.before))\n\t\t\t\t{\n\t\t\t\t\tvar returned = options.before(f.file, f.inputElem);\n\n\t\t\t\t\tif (typeof returned === 'object')\n\t\t\t\t\t{\n\t\t\t\t\t\tif (returned.action === 'abort')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\terror('AbortError', f.file, f.inputElem, returned.reason);\n\t\t\t\t\t\t\treturn;\t// Aborts all queued files immediately\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (returned.action === 'skip')\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tfileComplete();\t// parse the next file in the queue, if any\n\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t}\n\t\t\t\t\t\telse if (typeof returned.config === 'object')\n\t\t\t\t\t\t\tf.instanceConfig = $.extend(f.instanceConfig, returned.config);\n\t\t\t\t\t}\n\t\t\t\t\telse if (returned === 'skip')\n\t\t\t\t\t{\n\t\t\t\t\t\tfileComplete();\t// parse the next file in the queue, if any\n\t\t\t\t\t\treturn;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\t// Wrap up the user's complete callback, if any, so that ours also gets executed\n\t\t\t\tvar userCompleteFunc = f.instanceConfig.complete;\n\t\t\t\tf.instanceConfig.complete = function(results)\n\t\t\t\t{\n\t\t\t\t\tif (isFunction(userCompleteFunc))\n\t\t\t\t\t\tuserCompleteFunc(results, f.file, f.inputElem);\n\t\t\t\t\tfileComplete();\n\t\t\t\t};\n\n\t\t\t\tPapa.parse(f.file, f.instanceConfig);\n\t\t\t}\n\n\t\t\tfunction error(name, file, elem, reason)\n\t\t\t{\n\t\t\t\tif (isFunction(options.error))\n\t\t\t\t\toptions.error({name: name}, file, elem, reason);\n\t\t\t}\n\n\t\t\tfunction fileComplete()\n\t\t\t{\n\t\t\t\tqueue.splice(0, 1);\n\t\t\t\tparseNextFile();\n\t\t\t}\n\t\t}\n\t}\n\n\n\tif (IS_PAPA_WORKER)\n\t{\n\t\tglobal.onmessage = workerThreadReceivedMessage;\n\t}\n\telse if (Papa.WORKERS_SUPPORTED)\n\t{\n\t\tAUTO_SCRIPT_PATH = getScriptPath();\n\n\t\t// Check if the script was loaded synchronously\n\t\tif (!document.body)\n\t\t{\n\t\t\t// Body doesn't exist yet, must be synchronous\n\t\t\tLOADED_SYNC = true;\n\t\t}\n\t\telse\n\t\t{\n\t\t\tdocument.addEventListener('DOMContentLoaded', function () {\n\t\t\t\tLOADED_SYNC = true;\n\t\t\t}, true);\n\t\t}\n\t}\n\n\n\n\n\tfunction CsvToJson(_input, _config)\n\t{\n\t\t_config = _config || {};\n\t\tvar dynamicTyping = _config.dynamicTyping || false;\n\t\tif (isFunction(dynamicTyping)) {\n\t\t\t_config.dynamicTypingFunction = dynamicTyping;\n\t\t\t// Will be filled on first row call\n\t\t\tdynamicTyping = {};\n\t\t}\n\t\t_config.dynamicTyping = dynamicTyping;\n\n\t\tif (_config.worker && Papa.WORKERS_SUPPORTED)\n\t\t{\n\t\t\tvar w = newWorker();\n\n\t\t\tw.userStep = _config.step;\n\t\t\tw.userChunk = _config.chunk;\n\t\t\tw.userComplete = _config.complete;\n\t\t\tw.userError = _config.error;\n\n\t\t\t_config.step = isFunction(_config.step);\n\t\t\t_config.chunk = isFunction(_config.chunk);\n\t\t\t_config.complete = isFunction(_config.complete);\n\t\t\t_config.error = isFunction(_config.error);\n\t\t\tdelete _config.worker;\t// prevent infinite loop\n\n\t\t\tw.postMessage({\n\t\t\t\tinput: _input,\n\t\t\t\tconfig: _config,\n\t\t\t\tworkerId: w.id\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tvar streamer = null;\n\t\tif (typeof _input === 'string')\n\t\t{\n\t\t\tif (_config.download)\n\t\t\t\tstreamer = new NetworkStreamer(_config);\n\t\t\telse\n\t\t\t\tstreamer = new StringStreamer(_config);\n\t\t}\n\t\telse if (_input.readable === true && isFunction(_input.read) && isFunction(_input.on))\n\t\t{\n\t\t\tstreamer = new ReadableStreamStreamer(_config);\n\t\t}\n\t\telse if ((global.File && _input instanceof File) || _input instanceof Object)\t// ...Safari. (see issue #106)\n\t\t\tstreamer = new FileStreamer(_config);\n\n\t\treturn streamer.stream(_input);\n\t}\n\n\n\n\n\n\n\tfunction JsonToCsv(_input, _config)\n\t{\n\t\tvar _output = '';\n\t\tvar _fields = [];\n\n\t\t// Default configuration\n\n\t\t/** whether to surround every datum with quotes */\n\t\tvar _quotes = false;\n\n\t\t/** whether to write headers */\n\t\tvar _writeHeader = true;\n\n\t\t/** delimiting character */\n\t\tvar _delimiter = ',';\n\n\t\t/** newline character(s) */\n\t\tvar _newline = '\\r\\n';\n\n\t\t/** quote character */\n\t\tvar _quoteChar = '\"';\n\n\t\tunpackConfig();\n\n\t\tvar quoteCharRegex = new RegExp(_quoteChar, 'g');\n\n\t\tif (typeof _input === 'string')\n\t\t\t_input = JSON.parse(_input);\n\n\t\tif (_input instanceof Array)\n\t\t{\n\t\t\tif (!_input.length || _input[0] instanceof Array)\n\t\t\t\treturn serialize(null, _input);\n\t\t\telse if (typeof _input[0] === 'object')\n\t\t\t\treturn serialize(objectKeys(_input[0]), _input);\n\t\t}\n\t\telse if (typeof _input === 'object')\n\t\t{\n\t\t\tif (typeof _input.data === 'string')\n\t\t\t\t_input.data = JSON.parse(_input.data);\n\n\t\t\tif (_input.data instanceof Array)\n\t\t\t{\n\t\t\t\tif (!_input.fields)\n\t\t\t\t\t_input.fields =  _input.meta && _input.meta.fields;\n\n\t\t\t\tif (!_input.fields)\n\t\t\t\t\t_input.fields =  _input.data[0] instanceof Array\n\t\t\t\t\t\t\t\t\t? _input.fields\n\t\t\t\t\t\t\t\t\t: objectKeys(_input.data[0]);\n\n\t\t\t\tif (!(_input.data[0] instanceof Array) && typeof _input.data[0] !== 'object')\n\t\t\t\t\t_input.data = [_input.data];\t// handles input like [1,2,3] or ['asdf']\n\t\t\t}\n\n\t\t\treturn serialize(_input.fields || [], _input.data || []);\n\t\t}\n\n\t\t// Default (any valid paths should return before this)\n\t\tthrow 'exception: Unable to serialize unrecognized input';\n\n\n\t\tfunction unpackConfig()\n\t\t{\n\t\t\tif (typeof _config !== 'object')\n\t\t\t\treturn;\n\n\t\t\tif (typeof _config.delimiter === 'string'\n\t\t\t\t&& _config.delimiter.length === 1\n\t\t\t\t&& Papa.BAD_DELIMITERS.indexOf(_config.delimiter) === -1)\n\t\t\t{\n\t\t\t\t_delimiter = _config.delimiter;\n\t\t\t}\n\n\t\t\tif (typeof _config.quotes === 'boolean'\n\t\t\t\t|| _config.quotes instanceof Array)\n\t\t\t\t_quotes = _config.quotes;\n\n\t\t\tif (typeof _config.newline === 'string')\n\t\t\t\t_newline = _config.newline;\n\n\t\t\tif (typeof _config.quoteChar === 'string')\n\t\t\t\t_quoteChar = _config.quoteChar;\n\n\t\t\tif (typeof _config.header === 'boolean')\n\t\t\t\t_writeHeader = _config.header;\n\t\t}\n\n\n\t\t/** Turns an object's keys into an array */\n\t\tfunction objectKeys(obj)\n\t\t{\n\t\t\tif (typeof obj !== 'object')\n\t\t\t\treturn [];\n\t\t\tvar keys = [];\n\t\t\tfor (var key in obj)\n\t\t\t\tkeys.push(key);\n\t\t\treturn keys;\n\t\t}\n\n\t\t/** The double for loop that iterates the data and writes out a CSV string including header row */\n\t\tfunction serialize(fields, data)\n\t\t{\n\t\t\tvar csv = '';\n\n\t\t\tif (typeof fields === 'string')\n\t\t\t\tfields = JSON.parse(fields);\n\t\t\tif (typeof data === 'string')\n\t\t\t\tdata = JSON.parse(data);\n\n\t\t\tvar hasHeader = fields instanceof Array && fields.length > 0;\n\t\t\tvar dataKeyedByField = !(data[0] instanceof Array);\n\n\t\t\t// If there a header row, write it first\n\t\t\tif (hasHeader && _writeHeader)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < fields.length; i++)\n\t\t\t\t{\n\t\t\t\t\tif (i > 0)\n\t\t\t\t\t\tcsv += _delimiter;\n\t\t\t\t\tcsv += safe(fields[i], i);\n\t\t\t\t}\n\t\t\t\tif (data.length > 0)\n\t\t\t\t\tcsv += _newline;\n\t\t\t}\n\n\t\t\t// Then write out the data\n\t\t\tfor (var row = 0; row < data.length; row++)\n\t\t\t{\n\t\t\t\tvar maxCol = hasHeader ? fields.length : data[row].length;\n\n\t\t\t\tfor (var col = 0; col < maxCol; col++)\n\t\t\t\t{\n\t\t\t\t\tif (col > 0)\n\t\t\t\t\t\tcsv += _delimiter;\n\t\t\t\t\tvar colIdx = hasHeader && dataKeyedByField ? fields[col] : col;\n\t\t\t\t\tcsv += safe(data[row][colIdx], col);\n\t\t\t\t}\n\n\t\t\t\tif (row < data.length - 1)\n\t\t\t\t\tcsv += _newline;\n\t\t\t}\n\n\t\t\treturn csv;\n\t\t}\n\n\t\t/** Encloses a value around quotes if needed (makes a value safe for CSV insertion) */\n\t\tfunction safe(str, col)\n\t\t{\n\t\t\tif (typeof str === 'undefined' || str === null)\n\t\t\t\treturn '';\n\n\t\t\tstr = str.toString().replace(quoteCharRegex, _quoteChar+_quoteChar);\n\n\t\t\tvar needsQuotes = (typeof _quotes === 'boolean' && _quotes)\n\t\t\t\t\t\t\t|| (_quotes instanceof Array && _quotes[col])\n\t\t\t\t\t\t\t|| hasAny(str, Papa.BAD_DELIMITERS)\n\t\t\t\t\t\t\t|| str.indexOf(_delimiter) > -1\n\t\t\t\t\t\t\t|| str.charAt(0) === ' '\n\t\t\t\t\t\t\t|| str.charAt(str.length - 1) === ' ';\n\n\t\t\treturn needsQuotes ? _quoteChar + str + _quoteChar : str;\n\t\t}\n\n\t\tfunction hasAny(str, substrings)\n\t\t{\n\t\t\tfor (var i = 0; i < substrings.length; i++)\n\t\t\t\tif (str.indexOf(substrings[i]) > -1)\n\t\t\t\t\treturn true;\n\t\t\treturn false;\n\t\t}\n\t}\n\n\t/** ChunkStreamer is the base prototype for various streamer implementations. */\n\tfunction ChunkStreamer(config)\n\t{\n\t\tthis._handle = null;\n\t\tthis._paused = false;\n\t\tthis._finished = false;\n\t\tthis._input = null;\n\t\tthis._baseIndex = 0;\n\t\tthis._partialLine = '';\n\t\tthis._rowCount = 0;\n\t\tthis._start = 0;\n\t\tthis._nextChunk = null;\n\t\tthis.isFirstChunk = true;\n\t\tthis._completeResults = {\n\t\t\tdata: [],\n\t\t\terrors: [],\n\t\t\tmeta: {}\n\t\t};\n\t\treplaceConfig.call(this, config);\n\n\t\tthis.parseChunk = function(chunk)\n\t\t{\n\t\t\t// First chunk pre-processing\n\t\t\tif (this.isFirstChunk && isFunction(this._config.beforeFirstChunk))\n\t\t\t{\n\t\t\t\tvar modifiedChunk = this._config.beforeFirstChunk(chunk);\n\t\t\t\tif (modifiedChunk !== undefined)\n\t\t\t\t\tchunk = modifiedChunk;\n\t\t\t}\n\t\t\tthis.isFirstChunk = false;\n\n\t\t\t// Rejoin the line we likely just split in two by chunking the file\n\t\t\tvar aggregate = this._partialLine + chunk;\n\t\t\tthis._partialLine = '';\n\n\t\t\tvar results = this._handle.parse(aggregate, this._baseIndex, !this._finished);\n\n\t\t\tif (this._handle.paused() || this._handle.aborted())\n\t\t\t\treturn;\n\n\t\t\tvar lastIndex = results.meta.cursor;\n\n\t\t\tif (!this._finished)\n\t\t\t{\n\t\t\t\tthis._partialLine = aggregate.substring(lastIndex - this._baseIndex);\n\t\t\t\tthis._baseIndex = lastIndex;\n\t\t\t}\n\n\t\t\tif (results && results.data)\n\t\t\t\tthis._rowCount += results.data.length;\n\n\t\t\tvar finishedIncludingPreview = this._finished || (this._config.preview && this._rowCount >= this._config.preview);\n\n\t\t\tif (IS_PAPA_WORKER)\n\t\t\t{\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tresults: results,\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\tfinished: finishedIncludingPreview\n\t\t\t\t});\n\t\t\t}\n\t\t\telse if (isFunction(this._config.chunk))\n\t\t\t{\n\t\t\t\tthis._config.chunk(results, this._handle);\n\t\t\t\tif (this._paused)\n\t\t\t\t\treturn;\n\t\t\t\tresults = undefined;\n\t\t\t\tthis._completeResults = undefined;\n\t\t\t}\n\n\t\t\tif (!this._config.step && !this._config.chunk) {\n\t\t\t\tthis._completeResults.data = this._completeResults.data.concat(results.data);\n\t\t\t\tthis._completeResults.errors = this._completeResults.errors.concat(results.errors);\n\t\t\t\tthis._completeResults.meta = results.meta;\n\t\t\t}\n\n\t\t\tif (finishedIncludingPreview && isFunction(this._config.complete) && (!results || !results.meta.aborted))\n\t\t\t\tthis._config.complete(this._completeResults, this._input);\n\n\t\t\tif (!finishedIncludingPreview && (!results || !results.meta.paused))\n\t\t\t\tthis._nextChunk();\n\n\t\t\treturn results;\n\t\t};\n\n\t\tthis._sendError = function(error)\n\t\t{\n\t\t\tif (isFunction(this._config.error))\n\t\t\t\tthis._config.error(error);\n\t\t\telse if (IS_PAPA_WORKER && this._config.error)\n\t\t\t{\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\terror: error,\n\t\t\t\t\tfinished: false\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tfunction replaceConfig(config)\n\t\t{\n\t\t\t// Deep-copy the config so we can edit it\n\t\t\tvar configCopy = copy(config);\n\t\t\tconfigCopy.chunkSize = parseInt(configCopy.chunkSize);\t// parseInt VERY important so we don't concatenate strings!\n\t\t\tif (!config.step && !config.chunk)\n\t\t\t\tconfigCopy.chunkSize = null;  // disable Range header if not streaming; bad values break IIS - see issue #196\n\t\t\tthis._handle = new ParserHandle(configCopy);\n\t\t\tthis._handle.streamer = this;\n\t\t\tthis._config = configCopy;\t// persist the copy to the caller\n\t\t}\n\t}\n\n\n\tfunction NetworkStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tif (!config.chunkSize)\n\t\t\tconfig.chunkSize = Papa.RemoteChunkSize;\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar xhr;\n\n\t\tif (IS_WORKER)\n\t\t{\n\t\t\tthis._nextChunk = function()\n\t\t\t{\n\t\t\t\tthis._readChunk();\n\t\t\t\tthis._chunkLoaded();\n\t\t\t};\n\t\t}\n\t\telse\n\t\t{\n\t\t\tthis._nextChunk = function()\n\t\t\t{\n\t\t\t\tthis._readChunk();\n\t\t\t};\n\t\t}\n\n\t\tthis.stream = function(url)\n\t\t{\n\t\t\tthis._input = url;\n\t\t\tthis._nextChunk();\t// Starts streaming\n\t\t};\n\n\t\tthis._readChunk = function()\n\t\t{\n\t\t\tif (this._finished)\n\t\t\t{\n\t\t\t\tthis._chunkLoaded();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\txhr = new XMLHttpRequest();\n\n\t\t\tif (this._config.withCredentials)\n\t\t\t{\n\t\t\t\txhr.withCredentials = this._config.withCredentials;\n\t\t\t}\n\n\t\t\tif (!IS_WORKER)\n\t\t\t{\n\t\t\t\txhr.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\txhr.onerror = bindFunction(this._chunkError, this);\n\t\t\t}\n\n\t\t\txhr.open('GET', this._input, !IS_WORKER);\n\t\t\t// Headers can only be set when once the request state is OPENED\n\t\t\tif (this._config.downloadRequestHeaders)\n\t\t\t{\n\t\t\t\tvar headers = this._config.downloadRequestHeaders;\n\n\t\t\t\tfor (var headerName in headers)\n\t\t\t\t{\n\t\t\t\t\txhr.setRequestHeader(headerName, headers[headerName]);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (this._config.chunkSize)\n\t\t\t{\n\t\t\t\tvar end = this._start + this._config.chunkSize - 1;\t// minus one because byte range is inclusive\n\t\t\t\txhr.setRequestHeader('Range', 'bytes='+this._start+'-'+end);\n\t\t\t\txhr.setRequestHeader('If-None-Match', 'webkit-no-cache'); // https://bugs.webkit.org/show_bug.cgi?id=82672\n\t\t\t}\n\n\t\t\ttry {\n\t\t\t\txhr.send();\n\t\t\t}\n\t\t\tcatch (err) {\n\t\t\t\tthis._chunkError(err.message);\n\t\t\t}\n\n\t\t\tif (IS_WORKER && xhr.status === 0)\n\t\t\t\tthis._chunkError();\n\t\t\telse\n\t\t\t\tthis._start += this._config.chunkSize;\n\t\t}\n\n\t\tthis._chunkLoaded = function()\n\t\t{\n\t\t\tif (xhr.readyState != 4)\n\t\t\t\treturn;\n\n\t\t\tif (xhr.status < 200 || xhr.status >= 400)\n\t\t\t{\n\t\t\t\tthis._chunkError();\n\t\t\t\treturn;\n\t\t\t}\n\n\t\t\tthis._finished = !this._config.chunkSize || this._start > getFileSize(xhr);\n\t\t\tthis.parseChunk(xhr.responseText);\n\t\t}\n\n\t\tthis._chunkError = function(errorMessage)\n\t\t{\n\t\t\tvar errorText = xhr.statusText || errorMessage;\n\t\t\tthis._sendError(errorText);\n\t\t}\n\n\t\tfunction getFileSize(xhr)\n\t\t{\n\t\t\tvar contentRange = xhr.getResponseHeader('Content-Range');\n\t\t\tif (contentRange === null) { // no content range, then finish!\n\t\t\t\t\treturn -1;\n\t\t\t\t\t}\n\t\t\treturn parseInt(contentRange.substr(contentRange.lastIndexOf('/') + 1));\n\t\t}\n\t}\n\tNetworkStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tNetworkStreamer.prototype.constructor = NetworkStreamer;\n\n\n\tfunction FileStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tif (!config.chunkSize)\n\t\t\tconfig.chunkSize = Papa.LocalChunkSize;\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar reader, slice;\n\n\t\t// FileReader is better than FileReaderSync (even in worker) - see http://stackoverflow.com/q/24708649/1048862\n\t\t// But Firefox is a pill, too - see issue #76: https://github.com/mholt/PapaParse/issues/76\n\t\tvar usingAsyncReader = typeof FileReader !== 'undefined';\t// Safari doesn't consider it a function - see issue #105\n\n\t\tthis.stream = function(file)\n\t\t{\n\t\t\tthis._input = file;\n\t\t\tslice = file.slice || file.webkitSlice || file.mozSlice;\n\n\t\t\tif (usingAsyncReader)\n\t\t\t{\n\t\t\t\treader = new FileReader();\t\t// Preferred method of reading files, even in workers\n\t\t\t\treader.onload = bindFunction(this._chunkLoaded, this);\n\t\t\t\treader.onerror = bindFunction(this._chunkError, this);\n\t\t\t}\n\t\t\telse\n\t\t\t\treader = new FileReaderSync();\t// Hack for running in a web worker in Firefox\n\n\t\t\tthis._nextChunk();\t// Starts streaming\n\t\t};\n\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tif (!this._finished && (!this._config.preview || this._rowCount < this._config.preview))\n\t\t\t\tthis._readChunk();\n\t\t}\n\n\t\tthis._readChunk = function()\n\t\t{\n\t\t\tvar input = this._input;\n\t\t\tif (this._config.chunkSize)\n\t\t\t{\n\t\t\t\tvar end = Math.min(this._start + this._config.chunkSize, this._input.size);\n\t\t\t\tinput = slice.call(input, this._start, end);\n\t\t\t}\n\t\t\tvar txt = reader.readAsText(input, this._config.encoding);\n\t\t\tif (!usingAsyncReader)\n\t\t\t\tthis._chunkLoaded({ target: { result: txt } });\t// mimic the async signature\n\t\t}\n\n\t\tthis._chunkLoaded = function(event)\n\t\t{\n\t\t\t// Very important to increment start each time before handling results\n\t\t\tthis._start += this._config.chunkSize;\n\t\t\tthis._finished = !this._config.chunkSize || this._start >= this._input.size;\n\t\t\tthis.parseChunk(event.target.result);\n\t\t}\n\n\t\tthis._chunkError = function()\n\t\t{\n\t\t\tthis._sendError(reader.error);\n\t\t}\n\n\t}\n\tFileStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tFileStreamer.prototype.constructor = FileStreamer;\n\n\n\tfunction StringStreamer(config)\n\t{\n\t\tconfig = config || {};\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar string;\n\t\tvar remaining;\n\t\tthis.stream = function(s)\n\t\t{\n\t\t\tstring = s;\n\t\t\tremaining = s;\n\t\t\treturn this._nextChunk();\n\t\t}\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tif (this._finished) return;\n\t\t\tvar size = this._config.chunkSize;\n\t\t\tvar chunk = size ? remaining.substr(0, size) : remaining;\n\t\t\tremaining = size ? remaining.substr(size) : '';\n\t\t\tthis._finished = !remaining;\n\t\t\treturn this.parseChunk(chunk);\n\t\t}\n\t}\n\tStringStreamer.prototype = Object.create(StringStreamer.prototype);\n\tStringStreamer.prototype.constructor = StringStreamer;\n\n\n\tfunction ReadableStreamStreamer(config)\n\t{\n\t\tconfig = config || {};\n\n\t\tChunkStreamer.call(this, config);\n\n\t\tvar queue = [];\n\t\tvar parseOnData = true;\n\n\t\tthis.stream = function(stream)\n\t\t{\n\t\t\tthis._input = stream;\n\n\t\t\tthis._input.on('data', this._streamData);\n\t\t\tthis._input.on('end', this._streamEnd);\n\t\t\tthis._input.on('error', this._streamError);\n\t\t}\n\n\t\tthis._nextChunk = function()\n\t\t{\n\t\t\tif (queue.length)\n\t\t\t{\n\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t}\n\t\t\telse\n\t\t\t{\n\t\t\t\tparseOnData = true;\n\t\t\t}\n\t\t}\n\n\t\tthis._streamData = bindFunction(function(chunk)\n\t\t{\n\t\t\ttry\n\t\t\t{\n\t\t\t\tqueue.push(typeof chunk === 'string' ? chunk : chunk.toString(this._config.encoding));\n\n\t\t\t\tif (parseOnData)\n\t\t\t\t{\n\t\t\t\t\tparseOnData = false;\n\t\t\t\t\tthis.parseChunk(queue.shift());\n\t\t\t\t}\n\t\t\t}\n\t\t\tcatch (error)\n\t\t\t{\n\t\t\t\tthis._streamError(error);\n\t\t\t}\n\t\t}, this);\n\n\t\tthis._streamError = bindFunction(function(error)\n\t\t{\n\t\t\tthis._streamCleanUp();\n\t\t\tthis._sendError(error.message);\n\t\t}, this);\n\n\t\tthis._streamEnd = bindFunction(function()\n\t\t{\n\t\t\tthis._streamCleanUp();\n\t\t\tthis._finished = true;\n\t\t\tthis._streamData('');\n\t\t}, this);\n\n\t\tthis._streamCleanUp = bindFunction(function()\n\t\t{\n\t\t\tthis._input.removeListener('data', this._streamData);\n\t\t\tthis._input.removeListener('end', this._streamEnd);\n\t\t\tthis._input.removeListener('error', this._streamError);\n\t\t}, this);\n\t}\n\tReadableStreamStreamer.prototype = Object.create(ChunkStreamer.prototype);\n\tReadableStreamStreamer.prototype.constructor = ReadableStreamStreamer;\n\n\n\t// Use one ParserHandle per entire CSV file or string\n\tfunction ParserHandle(_config)\n\t{\n\t\t// One goal is to minimize the use of regular expressions...\n\t\tvar FLOAT = /^\\s*-?(\\d*\\.?\\d+|\\d+\\.?\\d*)(e[-+]?\\d+)?\\s*$/i;\n\n\t\tvar self = this;\n\t\tvar _stepCounter = 0;\t// Number of times step was called (number of rows parsed)\n\t\tvar _input;\t\t\t\t// The input being parsed\n\t\tvar _parser;\t\t\t// The core parser being used\n\t\tvar _paused = false;\t// Whether we are paused or not\n\t\tvar _aborted = false;\t// Whether the parser has aborted or not\n\t\tvar _delimiterError;\t// Temporary state between delimiter detection and processing results\n\t\tvar _fields = [];\t\t// Fields are from the header row of the input, if there is one\n\t\tvar _results = {\t\t// The last results returned from the parser\n\t\t\tdata: [],\n\t\t\terrors: [],\n\t\t\tmeta: {}\n\t\t};\n\n\t\tif (isFunction(_config.step))\n\t\t{\n\t\t\tvar userStep = _config.step;\n\t\t\t_config.step = function(results)\n\t\t\t{\n\t\t\t\t_results = results;\n\n\t\t\t\tif (needsHeaderRow())\n\t\t\t\t\tprocessResults();\n\t\t\t\telse\t// only call user's step function after header row\n\t\t\t\t{\n\t\t\t\t\tprocessResults();\n\n\t\t\t\t\t// It's possbile that this line was empty and there's no row here after all\n\t\t\t\t\tif (_results.data.length === 0)\n\t\t\t\t\t\treturn;\n\n\t\t\t\t\t_stepCounter += results.data.length;\n\t\t\t\t\tif (_config.preview && _stepCounter > _config.preview)\n\t\t\t\t\t\t_parser.abort();\n\t\t\t\t\telse\n\t\t\t\t\t\tuserStep(_results, self);\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\n\t\t/**\n\t\t * Parses input. Most users won't need, and shouldn't mess with, the baseIndex\n\t\t * and ignoreLastRow parameters. They are used by streamers (wrapper functions)\n\t\t * when an input comes in multiple chunks, like from a file.\n\t\t */\n\t\tthis.parse = function(input, baseIndex, ignoreLastRow)\n\t\t{\n\t\t\tif (!_config.newline)\n\t\t\t\t_config.newline = guessLineEndings(input);\n\n\t\t\t_delimiterError = false;\n\t\t\tif (!_config.delimiter)\n\t\t\t{\n\t\t\t\tvar delimGuess = guessDelimiter(input, _config.newline, _config.skipEmptyLines);\n\t\t\t\tif (delimGuess.successful)\n\t\t\t\t\t_config.delimiter = delimGuess.bestDelimiter;\n\t\t\t\telse\n\t\t\t\t{\n\t\t\t\t\t_delimiterError = true;\t// add error after parsing (otherwise it would be overwritten)\n\t\t\t\t\t_config.delimiter = Papa.DefaultDelimiter;\n\t\t\t\t}\n\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t}\n\t\t\telse if(isFunction(_config.delimiter))\n\t\t\t{\n\t\t\t\t_config.delimiter = _config.delimiter(input);\n\t\t\t\t_results.meta.delimiter = _config.delimiter;\n\t\t\t}\n\n\t\t\tvar parserConfig = copy(_config);\n\t\t\tif (_config.preview && _config.header)\n\t\t\t\tparserConfig.preview++;\t// to compensate for header row\n\n\t\t\t_input = input;\n\t\t\t_parser = new Parser(parserConfig);\n\t\t\t_results = _parser.parse(_input, baseIndex, ignoreLastRow);\n\t\t\tprocessResults();\n\t\t\treturn _paused ? { meta: { paused: true } } : (_results || { meta: { paused: false } });\n\t\t};\n\n\t\tthis.paused = function()\n\t\t{\n\t\t\treturn _paused;\n\t\t};\n\n\t\tthis.pause = function()\n\t\t{\n\t\t\t_paused = true;\n\t\t\t_parser.abort();\n\t\t\t_input = _input.substr(_parser.getCharIndex());\n\t\t};\n\n\t\tthis.resume = function()\n\t\t{\n\t\t\t_paused = false;\n\t\t\tself.streamer.parseChunk(_input);\n\t\t};\n\n\t\tthis.aborted = function ()\n\t\t{\n\t\t\treturn _aborted;\n\t\t};\n\n\t\tthis.abort = function()\n\t\t{\n\t\t\t_aborted = true;\n\t\t\t_parser.abort();\n\t\t\t_results.meta.aborted = true;\n\t\t\tif (isFunction(_config.complete))\n\t\t\t\t_config.complete(_results);\n\t\t\t_input = '';\n\t\t};\n\n\t\tfunction processResults()\n\t\t{\n\t\t\tif (_results && _delimiterError)\n\t\t\t{\n\t\t\t\taddError('Delimiter', 'UndetectableDelimiter', 'Unable to auto-detect delimiting character; defaulted to \\''+Papa.DefaultDelimiter+'\\'');\n\t\t\t\t_delimiterError = false;\n\t\t\t}\n\n\t\t\tif (_config.skipEmptyLines)\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < _results.data.length; i++)\n\t\t\t\t\tif (_results.data[i].length === 1 && _results.data[i][0] === '')\n\t\t\t\t\t\t_results.data.splice(i--, 1);\n\t\t\t}\n\n\t\t\tif (needsHeaderRow())\n\t\t\t\tfillHeaderFields();\n\n\t\t\treturn applyHeaderAndDynamicTyping();\n\t\t}\n\n\t\tfunction needsHeaderRow()\n\t\t{\n\t\t\treturn _config.header && _fields.length === 0;\n\t\t}\n\n\t\tfunction fillHeaderFields()\n\t\t{\n\t\t\tif (!_results)\n\t\t\t\treturn;\n\t\t\tfor (var i = 0; needsHeaderRow() && i < _results.data.length; i++)\n\t\t\t\tfor (var j = 0; j < _results.data[i].length; j++)\n\t\t\t\t\t_fields.push(_results.data[i][j]);\n\t\t\t_results.data.splice(0, 1);\n\t\t}\n\n\t\tfunction shouldApplyDynamicTyping(field) {\n\t\t\t// Cache function values to avoid calling it for each row\n\t\t\tif (_config.dynamicTypingFunction && _config.dynamicTyping[field] === undefined) {\n\t\t\t\t_config.dynamicTyping[field] = _config.dynamicTypingFunction(field);\n\t\t\t}\n\t\t\treturn (_config.dynamicTyping[field] || _config.dynamicTyping) === true\n\t\t}\n\n\t\tfunction parseDynamic(field, value)\n\t\t{\n\t\t\tif (shouldApplyDynamicTyping(field))\n\t\t\t{\n\t\t\t\tif (value === 'true' || value === 'TRUE')\n\t\t\t\t\treturn true;\n\t\t\t\telse if (value === 'false' || value === 'FALSE')\n\t\t\t\t\treturn false;\n\t\t\t\telse\n\t\t\t\t\treturn tryParseFloat(value);\n\t\t\t}\n\t\t\treturn value;\n\t\t}\n\n\t\tfunction applyHeaderAndDynamicTyping()\n\t\t{\n\t\t\tif (!_results || (!_config.header && !_config.dynamicTyping))\n\t\t\t\treturn _results;\n\n\t\t\tfor (var i = 0; i < _results.data.length; i++)\n\t\t\t{\n\t\t\t\tvar row = _config.header ? {} : [];\n\n\t\t\t\tfor (var j = 0; j < _results.data[i].length; j++)\n\t\t\t\t{\n\t\t\t\t\tvar field = j;\n\t\t\t\t\tvar value = _results.data[i][j];\n\n\t\t\t\t\tif (_config.header)\n\t\t\t\t\t\tfield = j >= _fields.length ? '__parsed_extra' : _fields[j];\n\n\t\t\t\t\tvalue = parseDynamic(field, value);\n\n\t\t\t\t\tif (field === '__parsed_extra')\n\t\t\t\t\t{\n\t\t\t\t\t\trow[field] = row[field] || [];\n\t\t\t\t\t\trow[field].push(value);\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\trow[field] = value;\n\t\t\t\t}\n\n\t\t\t\t_results.data[i] = row;\n\n\t\t\t\tif (_config.header)\n\t\t\t\t{\n\t\t\t\t\tif (j > _fields.length)\n\t\t\t\t\t\taddError('FieldMismatch', 'TooManyFields', 'Too many fields: expected ' + _fields.length + ' fields but parsed ' + j, i);\n\t\t\t\t\telse if (j < _fields.length)\n\t\t\t\t\t\taddError('FieldMismatch', 'TooFewFields', 'Too few fields: expected ' + _fields.length + ' fields but parsed ' + j, i);\n\t\t\t\t}\n\t\t\t}\n\n\t\t\tif (_config.header && _results.meta)\n\t\t\t\t_results.meta.fields = _fields;\n\t\t\treturn _results;\n\t\t}\n\n\t\tfunction guessDelimiter(input, newline, skipEmptyLines)\n\t\t{\n\t\t\tvar delimChoices = [',', '\\t', '|', ';', Papa.RECORD_SEP, Papa.UNIT_SEP];\n\t\t\tvar bestDelim, bestDelta, fieldCountPrevRow;\n\n\t\t\tfor (var i = 0; i < delimChoices.length; i++)\n\t\t\t{\n\t\t\t\tvar delim = delimChoices[i];\n\t\t\t\tvar delta = 0, avgFieldCount = 0, emptyLinesCount = 0;\n\t\t\t\tfieldCountPrevRow = undefined;\n\n\t\t\t\tvar preview = new Parser({\n\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\tnewline: newline,\n\t\t\t\t\tpreview: 10\n\t\t\t\t}).parse(input);\n\n\t\t\t\tfor (var j = 0; j < preview.data.length; j++)\n\t\t\t\t{\n\t\t\t\t\tif (skipEmptyLines && preview.data[j].length === 1 && preview.data[j][0].length === 0) {\n\t\t\t\t\t\temptyLinesCount++\n\t\t\t\t\t\tcontinue\n\t\t\t\t\t}\n\t\t\t\t\tvar fieldCount = preview.data[j].length;\n\t\t\t\t\tavgFieldCount += fieldCount;\n\n\t\t\t\t\tif (typeof fieldCountPrevRow === 'undefined')\n\t\t\t\t\t{\n\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\t}\n\t\t\t\t\telse if (fieldCount > 1)\n\t\t\t\t\t{\n\t\t\t\t\t\tdelta += Math.abs(fieldCount - fieldCountPrevRow);\n\t\t\t\t\t\tfieldCountPrevRow = fieldCount;\n\t\t\t\t\t}\n\t\t\t\t}\n\n\t\t\t\tif (preview.data.length > 0)\n\t\t\t\t\tavgFieldCount /= (preview.data.length - emptyLinesCount);\n\n\t\t\t\tif ((typeof bestDelta === 'undefined' || delta < bestDelta)\n\t\t\t\t\t&& avgFieldCount > 1.99)\n\t\t\t\t{\n\t\t\t\t\tbestDelta = delta;\n\t\t\t\t\tbestDelim = delim;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t_config.delimiter = bestDelim;\n\n\t\t\treturn {\n\t\t\t\tsuccessful: !!bestDelim,\n\t\t\t\tbestDelimiter: bestDelim\n\t\t\t}\n\t\t}\n\n\t\tfunction guessLineEndings(input)\n\t\t{\n\t\t\tinput = input.substr(0, 1024*1024);\t// max length 1 MB\n\n\t\t\tvar r = input.split('\\r');\n\n\t\t\tvar n = input.split('\\n');\n\n\t\t\tvar nAppearsFirst = (n.length > 1 && n[0].length < r[0].length);\n\n\t\t\tif (r.length === 1 || nAppearsFirst)\n\t\t\t\treturn '\\n';\n\n\t\t\tvar numWithN = 0;\n\t\t\tfor (var i = 0; i < r.length; i++)\n\t\t\t{\n\t\t\t\tif (r[i][0] === '\\n')\n\t\t\t\t\tnumWithN++;\n\t\t\t}\n\n\t\t\treturn numWithN >= r.length / 2 ? '\\r\\n' : '\\r';\n\t\t}\n\n\t\tfunction tryParseFloat(val)\n\t\t{\n\t\t\tvar isNumber = FLOAT.test(val);\n\t\t\treturn isNumber ? parseFloat(val) : val;\n\t\t}\n\n\t\tfunction addError(type, code, msg, row)\n\t\t{\n\t\t\t_results.errors.push({\n\t\t\t\ttype: type,\n\t\t\t\tcode: code,\n\t\t\t\tmessage: msg,\n\t\t\t\trow: row\n\t\t\t});\n\t\t}\n\t}\n\n\n\n\n\n\t/** The core parser implements speedy and correct CSV parsing */\n\tfunction Parser(config)\n\t{\n\t\t// Unpack the config object\n\t\tconfig = config || {};\n\t\tvar delim = config.delimiter;\n\t\tvar newline = config.newline;\n\t\tvar comments = config.comments;\n\t\tvar step = config.step;\n\t\tvar preview = config.preview;\n\t\tvar fastMode = config.fastMode;\n\t\tvar quoteChar = config.quoteChar || '\"';\n\n\t\t// Delimiter must be valid\n\t\tif (typeof delim !== 'string'\n\t\t\t|| Papa.BAD_DELIMITERS.indexOf(delim) > -1)\n\t\t\tdelim = ',';\n\n\t\t// Comment character must be valid\n\t\tif (comments === delim)\n\t\t\tthrow 'Comment character same as delimiter';\n\t\telse if (comments === true)\n\t\t\tcomments = '#';\n\t\telse if (typeof comments !== 'string'\n\t\t\t|| Papa.BAD_DELIMITERS.indexOf(comments) > -1)\n\t\t\tcomments = false;\n\n\t\t// Newline must be valid: \\r, \\n, or \\r\\n\n\t\tif (newline != '\\n' && newline != '\\r' && newline != '\\r\\n')\n\t\t\tnewline = '\\n';\n\n\t\t// We're gonna need these at the Parser scope\n\t\tvar cursor = 0;\n\t\tvar aborted = false;\n\n\t\tthis.parse = function(input, baseIndex, ignoreLastRow)\n\t\t{\n\t\t\t// For some reason, in Chrome, this speeds things up (!?)\n\t\t\tif (typeof input !== 'string')\n\t\t\t\tthrow 'Input must be a string';\n\n\t\t\t// We don't need to compute some of these every time parse() is called,\n\t\t\t// but having them in a more local scope seems to perform better\n\t\t\tvar inputLen = input.length,\n\t\t\t\tdelimLen = delim.length,\n\t\t\t\tnewlineLen = newline.length,\n\t\t\t\tcommentsLen = comments.length;\n\t\t\tvar stepIsFunction = isFunction(step);\n\n\t\t\t// Establish starting state\n\t\t\tcursor = 0;\n\t\t\tvar data = [], errors = [], row = [], lastCursor = 0;\n\n\t\t\tif (!input)\n\t\t\t\treturn returnable();\n\n\t\t\tif (fastMode || (fastMode !== false && input.indexOf(quoteChar) === -1))\n\t\t\t{\n\t\t\t\tvar rows = input.split(newline);\n\t\t\t\tfor (var i = 0; i < rows.length; i++)\n\t\t\t\t{\n\t\t\t\t\tvar row = rows[i];\n\t\t\t\t\tcursor += row.length;\n\t\t\t\t\tif (i !== rows.length - 1)\n\t\t\t\t\t\tcursor += newline.length;\n\t\t\t\t\telse if (ignoreLastRow)\n\t\t\t\t\t\treturn returnable();\n\t\t\t\t\tif (comments && row.substr(0, commentsLen) === comments)\n\t\t\t\t\t\tcontinue;\n\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = [];\n\t\t\t\t\t\tpushRow(row.split(delim));\n\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t}\n\t\t\t\t\telse\n\t\t\t\t\t\tpushRow(row.split(delim));\n\t\t\t\t\tif (preview && i >= preview)\n\t\t\t\t\t{\n\t\t\t\t\t\tdata = data.slice(0, preview);\n\t\t\t\t\t\treturn returnable(true);\n\t\t\t\t\t}\n\t\t\t\t}\n\t\t\t\treturn returnable();\n\t\t\t}\n\n\t\t\tvar nextDelim = input.indexOf(delim, cursor);\n\t\t\tvar nextNewline = input.indexOf(newline, cursor);\n\t\t\tvar quoteCharRegex = new RegExp(quoteChar+quoteChar, 'g');\n\n\t\t\t// Parser loop\n\t\t\tfor (;;)\n\t\t\t{\n\t\t\t\t// Field has opening quote\n\t\t\t\tif (input[cursor] === quoteChar)\n\t\t\t\t{\n\t\t\t\t\t// Start our search for the closing quote where the cursor is\n\t\t\t\t\tvar quoteSearch = cursor;\n\n\t\t\t\t\t// Skip the opening quote\n\t\t\t\t\tcursor++;\n\n\t\t\t\t\tfor (;;)\n\t\t\t\t\t{\n\t\t\t\t\t\t// Find closing quote\n\t\t\t\t\t\tvar quoteSearch = input.indexOf(quoteChar, quoteSearch+1);\n\n\t\t\t\t\t\t//No other quotes are found - no other delimiters\n\t\t\t\t\t\tif (quoteSearch === -1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tif (!ignoreLastRow) {\n\t\t\t\t\t\t\t\t// No closing quote... what a pity\n\t\t\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\t\t\tcode: 'MissingQuotes',\n\t\t\t\t\t\t\t\t\tmessage: 'Quoted field unterminated',\n\t\t\t\t\t\t\t\t\trow: data.length,\t// row has yet to be inserted\n\t\t\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\treturn finish();\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Closing quote at EOF\n\t\t\t\t\t\tif (quoteSearch === inputLen-1)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tvar value = input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar);\n\t\t\t\t\t\t\treturn finish(value);\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// If this quote is escaped, it's part of the data; skip it\n\t\t\t\t\t\tif (input[quoteSearch+1] === quoteChar)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\t\tcontinue;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Closing quote followed by delimiter\n\t\t\t\t\t\tif (input[quoteSearch+1] === delim)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\tcursor = quoteSearch + 1 + delimLen;\n\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\t// Closing quote followed by newline\n\t\t\t\t\t\tif (input.substr(quoteSearch+1, newlineLen) === newline)\n\t\t\t\t\t\t{\n\t\t\t\t\t\t\trow.push(input.substring(cursor, quoteSearch).replace(quoteCharRegex, quoteChar));\n\t\t\t\t\t\t\tsaveRow(quoteSearch + 1 + newlineLen);\n\t\t\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\t// because we may have skipped the nextDelim in the quoted field\n\n\t\t\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t\t\t{\n\t\t\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t\tif (preview && data.length >= preview)\n\t\t\t\t\t\t\t\treturn returnable(true);\n\n\t\t\t\t\t\t\tbreak;\n\t\t\t\t\t\t}\n\n\n\t\t\t\t\t\t// Checks for valid closing quotes are complete (escaped quotes or quote followed by EOF/delimiter/newline) -- assume these quotes are part of an invalid text string\n\t\t\t\t\t\terrors.push({\n\t\t\t\t\t\t\ttype: 'Quotes',\n\t\t\t\t\t\t\tcode: 'InvalidQuotes',\n\t\t\t\t\t\t\tmessage: 'Trailing quote on quoted field is malformed',\n\t\t\t\t\t\t\trow: data.length,\t// row has yet to be inserted\n\t\t\t\t\t\t\tindex: cursor\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tquoteSearch++;\n\t\t\t\t\t\tcontinue;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Comment found at start of new line\n\t\t\t\tif (comments && row.length === 0 && input.substr(cursor, commentsLen) === comments)\n\t\t\t\t{\n\t\t\t\t\tif (nextNewline === -1)\t// Comment ends at EOF\n\t\t\t\t\t\treturn returnable();\n\t\t\t\t\tcursor = nextNewline + newlineLen;\n\t\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// Next delimiter comes before next newline, so we've reached end of field\n\t\t\t\tif (nextDelim !== -1 && (nextDelim < nextNewline || nextNewline === -1))\n\t\t\t\t{\n\t\t\t\t\trow.push(input.substring(cursor, nextDelim));\n\t\t\t\t\tcursor = nextDelim + delimLen;\n\t\t\t\t\tnextDelim = input.indexOf(delim, cursor);\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\t// End of row\n\t\t\t\tif (nextNewline !== -1)\n\t\t\t\t{\n\t\t\t\t\trow.push(input.substring(cursor, nextNewline));\n\t\t\t\t\tsaveRow(nextNewline + newlineLen);\n\n\t\t\t\t\tif (stepIsFunction)\n\t\t\t\t\t{\n\t\t\t\t\t\tdoStep();\n\t\t\t\t\t\tif (aborted)\n\t\t\t\t\t\t\treturn returnable();\n\t\t\t\t\t}\n\n\t\t\t\t\tif (preview && data.length >= preview)\n\t\t\t\t\t\treturn returnable(true);\n\n\t\t\t\t\tcontinue;\n\t\t\t\t}\n\n\t\t\t\tbreak;\n\t\t\t}\n\n\n\t\t\treturn finish();\n\n\n\t\t\tfunction pushRow(row)\n\t\t\t{\n\t\t\t\tdata.push(row);\n\t\t\t\tlastCursor = cursor;\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Appends the remaining input from cursor to the end into\n\t\t\t * row, saves the row, calls step, and returns the results.\n\t\t\t */\n\t\t\tfunction finish(value)\n\t\t\t{\n\t\t\t\tif (ignoreLastRow)\n\t\t\t\t\treturn returnable();\n\t\t\t\tif (typeof value === 'undefined')\n\t\t\t\t\tvalue = input.substr(cursor);\n\t\t\t\trow.push(value);\n\t\t\t\tcursor = inputLen;\t// important in case parsing is paused\n\t\t\t\tpushRow(row);\n\t\t\t\tif (stepIsFunction)\n\t\t\t\t\tdoStep();\n\t\t\t\treturn returnable();\n\t\t\t}\n\n\t\t\t/**\n\t\t\t * Appends the current row to the results. It sets the cursor\n\t\t\t * to newCursor and finds the nextNewline. The caller should\n\t\t\t * take care to execute user's step function and check for\n\t\t\t * preview and end parsing if necessary.\n\t\t\t */\n\t\t\tfunction saveRow(newCursor)\n\t\t\t{\n\t\t\t\tcursor = newCursor;\n\t\t\t\tpushRow(row);\n\t\t\t\trow = [];\n\t\t\t\tnextNewline = input.indexOf(newline, cursor);\n\t\t\t}\n\n\t\t\t/** Returns an object with the results, errors, and meta. */\n\t\t\tfunction returnable(stopped)\n\t\t\t{\n\t\t\t\treturn {\n\t\t\t\t\tdata: data,\n\t\t\t\t\terrors: errors,\n\t\t\t\t\tmeta: {\n\t\t\t\t\t\tdelimiter: delim,\n\t\t\t\t\t\tlinebreak: newline,\n\t\t\t\t\t\taborted: aborted,\n\t\t\t\t\t\ttruncated: !!stopped,\n\t\t\t\t\t\tcursor: lastCursor + (baseIndex || 0)\n\t\t\t\t\t}\n\t\t\t\t};\n\t\t\t}\n\n\t\t\t/** Executes the user's step function and resets data & errors. */\n\t\t\tfunction doStep()\n\t\t\t{\n\t\t\t\tstep(returnable());\n\t\t\t\tdata = [], errors = [];\n\t\t\t}\n\t\t};\n\n\t\t/** Sets the abort flag */\n\t\tthis.abort = function()\n\t\t{\n\t\t\taborted = true;\n\t\t};\n\n\t\t/** Gets the cursor position */\n\t\tthis.getCharIndex = function()\n\t\t{\n\t\t\treturn cursor;\n\t\t};\n\t}\n\n\n\t// If you need to load Papa Parse asynchronously and you also need worker threads, hard-code\n\t// the script path here. See: https://github.com/mholt/PapaParse/issues/87#issuecomment-57885358\n\tfunction getScriptPath()\n\t{\n\t\tvar scripts = document.getElementsByTagName('script');\n\t\treturn scripts.length ? scripts[scripts.length - 1].src : '';\n\t}\n\n\tfunction newWorker()\n\t{\n\t\tif (!Papa.WORKERS_SUPPORTED)\n\t\t\treturn false;\n\t\tif (!LOADED_SYNC && Papa.SCRIPT_PATH === null)\n\t\t\tthrow new Error(\n\t\t\t\t'Script path cannot be determined automatically when Papa Parse is loaded asynchronously. ' +\n\t\t\t\t'You need to set Papa.SCRIPT_PATH manually.'\n\t\t\t);\n\t\tvar workerUrl = Papa.SCRIPT_PATH || AUTO_SCRIPT_PATH;\n\t\t// Append 'papaworker' to the search string to tell papaparse that this is our worker.\n\t\tworkerUrl += (workerUrl.indexOf('?') !== -1 ? '&' : '?') + 'papaworker';\n\t\tvar w = new global.Worker(workerUrl);\n\t\tw.onmessage = mainThreadReceivedMessage;\n\t\tw.id = workerIdCounter++;\n\t\tworkers[w.id] = w;\n\t\treturn w;\n\t}\n\n\t/** Callback when main thread receives a message */\n\tfunction mainThreadReceivedMessage(e)\n\t{\n\t\tvar msg = e.data;\n\t\tvar worker = workers[msg.workerId];\n\t\tvar aborted = false;\n\n\t\tif (msg.error)\n\t\t\tworker.userError(msg.error, msg.file);\n\t\telse if (msg.results && msg.results.data)\n\t\t{\n\t\t\tvar abort = function() {\n\t\t\t\taborted = true;\n\t\t\t\tcompleteWorker(msg.workerId, { data: [], errors: [], meta: { aborted: true } });\n\t\t\t};\n\n\t\t\tvar handle = {\n\t\t\t\tabort: abort,\n\t\t\t\tpause: notImplemented,\n\t\t\t\tresume: notImplemented\n\t\t\t};\n\n\t\t\tif (isFunction(worker.userStep))\n\t\t\t{\n\t\t\t\tfor (var i = 0; i < msg.results.data.length; i++)\n\t\t\t\t{\n\t\t\t\t\tworker.userStep({\n\t\t\t\t\t\tdata: [msg.results.data[i]],\n\t\t\t\t\t\terrors: msg.results.errors,\n\t\t\t\t\t\tmeta: msg.results.meta\n\t\t\t\t\t}, handle);\n\t\t\t\t\tif (aborted)\n\t\t\t\t\t\tbreak;\n\t\t\t\t}\n\t\t\t\tdelete msg.results;\t// free memory ASAP\n\t\t\t}\n\t\t\telse if (isFunction(worker.userChunk))\n\t\t\t{\n\t\t\t\tworker.userChunk(msg.results, handle, msg.file);\n\t\t\t\tdelete msg.results;\n\t\t\t}\n\t\t}\n\n\t\tif (msg.finished && !aborted)\n\t\t\tcompleteWorker(msg.workerId, msg.results);\n\t}\n\n\tfunction completeWorker(workerId, results) {\n\t\tvar worker = workers[workerId];\n\t\tif (isFunction(worker.userComplete))\n\t\t\tworker.userComplete(results);\n\t\tworker.terminate();\n\t\tdelete workers[workerId];\n\t}\n\n\tfunction notImplemented() {\n\t\tthrow 'Not implemented.';\n\t}\n\n\t/** Callback when worker thread receives a message */\n\tfunction workerThreadReceivedMessage(e)\n\t{\n\t\tvar msg = e.data;\n\n\t\tif (typeof Papa.WORKER_ID === 'undefined' && msg)\n\t\t\tPapa.WORKER_ID = msg.workerId;\n\n\t\tif (typeof msg.input === 'string')\n\t\t{\n\t\t\tglobal.postMessage({\n\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\tresults: Papa.parse(msg.input, msg.config),\n\t\t\t\tfinished: true\n\t\t\t});\n\t\t}\n\t\telse if ((global.File && msg.input instanceof File) || msg.input instanceof Object)\t// thank you, Safari (see issue #106)\n\t\t{\n\t\t\tvar results = Papa.parse(msg.input, msg.config);\n\t\t\tif (results)\n\t\t\t\tglobal.postMessage({\n\t\t\t\t\tworkerId: Papa.WORKER_ID,\n\t\t\t\t\tresults: results,\n\t\t\t\t\tfinished: true\n\t\t\t\t});\n\t\t}\n\t}\n\n\t/** Makes a deep copy of an array or object (mostly) */\n\tfunction copy(obj)\n\t{\n\t\tif (typeof obj !== 'object')\n\t\t\treturn obj;\n\t\tvar cpy = obj instanceof Array ? [] : {};\n\t\tfor (var key in obj)\n\t\t\tcpy[key] = copy(obj[key]);\n\t\treturn cpy;\n\t}\n\n\tfunction bindFunction(f, self)\n\t{\n\t\treturn function() { f.apply(self, arguments); };\n\t}\n\n\tfunction isFunction(func)\n\t{\n\t\treturn typeof func === 'function';\n\t}\n\n\treturn Papa;\n}));\n\n\n\n// WEBPACK FOOTER //\n// ./~/papaparse/papaparse.js"],"sourceRoot":""}